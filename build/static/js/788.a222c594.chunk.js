/*! For license information please see 788.a222c594.chunk.js.LICENSE.txt */
(self.webpackChunkfrontendpagina=self.webpackChunkfrontendpagina||[]).push([[788],{219:(t,e,i)=>{"use strict";var n=i(763),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function l(t){return n.isMemo(t)?a:o[t.$$typeof]||s}o[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[n.Memo]=a;var h=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,i,n){if("string"!==typeof i){if(f){var s=p(i);s&&s!==f&&t(e,s,n)}var a=c(i);d&&(a=a.concat(d(i)));for(var o=l(e),g=l(i),m=0;m<a.length;++m){var b=a[m];if(!r[b]&&(!n||!n[b])&&(!g||!g[b])&&(!o||!o[b])){var v=u(i,b);try{h(e,b,v)}catch(y){}}}}return e}},983:(t,e)=>{"use strict";var i="function"===typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,r=i?Symbol.for("react.fragment"):60107,a=i?Symbol.for("react.strict_mode"):60108,o=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,d=i?Symbol.for("react.concurrent_mode"):60111,u=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,b=i?Symbol.for("react.block"):60121,v=i?Symbol.for("react.fundamental"):60117,y=i?Symbol.for("react.responder"):60118,w=i?Symbol.for("react.scope"):60119;function A(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:switch(t=t.type){case c:case d:case r:case o:case a:case p:return t;default:switch(t=t&&t.$$typeof){case h:case u:case m:case g:case l:return t;default:return e}}case s:return e}}}function E(t){return A(t)===d}e.AsyncMode=c,e.ConcurrentMode=d,e.ContextConsumer=h,e.ContextProvider=l,e.Element=n,e.ForwardRef=u,e.Fragment=r,e.Lazy=m,e.Memo=g,e.Portal=s,e.Profiler=o,e.StrictMode=a,e.Suspense=p,e.isAsyncMode=function(t){return E(t)||A(t)===c},e.isConcurrentMode=E,e.isContextConsumer=function(t){return A(t)===h},e.isContextProvider=function(t){return A(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===n},e.isForwardRef=function(t){return A(t)===u},e.isFragment=function(t){return A(t)===r},e.isLazy=function(t){return A(t)===m},e.isMemo=function(t){return A(t)===g},e.isPortal=function(t){return A(t)===s},e.isProfiler=function(t){return A(t)===o},e.isStrictMode=function(t){return A(t)===a},e.isSuspense=function(t){return A(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===r||t===d||t===o||t===a||t===p||t===f||"object"===typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===g||t.$$typeof===l||t.$$typeof===h||t.$$typeof===u||t.$$typeof===v||t.$$typeof===y||t.$$typeof===w||t.$$typeof===b)},e.typeOf=A},763:(t,e,i)=>{"use strict";t.exports=i(983)},376:(t,e,i)=>{"use strict";var n={};i.r(n),i.d(n,{dU:()=>Ao,ng:()=>Eo,EA:()=>xo,Tm:()=>_o,D6:()=>So,YE:()=>Co});var s=i(43),r=i(86),a=i(324),o=i.n(a);const l=function(t){function e(t,n,l,h,u){for(var p,f,g,m,w,E=0,x=0,_=0,S=0,C=0,I=0,D=g=p=0,F=0,N=0,B=0,j=0,U=l.length,z=U-1,H="",G="",$="",V="";F<U;){if(f=l.charCodeAt(F),F===z&&0!==x+S+_+E&&(0!==x&&(f=47===x?10:47),S=_=E=0,U++,z++),0===x+S+_+E){if(F===z&&(0<N&&(H=H.replace(d,"")),0<H.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:H+=l.charAt(F)}f=59}switch(f){case 123:for(p=(H=H.trim()).charCodeAt(0),g=1,j=++F;F<U;){switch(f=l.charCodeAt(F)){case 123:g++;break;case 125:g--;break;case 47:switch(f=l.charCodeAt(F+1)){case 42:case 47:t:{for(D=F+1;D<z;++D)switch(l.charCodeAt(D)){case 47:if(42===f&&42===l.charCodeAt(D-1)&&F+2!==D){F=D+1;break t}break;case 10:if(47===f){F=D+1;break t}}F=D}}break;case 91:f++;case 40:f++;case 34:case 39:for(;F++<z&&l.charCodeAt(F)!==f;);}if(0===g)break;F++}if(g=l.substring(j,F),0===p&&(p=(H=H.replace(c,"").trim()).charCodeAt(0)),64===p){switch(0<N&&(H=H.replace(d,"")),f=H.charCodeAt(1)){case 100:case 109:case 115:case 45:N=n;break;default:N=M}if(j=(g=e(n,N,g,f,u+1)).length,0<L&&(w=o(3,g,N=i(M,H,B),n,k,T,j,f,u,h),H=N.join(""),void 0!==w&&0===(j=(g=w.trim()).length)&&(f=0,g="")),0<j)switch(f){case 115:H=H.replace(A,a);case 100:case 109:case 45:g=H+"{"+g+"}";break;case 107:g=(H=H.replace(b,"$1 $2"))+"{"+g+"}",g=1===R||2===R&&r("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=H+g,112===h&&(G+=g,g="")}else g=""}else g=e(n,i(n,H,B),g,h,u+1);$+=g,g=B=N=D=p=0,H="",f=l.charCodeAt(++F);break;case 125:case 59:if(1<(j=(H=(0<N?H.replace(d,""):H).trim()).length))switch(0===D&&(p=H.charCodeAt(0),45===p||96<p&&123>p)&&(j=(H=H.replace(" ",":")).length),0<L&&void 0!==(w=o(1,H,n,t,k,T,G.length,h,u,h))&&0===(j=(H=w.trim()).length)&&(H="\0\0"),p=H.charCodeAt(0),f=H.charCodeAt(1),p){case 0:break;case 64:if(105===f||99===f){V+=H+l.charAt(F);break}default:58!==H.charCodeAt(j-1)&&(G+=s(H,p,f,H.charCodeAt(2)))}B=N=D=p=0,H="",f=l.charCodeAt(++F)}}switch(f){case 13:case 10:47===x?x=0:0===1+p&&107!==h&&0<H.length&&(N=1,H+="\0"),0<L*O&&o(0,H,n,t,k,T,G.length,h,u,h),T=1,k++;break;case 59:case 125:if(0===x+S+_+E){T++;break}default:switch(T++,m=l.charAt(F),f){case 9:case 32:if(0===S+E+x)switch(C){case 44:case 58:case 9:case 32:m="";break;default:32!==f&&(m=" ")}break;case 0:m="\\0";break;case 12:m="\\f";break;case 11:m="\\v";break;case 38:0===S+x+E&&(N=B=1,m="\f"+m);break;case 108:if(0===S+x+E+P&&0<D)switch(F-D){case 2:112===C&&58===l.charCodeAt(F-3)&&(P=C);case 8:111===I&&(P=I)}break;case 58:0===S+x+E&&(D=F);break;case 44:0===x+_+S+E&&(N=1,m+="\r");break;case 34:case 39:0===x&&(S=S===f?0:0===S?f:S);break;case 91:0===S+x+_&&E++;break;case 93:0===S+x+_&&E--;break;case 41:0===S+x+E&&_--;break;case 40:if(0===S+x+E){if(0===p)if(2*C+3*I===533);else p=1;_++}break;case 64:0===x+_+S+E+D+g&&(g=1);break;case 42:case 47:if(!(0<S+E+_))switch(x){case 0:switch(2*f+3*l.charCodeAt(F+1)){case 235:x=47;break;case 220:j=F,x=42}break;case 42:47===f&&42===C&&j+2!==F&&(33===l.charCodeAt(j+2)&&(G+=l.substring(j,F+1)),m="",x=0)}}0===x&&(H+=m)}I=C,C=f,F++}if(0<(j=G.length)){if(N=n,0<L&&(void 0!==(w=o(2,G,N,t,k,T,j,h,u,h))&&0===(G=w).length))return V+G+$;if(G=N.join(",")+"{"+G+"}",0!==R*P){switch(2!==R||r(G,2)||(P=0),P){case 111:G=G.replace(y,":-moz-$1")+G;break;case 112:G=G.replace(v,"::-webkit-input-$1")+G.replace(v,"::-moz-$1")+G.replace(v,":-ms-input-$1")+G}P=0}}return V+G+$}function i(t,e,i){var s=e.trim().split(g);e=s;var r=s.length,a=t.length;switch(a){case 0:case 1:var o=0;for(t=0===a?"":t[0]+" ";o<r;++o)e[o]=n(t,e[o],i).trim();break;default:var l=o=0;for(e=[];o<r;++o)for(var h=0;h<a;++h)e[l++]=n(t[h]+" ",s[o],i).trim()}return e}function n(t,e,i){var n=e.charCodeAt(0);switch(33>n&&(n=(e=e.trim()).charCodeAt(0)),n){case 38:return e.replace(m,"$1"+t.trim());case 58:return t.trim()+e.replace(m,"$1"+t.trim());default:if(0<1*i&&0<e.indexOf("\f"))return e.replace(m,(58===t.charCodeAt(0)?"":"$1")+t.trim())}return t+e}function s(t,e,i,n){var a=t+";",o=2*e+3*i+4*n;if(944===o){t=a.indexOf(":",9)+1;var l=a.substring(t,a.length-1).trim();return l=a.substring(0,t).trim()+l+";",1===R||2===R&&r(l,1)?"-webkit-"+l+l:l}if(0===R||2===R&&!r(a,1))return a;switch(o){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(C,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return p.test(a)?a.replace(u,":-webkit-")+a.replace(u,":-moz-")+a:a;case 1e3:switch(e=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(e)){case 226:l=a.replace(w,"tb");break;case 232:l=a.replace(w,"tb-rl");break;case 220:l=a.replace(w,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(e=(a=t).length-10,o=(l=(33===a.charCodeAt(e)?a.substring(0,e):a).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<o?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(x,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(x,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===S.test(t))return 115===(l=t.substring(t.indexOf(":")+1)).charCodeAt(0)?s(t.replace("stretch","fill-available"),e,i,n).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===i+n&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+a}return a}function r(t,e){var i=t.indexOf(1===e?":":"{"),n=t.substring(0,3!==e?i:10);return i=t.substring(i+1,t.length-1),D(2!==e?n:n.replace(_,"$1"),i,e)}function a(t,e){var i=s(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return i!==e+";"?i.replace(E," or ($1)").substring(4):"("+e+")"}function o(t,e,i,n,s,r,a,o,l,c){for(var d,u=0,p=e;u<L;++u)switch(d=I[u].call(h,t,p,i,n,s,r,a,o,l,c)){case void 0:case!1:case!0:case null:break;default:p=d}if(p!==e)return p}function l(t){return void 0!==(t=t.prefix)&&(D=null,t?"function"!==typeof t?R=1:(R=2,D=t):R=0),l}function h(t,i){var n=t;if(33>n.charCodeAt(0)&&(n=n.trim()),n=[n],0<L){var s=o(-1,i,n,n,k,T,0,0,0,0);void 0!==s&&"string"===typeof s&&(i=s)}var r=e(M,n,i,0,0);return 0<L&&(void 0!==(s=o(-2,r,n,n,k,T,r.length,0,0,0))&&(r=s)),P=0,T=k=1,r}var c=/^\0+/g,d=/[\0\r\f]/g,u=/: */g,p=/zoo|gra/,f=/([,: ])(transform)/g,g=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,b=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,y=/:(read-only)/g,w=/[svh]\w+-[tblr]{2}/,A=/\(\s*(.*)\s*\)/g,E=/([\s\S]*?);/g,x=/-self|flex-/g,_=/[^]*?(:[rp][el]a[\w-]+)[^]*/,S=/stretch|:\s*\w+\-(?:conte|avail)/,C=/([^-])(image-set\()/,T=1,k=1,P=0,R=1,M=[],I=[],L=0,D=null,O=0;return h.use=function t(e){switch(e){case void 0:case null:L=I.length=0;break;default:if("function"===typeof e)I[L++]=e;else if("object"===typeof e)for(var i=0,n=e.length;i<n;++i)t(e[i]);else O=0|!!e}return t},h.set=l,void 0!==t&&l(t),h};const h={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function c(t){var e=Object.create(null);return function(i){return void 0===e[i]&&(e[i]=t(i)),e[i]}}var d=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,u=c((function(t){return d.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),p=i(219),f=i.n(p);function g(){return(g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}var m=function(t,e){for(var i=[t[0]],n=0,s=e.length;n<s;n+=1)i.push(e[n],t[n+1]);return i},b=function(t){return null!==t&&"object"==typeof t&&"[object Object]"===(t.toString?t.toString():Object.prototype.toString.call(t))&&!(0,r.typeOf)(t)},v=Object.freeze([]),y=Object.freeze({});function w(t){return"function"==typeof t}function A(t){return t.displayName||t.name||"Component"}function E(t){return t&&"string"==typeof t.styledComponentId}var x="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",_="undefined"!=typeof window&&"HTMLElement"in window,S=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)));function C(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(i.length>0?" Args: "+i.join(", "):""))}var T=function(){function t(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}var e=t.prototype;return e.indexOfGroup=function(t){for(var e=0,i=0;i<t;i++)e+=this.groupSizes[i];return e},e.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var i=this.groupSizes,n=i.length,s=n;t>=s;)(s<<=1)<0&&C(16,""+t);this.groupSizes=new Uint32Array(s),this.groupSizes.set(i),this.length=s;for(var r=n;r<s;r++)this.groupSizes[r]=0}for(var a=this.indexOfGroup(t+1),o=0,l=e.length;o<l;o++)this.tag.insertRule(a,e[o])&&(this.groupSizes[t]++,a++)},e.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],i=this.indexOfGroup(t),n=i+e;this.groupSizes[t]=0;for(var s=i;s<n;s++)this.tag.deleteRule(i)}},e.getGroup=function(t){var e="";if(t>=this.length||0===this.groupSizes[t])return e;for(var i=this.groupSizes[t],n=this.indexOfGroup(t),s=n+i,r=n;r<s;r++)e+=this.tag.getRule(r)+"/*!sc*/\n";return e},t}(),k=new Map,P=new Map,R=1,M=function(t){if(k.has(t))return k.get(t);for(;P.has(R);)R++;var e=R++;return k.set(t,e),P.set(e,t),e},I=function(t){return P.get(t)},L=function(t,e){e>=R&&(R=e+1),k.set(t,e),P.set(e,t)},D="style["+x+'][data-styled-version="5.3.11"]',O=new RegExp("^"+x+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),F=function(t,e,i){for(var n,s=i.split(","),r=0,a=s.length;r<a;r++)(n=s[r])&&t.registerName(e,n)},N=function(t,e){for(var i=(e.textContent||"").split("/*!sc*/\n"),n=[],s=0,r=i.length;s<r;s++){var a=i[s].trim();if(a){var o=a.match(O);if(o){var l=0|parseInt(o[1],10),h=o[2];0!==l&&(L(h,l),F(t,h,o[3]),t.getTag().insertRules(l,n)),n.length=0}else n.push(a)}}},B=function(){return i.nc},j=function(t){var e=document.head,i=t||e,n=document.createElement("style"),s=function(t){for(var e=t.childNodes,i=e.length;i>=0;i--){var n=e[i];if(n&&1===n.nodeType&&n.hasAttribute(x))return n}}(i),r=void 0!==s?s.nextSibling:null;n.setAttribute(x,"active"),n.setAttribute("data-styled-version","5.3.11");var a=B();return a&&n.setAttribute("nonce",a),i.insertBefore(n,r),n},U=function(){function t(t){var e=this.element=j(t);e.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var e=document.styleSheets,i=0,n=e.length;i<n;i++){var s=e[i];if(s.ownerNode===t)return s}C(17)}(e),this.length=0}var e=t.prototype;return e.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch(t){return!1}},e.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.getRule=function(t){var e=this.sheet.cssRules[t];return void 0!==e&&"string"==typeof e.cssText?e.cssText:""},t}(),z=function(){function t(t){var e=this.element=j(t);this.nodes=e.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(t,e){if(t<=this.length&&t>=0){var i=document.createTextNode(e),n=this.nodes[t];return this.element.insertBefore(i,n||null),this.length++,!0}return!1},e.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},t}(),H=function(){function t(t){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},e.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.getRule=function(t){return t<this.length?this.rules[t]:""},t}(),G=_,$={isServer:!_,useCSSOMInjection:!S},V=function(){function t(t,e,i){void 0===t&&(t=y),void 0===e&&(e={}),this.options=g({},$,{},t),this.gs=e,this.names=new Map(i),this.server=!!t.isServer,!this.server&&_&&G&&(G=!1,function(t){for(var e=document.querySelectorAll(D),i=0,n=e.length;i<n;i++){var s=e[i];s&&"active"!==s.getAttribute(x)&&(N(t,s),s.parentNode&&s.parentNode.removeChild(s))}}(this))}t.registerId=function(t){return M(t)};var e=t.prototype;return e.reconstructWithOptions=function(e,i){return void 0===i&&(i=!0),new t(g({},this.options,{},e),this.gs,i&&this.names||void 0)},e.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.getTag=function(){return this.tag||(this.tag=(i=(e=this.options).isServer,n=e.useCSSOMInjection,s=e.target,t=i?new H(s):n?new U(s):new z(s),new T(t)));var t,e,i,n,s},e.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},e.registerName=function(t,e){if(M(t),this.names.has(t))this.names.get(t).add(e);else{var i=new Set;i.add(e),this.names.set(t,i)}},e.insertRules=function(t,e,i){this.registerName(t,e),this.getTag().insertRules(M(t),i)},e.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.clearRules=function(t){this.getTag().clearGroup(M(t)),this.clearNames(t)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(t){for(var e=t.getTag(),i=e.length,n="",s=0;s<i;s++){var r=I(s);if(void 0!==r){var a=t.names.get(r),o=e.getGroup(s);if(a&&o&&a.size){var l=x+".g"+s+'[id="'+r+'"]',h="";void 0!==a&&a.forEach((function(t){t.length>0&&(h+=t+",")})),n+=""+o+l+'{content:"'+h+'"}/*!sc*/\n'}}}return n}(this)},t}(),W=/(a)(d)/gi,q=function(t){return String.fromCharCode(t+(t>25?39:97))};function K(t){var e,i="";for(e=Math.abs(t);e>52;e=e/52|0)i=q(e%52)+i;return(q(e%52)+i).replace(W,"$1-$2")}var Y=function(t,e){for(var i=e.length;i;)t=33*t^e.charCodeAt(--i);return t},X=function(t){return Y(5381,t)};function J(t){for(var e=0;e<t.length;e+=1){var i=t[e];if(w(i)&&!E(i))return!1}return!0}var Z=X("5.3.11"),Q=function(){function t(t,e,i){this.rules=t,this.staticRulesId="",this.isStatic=(void 0===i||i.isStatic)&&J(t),this.componentId=e,this.baseHash=Y(Z,e),this.baseStyle=i,V.registerId(e)}return t.prototype.generateAndInjectStyles=function(t,e,i){var n=this.componentId,s=[];if(this.baseStyle&&s.push(this.baseStyle.generateAndInjectStyles(t,e,i)),this.isStatic&&!i.hash)if(this.staticRulesId&&e.hasNameForId(n,this.staticRulesId))s.push(this.staticRulesId);else{var r=bt(this.rules,t,e,i).join(""),a=K(Y(this.baseHash,r)>>>0);if(!e.hasNameForId(n,a)){var o=i(r,"."+a,void 0,n);e.insertRules(n,a,o)}s.push(a),this.staticRulesId=a}else{for(var l=this.rules.length,h=Y(this.baseHash,i.hash),c="",d=0;d<l;d++){var u=this.rules[d];if("string"==typeof u)c+=u;else if(u){var p=bt(u,t,e,i),f=Array.isArray(p)?p.join(""):p;h=Y(h,f+d),c+=f}}if(c){var g=K(h>>>0);if(!e.hasNameForId(n,g)){var m=i(c,"."+g,void 0,n);e.insertRules(n,g,m)}s.push(g)}}return s.join(" ")},t}(),tt=/^\s*\/\/.*$/gm,et=[":","[",".","#"];function it(t){var e,i,n,s,r=void 0===t?y:t,a=r.options,o=void 0===a?y:a,h=r.plugins,c=void 0===h?v:h,d=new l(o),u=[],p=function(t){function e(e){if(e)try{t(e+"}")}catch(t){}}return function(i,n,s,r,a,o,l,h,c,d){switch(i){case 1:if(0===c&&64===n.charCodeAt(0))return t(n+";"),"";break;case 2:if(0===h)return n+"/*|*/";break;case 3:switch(h){case 102:case 112:return t(s[0]+n),"";default:return n+(0===d?"/*|*/":"")}case-2:n.split("/*|*/}").forEach(e)}}}((function(t){u.push(t)})),f=function(t,n,r){return 0===n&&-1!==et.indexOf(r[i.length])||r.match(s)?t:"."+e};function g(t,r,a,o){void 0===o&&(o="&");var l=t.replace(tt,""),h=r&&a?a+" "+r+" { "+l+" }":l;return e=o,i=r,n=new RegExp("\\"+i+"\\b","g"),s=new RegExp("(\\"+i+"\\b){2,}"),d(a||!r?"":r,h)}return d.use([].concat(c,[function(t,e,s){2===t&&s.length&&s[0].lastIndexOf(i)>0&&(s[0]=s[0].replace(n,f))},p,function(t){if(-2===t){var e=u;return u=[],e}}])),g.hash=c.length?c.reduce((function(t,e){return e.name||C(15),Y(t,e.name)}),5381).toString():"",g}var nt=s.createContext(),st=(nt.Consumer,s.createContext()),rt=(st.Consumer,new V),at=it();function ot(){return(0,s.useContext)(nt)||rt}function lt(){return(0,s.useContext)(st)||at}function ht(t){var e=(0,s.useState)(t.stylisPlugins),i=e[0],n=e[1],r=ot(),a=(0,s.useMemo)((function(){var e=r;return t.sheet?e=t.sheet:t.target&&(e=e.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[t.disableCSSOMInjection,t.sheet,t.target]),l=(0,s.useMemo)((function(){return it({options:{prefix:!t.disableVendorPrefixes},plugins:i})}),[t.disableVendorPrefixes,i]);return(0,s.useEffect)((function(){o()(i,t.stylisPlugins)||n(t.stylisPlugins)}),[t.stylisPlugins]),s.createElement(nt.Provider,{value:a},s.createElement(st.Provider,{value:l},t.children))}var ct=function(){function t(t,e){var i=this;this.inject=function(t,e){void 0===e&&(e=at);var n=i.name+e.hash;t.hasNameForId(i.id,n)||t.insertRules(i.id,n,e(i.rules,n,"@keyframes"))},this.toString=function(){return C(12,String(i.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=e}return t.prototype.getName=function(t){return void 0===t&&(t=at),this.name+t.hash},t}(),dt=/([A-Z])/,ut=/([A-Z])/g,pt=/^ms-/,ft=function(t){return"-"+t.toLowerCase()};function gt(t){return dt.test(t)?t.replace(ut,ft).replace(pt,"-ms-"):t}var mt=function(t){return null==t||!1===t||""===t};function bt(t,e,i,n){if(Array.isArray(t)){for(var s,r=[],a=0,o=t.length;a<o;a+=1)""!==(s=bt(t[a],e,i,n))&&(Array.isArray(s)?r.push.apply(r,s):r.push(s));return r}return mt(t)?"":E(t)?"."+t.styledComponentId:w(t)?"function"!=typeof(l=t)||l.prototype&&l.prototype.isReactComponent||!e?t:bt(t(e),e,i,n):t instanceof ct?i?(t.inject(i,n),t.getName(n)):t:b(t)?function t(e,i){var n,s,r=[];for(var a in e)e.hasOwnProperty(a)&&!mt(e[a])&&(Array.isArray(e[a])&&e[a].isCss||w(e[a])?r.push(gt(a)+":",e[a],";"):b(e[a])?r.push.apply(r,t(e[a],a)):r.push(gt(a)+": "+(n=a,(null==(s=e[a])||"boolean"==typeof s||""===s?"":"number"!=typeof s||0===s||n in h||n.startsWith("--")?String(s).trim():s+"px")+";")));return i?[i+" {"].concat(r,["}"]):r}(t):t.toString();var l}var vt=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function yt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return w(t)||b(t)?vt(bt(m(v,[t].concat(i)))):0===i.length&&1===t.length&&"string"==typeof t[0]?t:vt(bt(m(t,i)))}new Set;var wt=function(t,e,i){return void 0===i&&(i=y),t.theme!==i.theme&&t.theme||e||i.theme},At=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Et=/(^-|-$)/g;function xt(t){return t.replace(At,"-").replace(Et,"")}var _t=function(t){return K(X(t)>>>0)};function St(t){return"string"==typeof t&&!0}var Ct=function(t){return"function"==typeof t||"object"==typeof t&&null!==t&&!Array.isArray(t)},Tt=function(t){return"__proto__"!==t&&"constructor"!==t&&"prototype"!==t};function kt(t,e,i){var n=t[i];Ct(e)&&Ct(n)?Pt(n,e):t[i]=e}function Pt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];for(var s=0,r=i;s<r.length;s++){var a=r[s];if(Ct(a))for(var o in a)Tt(o)&&kt(t,a[o],o)}return t}var Rt=s.createContext();Rt.Consumer;var Mt={};function It(t,e,i){var n=E(t),r=!St(t),a=e.attrs,o=void 0===a?v:a,l=e.componentId,h=void 0===l?function(t,e){var i="string"!=typeof t?"sc":xt(t);Mt[i]=(Mt[i]||0)+1;var n=i+"-"+_t("5.3.11"+i+Mt[i]);return e?e+"-"+n:n}(e.displayName,e.parentComponentId):l,c=e.displayName,d=void 0===c?function(t){return St(t)?"styled."+t:"Styled("+A(t)+")"}(t):c,p=e.displayName&&e.componentId?xt(e.displayName)+"-"+e.componentId:e.componentId||h,m=n&&t.attrs?Array.prototype.concat(t.attrs,o).filter(Boolean):o,b=e.shouldForwardProp;n&&t.shouldForwardProp&&(b=e.shouldForwardProp?function(i,n,s){return t.shouldForwardProp(i,n,s)&&e.shouldForwardProp(i,n,s)}:t.shouldForwardProp);var x,_=new Q(i,p,n?t.componentStyle:void 0),S=_.isStatic&&0===o.length,C=function(t,e){return function(t,e,i,n){var r=t.attrs,a=t.componentStyle,o=t.defaultProps,l=t.foldedComponentIds,h=t.shouldForwardProp,c=t.styledComponentId,d=t.target,p=function(t,e,i){void 0===t&&(t=y);var n=g({},e,{theme:t}),s={};return i.forEach((function(t){var e,i,r,a=t;for(e in w(a)&&(a=a(n)),a)n[e]=s[e]="className"===e?(i=s[e],r=a[e],i&&r?i+" "+r:i||r):a[e]})),[n,s]}(wt(e,(0,s.useContext)(Rt),o)||y,e,r),f=p[0],m=p[1],b=function(t,e,i){var n=ot(),s=lt();return e?t.generateAndInjectStyles(y,n,s):t.generateAndInjectStyles(i,n,s)}(a,n,f),v=i,A=m.$as||e.$as||m.as||e.as||d,E=St(A),x=m!==e?g({},e,{},m):e,_={};for(var S in x)"$"!==S[0]&&"as"!==S&&("forwardedAs"===S?_.as=x[S]:(h?h(S,u,A):!E||u(S))&&(_[S]=x[S]));return e.style&&m.style!==e.style&&(_.style=g({},e.style,{},m.style)),_.className=Array.prototype.concat(l,c,b!==c?b:null,e.className,m.className).filter(Boolean).join(" "),_.ref=v,(0,s.createElement)(A,_)}(x,t,e,S)};return C.displayName=d,(x=s.forwardRef(C)).attrs=m,x.componentStyle=_,x.displayName=d,x.shouldForwardProp=b,x.foldedComponentIds=n?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):v,x.styledComponentId=p,x.target=n?t.target:t,x.withComponent=function(t){var n=e.componentId,s=function(t,e){if(null==t)return{};var i,n,s={},r=Object.keys(t);for(n=0;n<r.length;n++)i=r[n],e.indexOf(i)>=0||(s[i]=t[i]);return s}(e,["componentId"]),r=n&&n+"-"+(St(t)?t:xt(A(t)));return It(t,g({},s,{attrs:m,componentId:r}),i)},Object.defineProperty(x,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=n?Pt({},t.defaultProps,e):e}}),Object.defineProperty(x,"toString",{value:function(){return"."+x.styledComponentId}}),r&&f()(x,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),x}var Lt=function(t){return function t(e,i,n){if(void 0===n&&(n=y),!(0,r.isValidElementType)(i))return C(1,String(i));var s=function(){return e(i,n,yt.apply(void 0,arguments))};return s.withConfig=function(s){return t(e,i,g({},n,{},s))},s.attrs=function(s){return t(e,i,g({},n,{attrs:Array.prototype.concat(n.attrs,s).filter(Boolean)}))},s}(It,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(t){Lt[t]=Lt(t)}));!function(){function t(t,e){this.rules=t,this.componentId=e,this.isStatic=J(t),V.registerId(this.componentId+1)}var e=t.prototype;e.createStyles=function(t,e,i,n){var s=n(bt(this.rules,e,i,n).join(""),""),r=this.componentId+t;i.insertRules(r,r,s)},e.removeStyles=function(t,e){e.clearRules(this.componentId+t)},e.renderStyles=function(t,e,i,n){t>2&&V.registerId(this.componentId+t),this.removeStyles(t,i),this.createStyles(t,e,i,n)}}();!function(){function t(){var t=this;this._emitSheetCSS=function(){var e=t.instance.toString();if(!e)return"";var i=B();return"<style "+[i&&'nonce="'+i+'"',x+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+e+"</style>"},this.getStyleTags=function(){return t.sealed?C(2):t._emitSheetCSS()},this.getStyleElement=function(){var e;if(t.sealed)return C(2);var i=((e={})[x]="",e["data-styled-version"]="5.3.11",e.dangerouslySetInnerHTML={__html:t.instance.toString()},e),n=B();return n&&(i.nonce=n),[s.createElement("style",g({},i,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new V({isServer:!0}),this.sealed=!1}var e=t.prototype;e.collectStyles=function(t){return this.sealed?C(2):s.createElement(ht,{sheet:this.instance},t)},e.interleaveWithNodeStream=function(t){return C(3)}}();const Dt=Lt;var Ot,Ft,Nt,Bt,jt,Ut,zt,Ht,Gt,$t,Vt,Wt,qt,Kt,Yt,Xt,Jt={currentFileNo:0,documents:[],documentLoading:!0,currentDocument:void 0,rendererRect:void 0,config:{},pluginRenderers:[]},Zt=((0,s.createContext)({state:Jt,dispatch:function(){return null}}),function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}),Qt=yt(Ot||(Ot=Zt(["\n  background-color: ",";\n  color: ",";\n"],["\n  background-color: ",";\n  color: ",";\n"])),(function(t){return t.theme.primary}),(function(t){return t.theme.text_primary})),te=yt(Ft||(Ft=Zt(["\n  background-color: ",";\n  color: ",";\n"],["\n  background-color: ",";\n  color: ",";\n"])),(function(t){return t.theme.secondary}),(function(t){return t.theme.text_secondary})),ee=Dt.button(Nt||(Nt=Zt(["\n  ","\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 35px;\n  height: 35px;\n  padding: 0;\n  margin: 0 0 0 5px;\n  text-align: center;\n  font-size: 18px;\n  border: 0;\n  outline: none;\n  cursor: pointer;\n  text-decoration: none;\n  border-radius: 35px;\n  opacity: ",";\n  pointer-events: ",";\n  box-shadow: 2px 2px 3px #00000033;\n\n  @media (max-width: 768px) {\n    width: 30px;\n    height: 30px;\n    font-size: 15px;\n  }\n"],["\n  ","\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 35px;\n  height: 35px;\n  padding: 0;\n  margin: 0 0 0 5px;\n  text-align: center;\n  font-size: 18px;\n  border: 0;\n  outline: none;\n  cursor: pointer;\n  text-decoration: none;\n  border-radius: 35px;\n  opacity: ",";\n  pointer-events: ",";\n  box-shadow: 2px 2px 3px #00000033;\n\n  @media (max-width: 768px) {\n    width: 30px;\n    height: 30px;\n    font-size: 15px;\n  }\n"])),Qt,(function(t){return t.disabled?.4:1}),(function(t){return t.disabled?"none":"all"})),ie=Dt.a(Bt||(Bt=Zt(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 0;\n  outline: none;\n  cursor: pointer;\n  text-decoration: none;\n  border-radius: 35px;\n  background-color: ",";\n  color: ",";\n  box-shadow: 2px 2px 3px #00000033;\n\n  width: 35px;\n  height: 35px;\n  font-size: 18px;\n  @media (max-width: 768px) {\n    width: 30px;\n    height: 30px;\n    font-size: 15px;\n  }\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 0;\n  outline: none;\n  cursor: pointer;\n  text-decoration: none;\n  border-radius: 35px;\n  background-color: ",";\n  color: ",";\n  box-shadow: 2px 2px 3px #00000033;\n\n  width: 35px;\n  height: 35px;\n  font-size: 18px;\n  @media (max-width: 768px) {\n    width: 30px;\n    height: 30px;\n    font-size: 15px;\n  }\n"])),(function(t){return t.theme.primary}),(function(t){return t.theme.text_primary})),ne=(Dt(ee)(jt||(jt=Zt([""],[""]))),Dt(ee)(Ut||(Ut=Zt(["\n  ","\n"],["\n  ","\n"])),te)),se=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},re=(Dt.div(zt||(zt=se(["\n  min-width: 150px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end;\n  margin: 0 10px;\n  color: ",";\n"],["\n  min-width: 150px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end;\n  margin: 0 10px;\n  color: ",";\n"])),(function(t){return t.theme.text_primary})),Dt(ne)(Ht||(Ht=se(["\n  width: 30px;\n  height: 30px;\n  margin: 0 5px 0 10px;\n\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"],["\n  width: 30px;\n  height: 30px;\n  margin: 0 5px 0 10px;\n\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"])))),ae=(Dt(re)(Gt||(Gt=se(["\n  margin: 0 5px;\n"],["\n  margin: 0 5px;\n"]))),function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}),oe=(Dt.div($t||($t=ae(["\n  flex: 1;\n  text-align: left;\n  color: ",";\n  font-weight: bold;\n  margin: 0 10px;\n  overflow: hidden;\n"],["\n  flex: 1;\n  text-align: left;\n  color: ",";\n  font-weight: bold;\n  margin: 0 10px;\n  overflow: hidden;\n"])),(function(t){return t.theme.text_primary})),function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}),le=(Dt.div(Vt||(Vt=oe(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  z-index: 1;\n  padding: 0 10px;\n  background-color: ",";\n  font-size: 16px;\n  min-height: 50px;\n\n  @media (max-width: 768px) {\n    min-height: 30px;\n    padding: 5px;\n    font-size: 10px;\n  }\n"],["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  z-index: 1;\n  padding: 0 10px;\n  background-color: ",";\n  font-size: 16px;\n  min-height: 50px;\n\n  @media (max-width: 768px) {\n    min-height: 30px;\n    padding: 5px;\n    font-size: 10px;\n  }\n"])),(function(t){return t.theme.primary})),function(){return le=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},le.apply(this,arguments)}),he=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function o(t){try{l(n.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},ce=function(t,e){var i,n,s,r,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(o){return function(l){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,o[0]&&(a=0)),a;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(l){o=[6,l],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},de=function(t){var e=t.documentURI,i=t.signal,n=t.fileLoaderComplete,s=t.readerTypeFunction;return fetch(e,{signal:i}).then((function(t){return he(void 0,void 0,void 0,(function(){var e,i;return ce(this,(function(r){switch(r.label){case 0:return[4,t.blob()];case 1:switch(e=r.sent(),(i=new FileReader).addEventListener("loadend",(function(){return n(i)})),s){case"arrayBuffer":i.readAsArrayBuffer(e);break;case"binaryString":i.readAsBinaryString(e);break;case"dataURL":i.readAsDataURL(e);break;case"text":i.readAsText(e)}return[2]}}))}))})).catch((function(t){return t}))},ue=function(t){return de(le(le({},t),{readerTypeFunction:"arrayBuffer"}))},pe=function(t){return de(le(le({},t),{readerTypeFunction:"dataURL"}))},fe=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},ge=(Dt.div(Wt||(Wt=fe(["\n  display: flex;\n  flex: 1;\n  overflow-y: auto;\n"],["\n  display: flex;\n  flex: 1;\n  overflow-y: auto;\n"]))),Dt.div(qt||(qt=fe(["\n  display: flex;\n  flex: 1;\n  height: 75px;\n  align-items: center;\n  justify-content: center;\n"],["\n  display: flex;\n  flex: 1;\n  height: 75px;\n  align-items: center;\n  justify-content: center;\n"]))),function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var s=yt.apply(void 0,[t].concat(i)).join(""),r=_t(s);return new ct(r,s)}(Kt||(Kt=fe(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"],["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"])))),me=(Dt.div(Yt||(Yt=fe(["\n  animation-name: ",";\n  animation-duration: 4s;\n  animation-timing-function: linear;\n  animation-iteration-count: infinite;\n"],["\n  animation-name: ",";\n  animation-duration: 4s;\n  animation-timing-function: linear;\n  animation-iteration-count: infinite;\n"])),ge),Dt(ie)(Xt||(Xt=fe(["\n  width: 130px;\n  height: 30px;\n  background-color: ",";\n  @media (max-width: 768px) {\n    width: 125px;\n    height: 25px;\n  }\n"],["\n  width: 130px;\n  height: 30px;\n  background-color: ",";\n  @media (max-width: 768px) {\n    width: 125px;\n    height: 25px;\n  }\n"])),(function(t){return t.theme.primary})),function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}),be=function(){return be=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},be.apply(this,arguments)},ve=function(t){var e=t.mainState.currentDocument,i=t.children;return e?s.createElement(Ee,be({id:"image-renderer"},t),i||s.createElement(xe,{id:"image-img",src:e.fileData})):null};const ye=ve;ve.fileTypes=[],ve.weight=0;var we,Ae,Ee=Dt.div(we||(we=me(["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n"],["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n"]))),xe=Dt.img(Ae||(Ae=me(["\n  max-width: 95%;\n  max-height: 95%;\n"],["\n  max-width: 95%;\n  max-height: 95%;\n"]))),_e=function(){return _e=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},_e.apply(this,arguments)},Se=function(t){return s.createElement(ye,_e({},t))};Se.fileTypes=["bmp","image/bmp"],Se.weight=0;var Ce=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Te=function(t){var e=t.mainState.currentDocument;return(0,s.useEffect)((function(){var t=null===e||void 0===e?void 0:e.fileData,i=(null===t||void 0===t?void 0:t.replace("data:text/html;base64,",""))||"",n=window.atob(i),s=document.getElementById("html-body"),r=(null===s||void 0===s?void 0:s.contentWindow)&&s.contentWindow;if(r){var a=r.document;a.open(),a.write("".concat(n)),a.close()}}),[]),s.createElement(Re,{id:"html-renderer"},s.createElement(Me,{id:"html-body",sandbox:"allow-same-origin"}))};Te.fileTypes=["htm","html","text/htm","text/html"],Te.weight=0,Te.fileLoader=pe;var ke,Pe,Re=Dt.div(ke||(ke=Ce(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 0 30px;\n"],["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 0 30px;\n"]))),Me=Dt.iframe(Pe||(Pe=Ce(["\n  height: 100%;\n  padding: 15px;\n  margin: 20px 0 20px 0;\n  border: 1px solid ",";\n"],["\n  height: 100%;\n  padding: 15px;\n  margin: 20px 0 20px 0;\n  border: 1px solid ",";\n"])),(function(t){return t.theme.secondary})),Ie=function(){return Ie=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Ie.apply(this,arguments)},Le=function(t){return s.createElement(ye,Ie({},t))};Le.fileTypes=["jpg","jpeg","image/jpg","image/jpeg"],Le.weight=0;var De=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Oe=function(t,e,i){if(i||2===arguments.length)for(var n,s=0,r=e.length;s<r;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))},Fe=function(t){var e=t.mainState.currentDocument;return e?s.createElement($e,{id:"msdoc-renderer"},s.createElement(Ve,{id:"msdoc-iframe",title:"msdoc-iframe",src:"https://view.officeapps.live.com/op/embed.aspx?src=".concat(encodeURIComponent(e.uri)),frameBorder:"0"})):null};var Ne=["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],Be=["xls","application/vnd.ms-excel"],je=["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],Ue=["ppt","application/vnd.ms-powerpoint"],ze=["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"];Fe.fileTypes=Oe(Oe(Oe(Oe(Oe(Oe([],["doc","application/msword"],!0),Ne,!0),Be,!0),je,!0),Ue,!0),ze,!0),Fe.weight=0,Fe.fileLoader=function(t){return(0,t.fileLoaderComplete)()};var He,Ge,$e=Dt.div(He||(He=De(["\n  width: 100%;\n"],["\n  width: 100%;\n"]))),Ve=Dt.iframe(Ge||(Ge=De(["\n  width: 100%;\n  height: 100%;\n  border: 0;\n"],["\n  width: 100%;\n  height: 100%;\n  border: 0;\n"]))),We=i(545),qe=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Ke=function(t){var e=t.mainState.currentDocument,i=(0,s.useState)(),n=i[0],r=i[1];if((0,s.useEffect)((function(){if(e&&e.fileData){var t=new We.MSGReader(e.fileData).getFileData();r(t)}}),[null===e||void 0===e?void 0:e.fileData]),(0,s.useEffect)((function(){if(n&&!n.hasOwnProperty("error")){var t=document.getElementById("msg-body"),e=(null===t||void 0===t?void 0:t.contentWindow)&&t.contentWindow;if(e){var i=e.document,s=n.body.replace(/(\r\n|\n|\r)/gm,"<br />");i.open(),i.write("".concat(s)),i.close()}}}),[n]),!n||n.hasOwnProperty("error"))return s.createElement("span",null,null===n||void 0===n?void 0:n.error);var a=n,o=a.recipients,l=a.subject,h=a.senderEmail,c=a.senderName;return s.createElement(ti,{id:"msg-renderer"},s.createElement("h2",{id:"msg-subject-title",style:{marginBottom:0}},l),s.createElement(Ye,{name:c,email:h}),s.createElement(ii,{id:"msg-recipient"},s.createElement("h3",{id:"msg-recipient-title"},"Recipients"),s.createElement("ul",{id:"msg-recipient-ul"},o.map((function(t,e){return s.createElement("li",{key:e,id:"msg-recipient-li"},s.createElement("span",{id:"msg-recipient-name"},t.name),t.hasOwnProperty("email")&&s.createElement("span",{id:"msg-recipient-email"}," - ",t.email))})))),s.createElement(ni,{id:"msg-body",sandbox:"allow-same-origin"}))},Ye=function(t){var e=t.name,i=t.email;return e||i?s.createElement(ei,{id:"msg-sender"},s.createElement("h3",{id:"msg-sender-title"},"Sender"),void 0!==e&&s.createElement("div",{id:"msg-sender-name"},e),void 0!==i&&s.createElement("div",{id:"msg-sender-email"},i)):null};Ke.fileTypes=["msg","application/vnd.ms-outlook"],Ke.weight=0,Ke.fileLoader=ue;var Xe,Je,Ze,Qe,ti=Dt.div(Xe||(Xe=qe(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 0 30px;\n"],["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 0 30px;\n"]))),ei=Dt.div(Je||(Je=qe(["\n  padding: 0 15px 15px 15px;\n  margin-top: 20px;\n  border: 1px solid ",";\n"],["\n  padding: 0 15px 15px 15px;\n  margin-top: 20px;\n  border: 1px solid ",";\n"])),(function(t){return t.theme.secondary})),ii=Dt.div(Ze||(Ze=qe(["\n  padding: 0 15px;\n  margin-top: 20px;\n  border: 1px solid ",";\n"],["\n  padding: 0 15px;\n  margin-top: 20px;\n  border: 1px solid ",";\n"])),(function(t){return t.theme.secondary})),ni=Dt.iframe(Qe||(Qe=qe(["\n  height: 100%;\n  padding: 15px;\n  margin: 20px 0 20px 0;\n  border: 1px solid ",";\n"],["\n  height: 100%;\n  padding: 15px;\n  margin: 20px 0 20px 0;\n  border: 1px solid ",";\n"])),(function(t){return t.theme.secondary})),si={d:(t,e)=>{for(var i in e)si.o(e,i)&&!si.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},ri=globalThis.pdfjsLib={};si.d(ri,{AbortException:()=>vn,AnnotationEditorLayer:()=>yo,AnnotationEditorParamsType:()=>yi,AnnotationEditorType:()=>vi,AnnotationEditorUIManager:()=>ws,AnnotationLayer:()=>ao,AnnotationMode:()=>bi,CMapCompressionType:()=>Zi,ColorPicker:()=>go,DOMSVGFactory:()=>Kn,DrawLayer:()=>wo,FeatureTest:()=>En,GlobalWorkerOptions:()=>dr,ImageKind:()=>Ti,InvalidPDFException:()=>fn,MissingPDFException:()=>gn,OPS:()=>Qi,Outliner:()=>ho,PDFDataRangeTransport:()=>pa,PDFDateString:()=>as,PDFWorker:()=>va,PasswordResponses:()=>tn,PermissionFlag:()=>wi,PixelsPerInch:()=>$n,RenderingCancelledException:()=>Xn,TextLayer:()=>ea,UnexpectedResponseException:()=>mn,Util:()=>_n,VerbosityLevel:()=>Ji,XfaLayer:()=>Pa,build:()=>Sa,createValidAbsoluteUrl:()=>hn,fetchData:()=>Vn,getDocument:()=>ca,getFilenameFromUrl:()=>Qn,getPdfFilenameFromUrl:()=>ts,getXfaPageViewport:()=>os,isDataScheme:()=>Jn,isPdfFile:()=>Zn,noContextMenu:()=>ns,normalizeUnicode:()=>Tn,renderTextLayer:()=>ia,setLayerDimensions:()=>ds,shadow:()=>cn,updateTextLayer:()=>na,version:()=>_a});const ai="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),oi=[1,0,0,1,0,0],li=[.001,0,0,.001,0,0],hi=1.35,ci=1,di=2,ui=4,pi=16,fi=32,gi=64,mi=256,bi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},vi={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},yi={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},wi={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ai=0,Ei=1,xi=2,_i=3,Si=3,Ci=4,Ti={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ki=1,Pi=2,Ri=3,Mi=4,Ii=5,Li=6,Di=7,Oi=8,Fi=9,Ni=10,Bi=11,ji=12,Ui=13,zi=14,Hi=15,Gi=16,$i=17,Vi=20,Wi=1,qi=2,Ki=3,Yi=4,Xi=5,Ji={ERRORS:0,WARNINGS:1,INFOS:5},Zi={NONE:0,BINARY:1},Qi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},tn={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let en=Ji.WARNINGS;function nn(t){Number.isInteger(t)&&(en=t)}function sn(){return en}function rn(t){en>=Ji.INFOS&&console.log(`Info: ${t}`)}function an(t){en>=Ji.WARNINGS&&console.log(`Warning: ${t}`)}function on(t){throw new Error(t)}function ln(t,e){t||on(e)}function hn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;try{if(i&&"string"===typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);e?.length>=2&&(t=`http://${t}`)}if(i.tryConvertEncoding)try{t=decodeURIComponent(escape(t))}catch{}}const n=e?new URL(t,e):new URL(t);if(function(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch{}return null}function cn(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(t,e,{value:i,enumerable:!n,configurable:!0,writable:!1}),i}const dn=function(){function t(e,i){this.constructor===t&&on("Cannot initialize BaseException."),this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class un extends dn{constructor(t,e){super(t,"PasswordException"),this.code=e}}class pn extends dn{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class fn extends dn{constructor(t){super(t,"InvalidPDFException")}}class gn extends dn{constructor(t){super(t,"MissingPDFException")}}class mn extends dn{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class bn extends dn{constructor(t){super(t,"FormatError")}}class vn extends dn{constructor(t){super(t,"AbortException")}}function yn(t){"object"===typeof t&&void 0!==t?.length||on("Invalid argument for bytesToString");const e=t.length,i=8192;if(e<i)return String.fromCharCode.apply(null,t);const n=[];for(let s=0;s<e;s+=i){const r=Math.min(s+i,e),a=t.subarray(s,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function wn(t){"string"!==typeof t&&on("Invalid argument for stringToBytes");const e=t.length,i=new Uint8Array(e);for(let n=0;n<e;++n)i[n]=255&t.charCodeAt(n);return i}function An(t){const e=Object.create(null);for(const[i,n]of t)e[i]=n;return e}class En{static get isLittleEndian(){return cn(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return cn(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return cn(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get platform(){return"undefined"!==typeof navigator&&"string"===typeof navigator?.platform?cn(this,"platform",{isMac:navigator.platform.includes("Mac")}):cn(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){return cn(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const xn=Array.from(Array(256).keys(),(t=>t.toString(16).padStart(2,"0")));class _n{static makeHexColor(t,e,i){return`#${xn[t]}${xn[e]}${xn[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),n=this.applyTransform(t.slice(2,4),e),s=this.applyTransform([t[0],t[3]],e),r=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],n[0],s[0],r[0]),Math.min(i[1],n[1],s[1],r[1]),Math.max(i[0],n[0],s[0],r[0]),Math.max(i[1],n[1],s[1],r[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],s=t[2]*e[0]+t[3]*e[2],r=t[2]*e[1]+t[3]*e[3],a=(i+r)/2,o=Math.sqrt((i+r)**2-4*(i*r-s*n))/2,l=a+o||1,h=a-o||1;return[Math.sqrt(l),Math.sqrt(h)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>n)return null;const s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>r?null:[i,s,n,r]}static#t(t,e,i,n,s,r,a,o,l,h){if(l<=0||l>=1)return;const c=1-l,d=l*l,u=d*l,p=c*(c*(c*t+3*l*e)+3*d*i)+u*n,f=c*(c*(c*s+3*l*r)+3*d*a)+u*o;h[0]=Math.min(h[0],p),h[1]=Math.min(h[1],f),h[2]=Math.max(h[2],p),h[3]=Math.max(h[3],f)}static#e(t,e,i,n,s,r,a,o,l,h,c,d){if(Math.abs(l)<1e-12)return void(Math.abs(h)>=1e-12&&this.#t(t,e,i,n,s,r,a,o,-c/h,d));const u=h**2-4*c*l;if(u<0)return;const p=Math.sqrt(u),f=2*l;this.#t(t,e,i,n,s,r,a,o,(-h+p)/f,d),this.#t(t,e,i,n,s,r,a,o,(-h-p)/f,d)}static bezierBoundingBox(t,e,i,n,s,r,a,o,l){return l?(l[0]=Math.min(l[0],t,a),l[1]=Math.min(l[1],e,o),l[2]=Math.max(l[2],t,a),l[3]=Math.max(l[3],e,o)):l=[Math.min(t,a),Math.min(e,o),Math.max(t,a),Math.max(e,o)],this.#e(t,i,s,a,e,n,r,o,3*(3*(i-s)-t+a),6*(t-2*i+s),3*(i-t),l),this.#e(t,i,s,a,e,n,r,o,3*(3*(n-r)-e+o),6*(e-2*n+r),3*(n-e),l),l}}let Sn=null,Cn=null;function Tn(t){return Sn||(Sn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Cn=new Map([["\ufb05","\u017ft"]])),t.replaceAll(Sn,((t,e,i)=>e?e.normalize("NFKC"):Cn.get(i)))}const kn="pdfjs_internal_id_",Pn=0,Rn=1,Mn=2,In=3,Ln=4,Dn=5,On=6,Fn=7,Nn=8;class Bn{constructor(){this.constructor===Bn&&on("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,n,s){return"none"}destroy(){}}class jn{constructor(){this.constructor===jn&&on("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d")}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){on("Abstract method `_createCanvas` called.")}}class Un{constructor(t){let{baseUrl:e=null,isCompressed:i=!0}=t;this.constructor===Un&&on("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=i}async fetch(t){let{name:e}=t;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const i=this.baseUrl+e+(this.isCompressed?".bcmap":""),n=this.isCompressed?Zi.BINARY:Zi.NONE;return this._fetchData(i,n).catch((t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)}))}_fetchData(t,e){on("Abstract method `_fetchData` called.")}}class zn{constructor(t){let{baseUrl:e=null}=t;this.constructor===zn&&on("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch(t){let{filename:e}=t;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${e}`;return this._fetchData(i).catch((t=>{throw new Error(`Unable to load font data at: ${i}`)}))}_fetchData(t){on("Abstract method `_fetchData` called.")}}class Hn{constructor(){this.constructor===Hn&&on("Cannot initialize BaseSVGFactory.")}create(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if("string"!==typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){on("Abstract method `_createSVG` called.")}}const Gn="http://www.w3.org/2000/svg";class $n{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=(()=>this.CSS/this.PDF)()}async function Vn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(is(t,document.baseURI)){const i=await fetch(t);if(!i.ok)throw new Error(i.statusText);switch(e){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise(((i,n)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE)if(200!==s.status&&0!==s.status)n(new Error(s.statusText));else{switch(e){case"arraybuffer":case"blob":case"json":return void i(s.response)}i(s.responseText)}},s.send(null)}))}class Wn extends Un{_fetchData(t,e){return Vn(t,this.isCompressed?"arraybuffer":"text").then((t=>({cMapData:t instanceof ArrayBuffer?new Uint8Array(t):wn(t),compressionType:e})))}}class qn extends zn{_fetchData(t){return Vn(t,"arraybuffer").then((t=>new Uint8Array(t)))}}class Kn extends Hn{_createSVG(t){return document.createElementNS(Gn,t)}}class Yn{constructor(t){let{viewBox:e,scale:i,rotation:n,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}=t;this.viewBox=e,this.scale=i,this.rotation=n,this.offsetX=s,this.offsetY=r;const o=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let h,c,d,u,p,f,g,m;switch(n%=360,n<0&&(n+=360),n){case 180:h=-1,c=0,d=0,u=1;break;case 90:h=0,c=1,d=1,u=0;break;case 270:h=0,c=-1,d=-1,u=0;break;case 0:h=1,c=0,d=0,u=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,u=-u),0===h?(p=Math.abs(l-e[1])*i+s,f=Math.abs(o-e[0])*i+r,g=(e[3]-e[1])*i,m=(e[2]-e[0])*i):(p=Math.abs(o-e[0])*i+s,f=Math.abs(l-e[1])*i+r,g=(e[2]-e[0])*i,m=(e[3]-e[1])*i),this.transform=[h*i,c*i,d*i,u*i,p-h*i*o-d*i*l,f-c*i*o-u*i*l],this.width=g,this.height=m}get rawDims(){const{viewBox:t}=this;return cn(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone(){let{scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Yn({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:s})}convertToViewportPoint(t,e){return _n.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=_n.applyTransform([t[0],t[1]],this.transform),i=_n.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return _n.applyInverseTransform([t,e],this.transform)}}class Xn extends dn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(t,"RenderingCancelledException"),this.extraDelay=e}}function Jn(t){const e=t.length;let i=0;for(;i<e&&""===t[i].trim();)i++;return"data:"===t.substring(i,i+5).toLowerCase()}function Zn(t){return"string"===typeof t&&/\.pdf$/i.test(t)}function Qn(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function ts(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof t)return e;if(Jn(t))return an('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let s=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||e}class es{started=(()=>Object.create(null))();times=[];time(t){t in this.started&&an(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||an(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:n,end:s}of this.times)t.push(`${i.padEnd(e)} ${s-n}ms\n`);return t.join("")}}function is(t,e){try{const{protocol:i}=e?new URL(t,e):new URL(t);return"http:"===i||"https:"===i}catch{return!1}}function ns(t){t.preventDefault()}function ss(t){console.log("Deprecated API usage: "+t)}let rs;class as{static toDateObject(t){if(!t||"string"!==typeof t)return null;rs||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=rs.exec(t);if(!e)return null;const i=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let r=parseInt(e[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(e[6],10);o=o>=0&&o<=59?o:0;const l=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let c=parseInt(e[9],10)||0;return c=c>=0&&c<=59?c:0,"-"===l?(r+=h,a+=c):"+"===l&&(r-=h,a-=c),new Date(Date.UTC(i,n,s,r,a,o))}}function os(t,e){let{scale:i=1,rotation:n=0}=e;const{width:s,height:r}=t.attributes.style,a=[0,0,parseInt(s),parseInt(r)];return new Yn({viewBox:a,scale:i,rotation:n})}function ls(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map((t=>parseInt(t))):t.startsWith("rgba(")?t.slice(5,-1).split(",").map((t=>parseInt(t))).slice(0,3):(an(`Not a valid color format: "${t}"`),[0,0,0])}function hs(t){const{a:e,b:i,c:n,d:s,e:r,f:a}=t.getTransform();return[e,i,n,s,r,a]}function cs(t){const{a:e,b:i,c:n,d:s,e:r,f:a}=t.getTransform().invertSelf();return[e,i,n,s,r,a]}function ds(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e instanceof Yn){const{pageWidth:n,pageHeight:s}=e.rawDims,{style:r}=t,a=En.isCSSRoundSupported,o=`var(--scale-factor) * ${n}px`,l=`var(--scale-factor) * ${s}px`,h=a?`round(${o}, 1px)`:`calc(${o})`,c=a?`round(${l}, 1px)`:`calc(${l})`;i&&e.rotation%180!==0?(r.width=c,r.height=h):(r.width=h,r.height=c)}n&&t.setAttribute("data-main-rotation",e.rotation)}class us{#i=null;#n=null;#s;#r=null;constructor(t){this.#s=t}render(){const t=this.#i=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",ns),t.addEventListener("pointerdown",us.#a);const e=this.#r=document.createElement("div");e.className="buttons",t.append(e);const i=this.#s.toolbarPosition;if(i){const{style:e}=t,n="ltr"===this.#s._uiManager.direction?1-i[0]:i[0];e.insetInlineEnd=100*n+"%",e.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return this.#o(),t}static#a(t){t.stopPropagation()}#l(t){this.#s._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}#h(t){this.#s._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}#c(t){t.addEventListener("focusin",this.#l.bind(this),{capture:!0}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0}),t.addEventListener("contextmenu",ns)}hide(){this.#i.classList.add("hidden"),this.#n?.hideDropdown()}show(){this.#i.classList.remove("hidden")}#o(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${this.#s.editorType}-button`),this.#c(t),t.addEventListener("click",(t=>{this.#s._uiManager.delete()})),this.#r.append(t)}get#d(){const t=document.createElement("div");return t.className="divider",t}addAltTextButton(t){this.#c(t),this.#r.prepend(t,this.#d)}addColorPicker(t){this.#n=t;const e=t.renderButton();this.#c(e),this.#r.prepend(e,this.#d)}remove(){this.#i.remove(),this.#n?.destroy(),this.#n=null}}class ps{#r=null;#i=null;#u;constructor(t){this.#u=t}#p(){const t=this.#i=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",ns);const e=this.#r=document.createElement("div");return e.className="buttons",t.append(e),this.#f(),t}#g(t,e){let i=0,n=0;for(const s of t){const t=s.y+s.height;if(t<i)continue;const r=s.x+(e?s.width:0);t>i?(n=r,i=t):e?r>n&&(n=r):r<n&&(n=r)}return[e?1-n:n,i]}show(t,e,i){const[n,s]=this.#g(e,i),{style:r}=this.#i||=this.#p();t.append(this.#i),r.insetInlineEnd=100*n+"%",r.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#i.remove()}#f(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),t.addEventListener("contextmenu",ns),t.addEventListener("click",(()=>{this.#u.highlightSelection("floating_button")})),this.#r.append(t)}}function fs(t,e,i){for(const n of i)e.addEventListener(n,t[n].bind(t))}class gs{#m=0;get id(){return"pdfjs_internal_editor_"+this.#m++}}class ms{#b=(()=>function(){if("undefined"!==typeof crypto&&"function"===typeof crypto?.randomUUID)return crypto.randomUUID();const t=new Uint8Array(32);if("undefined"!==typeof crypto&&"function"===typeof crypto?.getRandomValues)crypto.getRandomValues(t);else for(let e=0;e<32;e++)t[e]=Math.floor(255*Math.random());return yn(t)}())();#m=0;#v=null;static get _isSVGFittingCanvas(){const t=new OffscreenCanvas(1,3).getContext("2d"),e=new Image;e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return cn(this,"_isSVGFittingCanvas",e.decode().then((()=>(t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0]))))}async#y(t,e){this.#v||=new Map;let i=this.#v.get(t);if(null===i)return null;if(i?.bitmap)return i.refCounter+=1,i;try{let t;if(i||={bitmap:null,id:`image_${this.#b}_${this.#m++}`,refCounter:0,isSvg:!1},"string"===typeof e?(i.url=e,t=await Vn(e,"blob")):t=i.file=e,"image/svg+xml"===t.type){const e=ms._isSVGFittingCanvas,n=new FileReader,s=new Image,r=new Promise(((t,r)=>{s.onload=()=>{i.bitmap=s,i.isSvg=!0,t()},n.onload=async()=>{const t=i.svgUrl=n.result;s.src=await e?`${t}#svgView(preserveAspectRatio(none))`:t},s.onerror=n.onerror=r}));n.readAsDataURL(t),await r}else i.bitmap=await createImageBitmap(t);i.refCounter=1}catch(n){console.error(n),i=null}return this.#v.set(t,i),i&&this.#v.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:n,type:s}=t;return this.#y(`${e}_${i}_${n}_${s}`,t)}async getFromUrl(t){return this.#y(t,t)}async getFromId(t){this.#v||=new Map;const e=this.#v.get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=this.#v.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#v||=new Map;const e=this.#v.get(t);e&&(e.refCounter-=1,0===e.refCounter&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${this.#b}_`)}}class bs{#w=[];#A=!1;#E;#x=-1;constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;this.#E=t}add(t){let{cmd:e,undo:i,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=t;if(s&&e(),this.#A)return;const l={cmd:e,undo:i,post:n,type:r};if(-1===this.#x)return this.#w.length>0&&(this.#w.length=0),this.#x=0,void this.#w.push(l);if(a&&this.#w[this.#x].type===r)return o&&(l.undo=this.#w[this.#x].undo),void(this.#w[this.#x]=l);const h=this.#x+1;h===this.#E?this.#w.splice(0,1):(this.#x=h,h<this.#w.length&&this.#w.splice(h)),this.#w.push(l)}undo(){if(-1===this.#x)return;this.#A=!0;const{undo:t,post:e}=this.#w[this.#x];t(),e?.(),this.#A=!1,this.#x-=1}redo(){if(this.#x<this.#w.length-1){this.#x+=1,this.#A=!0;const{cmd:t,post:e}=this.#w[this.#x];t(),e?.(),this.#A=!1}}hasSomethingToUndo(){return-1!==this.#x}hasSomethingToRedo(){return this.#x<this.#w.length-1}destroy(){this.#w=null}}class vs{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=En.platform;for(const[i,n,s={}]of t)for(const t of i){const i=t.startsWith("mac+");e&&i?(this.callbacks.set(t.slice(4),{callback:n,options:s}),this.allKeys.add(t.split("+").at(-1))):e||i||(this.callbacks.set(t,{callback:n,options:s}),this.allKeys.add(t.split("+").at(-1)))}}#_(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#_(e));if(!i)return;const{callback:n,options:{bubbles:s=!1,args:r=[],checker:a=null}}=i;a&&!a(t,e)||(n.bind(t,...r,e)(),s||(e.stopPropagation(),e.preventDefault()))}}class ys{static _colorsMapping=(()=>new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]))();get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return function(t){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const i of t.keys()){e.style.color=i;const n=window.getComputedStyle(e).color;t.set(i,ls(n))}e.remove()}(t),cn(this,"_colors",t)}convert(t){const e=ls(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,n]of this._colors)if(n.every(((t,i)=>t===e[i])))return ys._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?_n.makeHexColor(...e):t}}class ws{#S=null;#C=(()=>new Map)();#T=(()=>new Map)();#k=null;#P=null;#R=null;#M=(()=>new bs)();#I=0;#L=(()=>new Set)();#D=null;#O=null;#F=(()=>new Set)();#N=!1;#B=null;#j=null;#U=null;#z=!1;#H=null;#G=(()=>new gs)();#$=!1;#V=!1;#W=null;#q=null;#K=null;#Y=(()=>vi.NONE)();#X=(()=>new Set)();#J=null;#Z=null;#Q=null;#tt=this.blur.bind(this);#et=this.focus.bind(this);#it=this.copy.bind(this);#nt=this.cut.bind(this);#st=this.paste.bind(this);#rt=this.keydown.bind(this);#at=this.keyup.bind(this);#ot=this.onEditingAction.bind(this);#lt=this.onPageChanging.bind(this);#ht=this.onScaleChanging.bind(this);#ct=this.#dt.bind(this);#ut=this.onRotationChanging.bind(this);#pt={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#ft=[0,0];#gt=null;#mt=null;#bt=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=ws.prototype,e=t=>t.#mt.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl(),i=(t,e)=>{let{target:i}=e;if(i instanceof HTMLInputElement){const{type:t}=i;return"text"!==t&&"number"!==t}return!0},n=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return cn(this,"_keyboardManager",new vs([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(t,e)=>{let{target:i}=e;return!(i instanceof HTMLButtonElement)&&t.#mt.contains(i)&&!t.isEnterHandled}}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(t,e)=>{let{target:i}=e;return!(i instanceof HTMLButtonElement)&&t.#mt.contains(document.activeElement)}}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}]]))}constructor(t,e,i,n,s,r,a,o,l){this.#mt=t,this.#bt=e,this.#k=i,this._eventBus=n,this._eventBus._on("editingaction",this.#ot),this._eventBus._on("pagechanging",this.#lt),this._eventBus._on("scalechanging",this.#ht),this._eventBus._on("rotationchanging",this.#ut),this.#vt(),this.#yt(),this.#P=s.annotationStorage,this.#B=s.filterFactory,this.#Z=r,this.#U=a||null,this.#N=o,this.#K=l||null,this.viewParameters={realScale:$n.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#wt(),this.#At(),this._eventBus._off("editingaction",this.#ot),this._eventBus._off("pagechanging",this.#lt),this._eventBus._off("scalechanging",this.#ht),this._eventBus._off("rotationchanging",this.#ut);for(const t of this.#T.values())t.destroy();this.#T.clear(),this.#C.clear(),this.#F.clear(),this.#S=null,this.#X.clear(),this.#M.destroy(),this.#k?.destroy(),this.#H?.hide(),this.#H=null,this.#j&&(clearTimeout(this.#j),this.#j=null),this.#gt&&(clearTimeout(this.#gt),this.#gt=null),this.#Et()}async mlGuess(t){return this.#K?.guess(t)||null}get hasMLManager(){return!!this.#K}get hcmFilter(){return cn(this,"hcmFilter",this.#Z?this.#B.addHCMFilter(this.#Z.foreground,this.#Z.background):"none")}get direction(){return cn(this,"direction",getComputedStyle(this.#mt).direction)}get highlightColors(){return cn(this,"highlightColors",this.#U?new Map(this.#U.split(",").map((t=>t.split("=").map((t=>t.trim()))))):null)}get highlightColorNames(){return cn(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,(t=>t.reverse()))):null)}setMainHighlightColorPicker(t){this.#q=t}editAltText(t){this.#k?.editAltText(this,t)}onPageChanging(t){let{pageNumber:e}=t;this.#I=e-1}focusMainContainer(){this.#mt.focus()}findParent(t,e){for(const i of this.#T.values()){const{x:n,y:s,width:r,height:a}=i.div.getBoundingClientRect();if(t>=n&&t<=n+r&&e>=s&&e<=s+a)return i}return null}disableUserSelect(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.#bt.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#F.add(t)}removeShouldRescale(t){this.#F.delete(t)}onScaleChanging(t){let{scale:e}=t;this.commitOrRemove(),this.viewParameters.realScale=e*$n.PDF_TO_CSS_UNITS;for(const i of this.#F)i.onScaleChanging()}onRotationChanging(t){let{pagesRotation:e}=t;this.commitOrRemove(),this.viewParameters.rotation=e}#xt(t){let{anchorNode:e}=t;return e.nodeType===Node.TEXT_NODE?e.parentElement:e}highlightSelection(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:r}=e,a=e.toString(),o=this.#xt(e).closest(".textLayer"),l=this.getSelectionBoxes(o);if(l){e.empty(),this.#Y===vi.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:vi.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const e of this.#T.values())if(e.hasTextLayer(o)){e.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:l,anchorNode:i,anchorOffset:n,focusNode:s,focusOffset:r,text:a});break}}}#_t(){const t=document.getSelection();if(!t||t.isCollapsed)return;const e=this.#xt(t).closest(".textLayer"),i=this.getSelectionBoxes(e);i&&(this.#H||=new ps(this),this.#H.show(e,i,"ltr"===this.direction))}addToAnnotationStorage(t){t.isEmpty()||!this.#P||this.#P.has(t.id)||this.#P.setValue(t.id,t)}#dt(){const t=document.getSelection();if(!t||t.isCollapsed)return void(this.#J&&(this.#H?.hide(),this.#J=null,this.#St({hasSelectedText:!1})));const{anchorNode:e}=t;if(e===this.#J)return;if(this.#xt(t).closest(".textLayer")){if(this.#H?.hide(),this.#J=e,this.#St({hasSelectedText:!0}),(this.#Y===vi.HIGHLIGHT||this.#Y===vi.NONE)&&(this.#Y===vi.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#z=this.isShiftKeyDown,!this.isShiftKeyDown)){const t=e=>{"pointerup"===e.type&&0!==e.button||(window.removeEventListener("pointerup",t),window.removeEventListener("blur",t),"pointerup"===e.type&&this.#Ct("main_toolbar"))};window.addEventListener("pointerup",t),window.addEventListener("blur",t)}}else this.#J&&(this.#H?.hide(),this.#J=null,this.#St({hasSelectedText:!1}))}#Ct(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.#Y===vi.HIGHLIGHT?this.highlightSelection(t):this.#N&&this.#_t()}#vt(){document.addEventListener("selectionchange",this.#ct)}#Et(){document.removeEventListener("selectionchange",this.#ct)}#Tt(){window.addEventListener("focus",this.#et),window.addEventListener("blur",this.#tt)}#At(){window.removeEventListener("focus",this.#et),window.removeEventListener("blur",this.#tt)}blur(){if(this.isShiftKeyDown=!1,this.#z&&(this.#z=!1,this.#Ct("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#X)if(e.div.contains(t)){this.#W=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#W)return;const[t,e]=this.#W;this.#W=null,e.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0}),e.focus()}#yt(){window.addEventListener("keydown",this.#rt),window.addEventListener("keyup",this.#at)}#wt(){window.removeEventListener("keydown",this.#rt),window.removeEventListener("keyup",this.#at)}#kt(){document.addEventListener("copy",this.#it),document.addEventListener("cut",this.#nt),document.addEventListener("paste",this.#st)}#Pt(){document.removeEventListener("copy",this.#it),document.removeEventListener("cut",this.#nt),document.removeEventListener("paste",this.#st)}addEditListeners(){this.#yt(),this.#kt()}removeEditListeners(){this.#wt(),this.#Pt()}copy(t){if(t.preventDefault(),this.#S?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#X){const t=i.serialize(!0);t&&e.push(t)}0!==e.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const t of this.#O)if(t.isHandlingMimeForPasting(r.type))return void t.paste(r,this.currentLayer);let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){return void an(`paste: "${s.message}".`)}if(!Array.isArray(i))return;this.unselectAll();const n=this.currentLayer;try{const t=[];for(const r of i){const e=n.deserialize(r);if(!e)return;t.push(e)}const e=()=>{for(const e of t)this.#Rt(e);this.#Mt(t)},s=()=>{for(const e of t)e.remove()};this.addCommands({cmd:e,undo:s,mustExec:!0})}catch(s){an(`paste: "${s.message}".`)}}keydown(t){this.isShiftKeyDown||"Shift"!==t.key||(this.isShiftKeyDown=!0),this.#Y===vi.NONE||this.isEditorHandlingKeyboard||ws._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,this.#z&&(this.#z=!1,this.#Ct("main_toolbar")))}onEditingAction(t){let{name:e}=t;switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu")}}#St(t){Object.entries(t).some((t=>{let[e,i]=t;return this.#pt[e]!==i}))&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#pt,t)}),this.#Y===vi.HIGHLIGHT&&!1===t.hasSelectedEditor&&this.#It([[yi.HIGHLIGHT_FREE,!0]]))}#It(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#Tt(),this.#kt(),this.#St({isEditing:this.#Y!==vi.NONE,isEmpty:this.#Lt(),hasSomethingToUndo:this.#M.hasSomethingToUndo(),hasSomethingToRedo:this.#M.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#At(),this.#Pt(),this.#St({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#O){this.#O=t;for(const t of this.#O)this.#It(t.defaultPropertiesToUpdate)}}getId(){return this.#G.id}get currentLayer(){return this.#T.get(this.#I)}getLayer(t){return this.#T.get(t)}get currentPageIndex(){return this.#I}addLayer(t){this.#T.set(t.pageIndex,t),this.#$?t.enable():t.disable()}removeLayer(t){this.#T.delete(t.pageIndex)}updateMode(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.#Y!==t){if(this.#Y=t,t===vi.NONE)return this.setEditingState(!1),void this.#Dt();this.setEditingState(!0),this.#Ot(),this.unselectAll();for(const e of this.#T.values())e.updateMode(t);if(e||!i){if(e)for(const t of this.#C.values())if(t.annotationElementId===e){this.setSelected(t),t.enterInEditMode();break}}else this.addNewEditorFromKeyboard()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#Y&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){if(this.#O){switch(t){case yi.CREATE:return void this.currentLayer.addNewEditor();case yi.HIGHLIGHT_DEFAULT_COLOR:this.#q?.updateColor(e);break;case yi.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Q||=new Map).set(t,e),this.showAllEditors("highlight",e)}for(const i of this.#X)i.updateParams(t,e);for(const i of this.#O)i.updateDefaultParams(t,e)}}showAllEditors(t,e){for(const i of this.#C.values())i.editorType===t&&i.show(e);(this.#Q?.get(yi.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#It([[yi.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.#V!==t){this.#V=t;for(const e of this.#T.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}#Ot(){if(!this.#$){this.#$=!0;for(const t of this.#T.values())t.enable();for(const t of this.#C.values())t.enable()}}#Dt(){if(this.unselectAll(),this.#$){this.#$=!1;for(const t of this.#T.values())t.disable();for(const t of this.#C.values())t.disable()}}getEditors(t){const e=[];for(const i of this.#C.values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return this.#C.get(t)}addEditor(t){this.#C.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#j&&clearTimeout(this.#j),this.#j=setTimeout((()=>{this.focusMainContainer(),this.#j=null}),0)),this.#C.delete(t.id),this.unselect(t),t.annotationElementId&&this.#L.has(t.annotationElementId)||this.#P?.remove(t.id)}addDeletedAnnotationElement(t){this.#L.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#L.has(t)}removeDeletedAnnotationElement(t){this.#L.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#Rt(t){const e=this.#T.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#S!==t&&(this.#S=t,t&&this.#It(t.propertiesToUpdate))}get#Ft(){let t=null;for(t of this.#X);return t}updateUI(t){this.#Ft===t&&this.#It(t.propertiesToUpdate)}toggleSelected(t){if(this.#X.has(t))return this.#X.delete(t),t.unselect(),void this.#St({hasSelectedEditor:this.hasSelection});this.#X.add(t),t.select(),this.#It(t.propertiesToUpdate),this.#St({hasSelectedEditor:!0})}setSelected(t){for(const e of this.#X)e!==t&&e.unselect();this.#X.clear(),this.#X.add(t),t.select(),this.#It(t.propertiesToUpdate),this.#St({hasSelectedEditor:!0})}isSelected(t){return this.#X.has(t)}get firstSelectedEditor(){return this.#X.values().next().value}unselect(t){t.unselect(),this.#X.delete(t),this.#St({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#X.size}get isEnterHandled(){return 1===this.#X.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#M.undo(),this.#St({hasSomethingToUndo:this.#M.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Lt()})}redo(){this.#M.redo(),this.#St({hasSomethingToUndo:!0,hasSomethingToRedo:this.#M.hasSomethingToRedo(),isEmpty:this.#Lt()})}addCommands(t){this.#M.add(t),this.#St({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Lt()})}#Lt(){if(0===this.#C.size)return!0;if(1===this.#C.size)for(const t of this.#C.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...this.#X];this.addCommands({cmd:()=>{for(const e of t)e.remove()},undo:()=>{for(const e of t)this.#Rt(e)},mustExec:!0})}commitOrRemove(){this.#S?.commitOrRemove()}hasSomethingToControl(){return this.#S||this.hasSelection}#Mt(t){for(const e of this.#X)e.unselect();this.#X.clear();for(const e of t)e.isEmpty()||(this.#X.add(e),e.select());this.#St({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#X)t.commit();this.#Mt(this.#C.values())}unselectAll(){if((!this.#S||(this.#S.commitOrRemove(),this.#Y===vi.NONE))&&this.hasSelection){for(const t of this.#X)t.unselect();this.#X.clear(),this.#St({hasSelectedEditor:!1})}}translateSelectedEditors(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;this.#ft[0]+=t,this.#ft[1]+=e;const[i,n]=this.#ft,s=[...this.#X];this.#gt&&clearTimeout(this.#gt),this.#gt=setTimeout((()=>{this.#gt=null,this.#ft[0]=this.#ft[1]=0,this.addCommands({cmd:()=>{for(const t of s)this.#C.has(t.id)&&t.translateInPage(i,n)},undo:()=>{for(const t of s)this.#C.has(t.id)&&t.translateInPage(-i,-n)},mustExec:!1})}),1e3);for(const r of s)r.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#D=new Map;for(const t of this.#X)this.#D.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#D)return!1;this.disableUserSelect(!1);const t=this.#D;this.#D=null;let e=!1;for(const[{x:n,y:s,pageIndex:r},a]of t)a.newX=n,a.newY=s,a.newPageIndex=r,e||=n!==a.savedX||s!==a.savedY||r!==a.savedPageIndex;if(!e)return!1;const i=(t,e,i,n)=>{if(this.#C.has(t.id)){const s=this.#T.get(n);s?t._setParentAndPosition(s,e,i):(t.pageIndex=n,t.x=e,t.y=i)}};return this.addCommands({cmd:()=>{for(const[e,{newX:n,newY:s,newPageIndex:r}]of t)i(e,n,s,r)},undo:()=>{for(const[e,{savedX:n,savedY:s,savedPageIndex:r}]of t)i(e,n,s,r)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#D)for(const i of this.#D.keys())i.drag(t,e)}rebuild(t){if(null===t.parent){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#X.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#S===t}getActive(){return this.#S}getMode(){return this.#Y}get imageManager(){return cn(this,"imageManager",new ms)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let l=0,h=e.rangeCount;l<h;l++)if(!t.contains(e.getRangeAt(l).commonAncestorContainer))return null;const{x:i,y:n,width:s,height:r}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(t,e,a,o)=>({x:(e-n)/r,y:1-(t+a-i)/s,width:o/r,height:a/s});break;case"180":a=(t,e,a,o)=>({x:1-(t+a-i)/s,y:1-(e+o-n)/r,width:a/s,height:o/r});break;case"270":a=(t,e,a,o)=>({x:1-(e+o-n)/r,y:(t-i)/s,width:o/r,height:a/s});break;default:a=(t,e,a,o)=>({x:(t-i)/s,y:(e-n)/r,width:a/s,height:o/r})}const o=[];for(let l=0,h=e.rangeCount;l<h;l++){const t=e.getRangeAt(l);if(!t.collapsed)for(const{x:e,y:i,width:n,height:s}of t.getClientRects())0!==n&&0!==s&&o.push(a(e,i,n,s))}return 0===o.length?null:o}addChangedExistingAnnotation(t){let{annotationElementId:e,id:i}=t;(this.#R||=new Map).set(e,i)}removeChangedExistingAnnotation(t){let{annotationElementId:e}=t;this.#R?.delete(e)}renderAnnotationElement(t){const e=this.#R?.get(t.data.id);if(!e)return;const i=this.#P.getRawValue(e);i&&(this.#Y!==vi.NONE||i.hasBeenModified)&&i.renderAnnotationElement(t)}}class As{#Nt="";#Bt=!1;#jt=null;#Ut=null;#zt=null;#Ht=!1;#s=null;static _l10nPromise=null;constructor(t){this.#s=t}static initialize(t){As._l10nPromise||=t}async render(){const t=this.#jt=document.createElement("button");t.className="altText";const e=await As._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0",t.addEventListener("contextmenu",ns),t.addEventListener("pointerdown",(t=>t.stopPropagation()));const i=t=>{t.preventDefault(),this.#s._uiManager.editAltText(this.#s)};return t.addEventListener("click",i,{capture:!0}),t.addEventListener("keydown",(e=>{e.target===t&&"Enter"===e.key&&(this.#Ht=!0,i(e))})),await this.#Gt(),t}finish(){this.#jt&&(this.#jt.focus({focusVisible:this.#Ht}),this.#Ht=!1)}isEmpty(){return!this.#Nt&&!this.#Bt}get data(){return{altText:this.#Nt,decorative:this.#Bt}}set data(t){let{altText:e,decorative:i}=t;this.#Nt===e&&this.#Bt===i||(this.#Nt=e,this.#Bt=i,this.#Gt())}toggle(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.#jt&&(!t&&this.#zt&&(clearTimeout(this.#zt),this.#zt=null),this.#jt.disabled=!t)}destroy(){this.#jt?.remove(),this.#jt=null,this.#Ut=null}async#Gt(){const t=this.#jt;if(!t)return;if(!this.#Nt&&!this.#Bt)return t.classList.remove("done"),void this.#Ut?.remove();t.classList.add("done"),As._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then((e=>{t.setAttribute("aria-label",e)}));let e=this.#Ut;if(!e){this.#Ut=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip");const i=e.id=`alt-text-tooltip-${this.#s.id}`;t.setAttribute("aria-describedby",i);const n=100;t.addEventListener("mouseenter",(()=>{this.#zt=setTimeout((()=>{this.#zt=null,this.#Ut.classList.add("show"),this.#s._reportTelemetry({action:"alt_text_tooltip"})}),n)})),t.addEventListener("mouseleave",(()=>{this.#zt&&(clearTimeout(this.#zt),this.#zt=null),this.#Ut?.classList.remove("show")}))}e.innerText=this.#Bt?await As._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):this.#Nt,e.parentNode||t.append(e);const i=this.#s.getImageForAltText();i?.setAttribute("aria-describedby",e.id)}}class Es{#$t=null;#Nt=null;#Vt=!1;#Wt=!1;#qt=null;#Kt=null;#Yt=this.focusin.bind(this);#Xt=this.focusout.bind(this);#Jt=null;#Zt="";#Qt=!1;#te=null;#ee=!1;#ie=!1;#ne=!1;#se=null;#re=0;#ae=0;#oe=null;_initialOptions=(()=>Object.create(null))();_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#le=!1;#he=(()=>Es._zIndex++)();static _borderLineWidth=-1;static _colorManager=(()=>new ys)();static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=Es.prototype._resizeWithKeyboard,e=ws.TRANSLATE_SMALL,i=ws.TRANSLATE_BIG;return cn(this,"_resizerKeyboardManager",new vs([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Es.prototype._stopResizingWithKeyboard]]))}constructor(t){this.constructor===Es&&on("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:n,pageX:s,pageY:r}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[s,r];const[a,o]=this.parentDimensions;this.x=t.x/a,this.y=t.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return cn(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new xs({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,i){if(Es._l10nPromise||=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map((e=>[e,t.get(e.replaceAll(/([A-Z])/g,(t=>`-${t.toLowerCase()}`)))]))),i?.strings)for(const s of i.strings)Es._l10nPromise.set(s,t.get(s));if(-1!==Es._borderLineWidth)return;const n=getComputedStyle(document.documentElement);Es._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){on("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#le}set _isDraggable(t){this.#le=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#he}setParent(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#ce(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#Qt?this.#Qt=!1:this.parent.setSelected(this))}focusout(t){if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const e=t.relatedTarget;e?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,n){const[s,r]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(t+i)/s,this.y=(e+n)/r,this.fixAndSetPosition()}#de(t,e,i){let[n,s]=t;[e,i]=this.screenToPageTranslation(e,i),this.x+=e/n,this.y+=i/s,this.fixAndSetPosition()}translate(t,e){this.#de(this.parentDimensions,t,e)}translateInPage(t,e){this.#te||=[this.x,this.y],this.#de(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){this.#te||=[this.x,this.y];const[i,n]=this.parentDimensions;if(this.x+=t/i,this.y+=e/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:r}=this;const[a,o]=this.getBaseTranslation();s+=a,r+=o,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*r).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#te&&(this.#te[0]!==this.x||this.#te[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Es,n=i/t,s=i/e;switch(this.rotation){case 90:return[-n,s];case 180:return[n,s];case 270:return[n,-s];default:return[-n,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const[e,i]=this.pageDimensions;let{x:n,y:s,width:r,height:a}=this;if(r*=e,a*=i,n*=e,s*=i,this._mustFixPosition)switch(t){case 0:n=Math.max(0,Math.min(e-r,n)),s=Math.max(0,Math.min(i-a,s));break;case 90:n=Math.max(0,Math.min(e-a,n)),s=Math.min(i,Math.max(r,s));break;case 180:n=Math.min(e,Math.max(r,n)),s=Math.min(i,Math.max(a,s));break;case 270:n=Math.min(e,Math.max(a,n)),s=Math.max(0,Math.min(i-r,s))}this.x=n/=e,this.y=s/=i;const[o,l]=this.getBaseTranslation();n+=o,s+=l;const{style:h}=this.div;h.left=`${(100*n).toFixed(2)}%`,h.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#ue(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return Es.#ue(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return Es.#ue(t,e,360-this.parentRotation)}#pe(t){switch(t){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this,n=e*t,s=i*t;return En.isCSSRoundSupported?[Math.round(n),Math.round(s)]:[n,s]}setDims(t,e){const[i,n]=this.parentDimensions;this.div.style.width=`${(100*t/i).toFixed(2)}%`,this.#Wt||(this.div.style.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,n=i.endsWith("%"),s=!this.#Wt&&e.endsWith("%");if(n&&s)return;const[r,a]=this.parentDimensions;n||(t.width=`${(100*parseFloat(i)/r).toFixed(2)}%`),this.#Wt||s||(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#fe(){if(this.#qt)return;this.#qt=document.createElement("div"),this.#qt.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const e of t){const t=document.createElement("div");this.#qt.append(t),t.classList.add("resizer",e),t.setAttribute("data-resizer-name",e),t.addEventListener("pointerdown",this.#ge.bind(this,e)),t.addEventListener("contextmenu",ns),t.tabIndex=-1}this.div.prepend(this.#qt)}#ge(t,e){e.preventDefault();const{isMac:i}=En.platform;if(0!==e.button||e.ctrlKey&&i)return;this.#Nt?.toggle(!1);const n=this.#me.bind(this,t),s=this._isDraggable;this._isDraggable=!1;const r={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",n,r),window.addEventListener("contextmenu",ns);const a=this.x,o=this.y,l=this.width,h=this.height,c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{this.parent.togglePointerEvents(!0),this.#Nt?.toggle(!0),this._isDraggable=s,window.removeEventListener("pointerup",u),window.removeEventListener("blur",u),window.removeEventListener("pointermove",n,r),window.removeEventListener("contextmenu",ns),this.parent.div.style.cursor=c,this.div.style.cursor=d,this.#be(a,o,l,h)};window.addEventListener("pointerup",u),window.addEventListener("blur",u)}#be(t,e,i,n){const s=this.x,r=this.y,a=this.width,o=this.height;s===t&&r===e&&a===i&&o===n||this.addCommands({cmd:()=>{this.width=a,this.height=o,this.x=s,this.y=r;const[t,e]=this.parentDimensions;this.setDims(t*a,e*o),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=n,this.x=t,this.y=e;const[s,r]=this.parentDimensions;this.setDims(s*i,r*n),this.fixAndSetPosition()},mustExec:!0})}#me(t,e){const[i,n]=this.parentDimensions,s=this.x,r=this.y,a=this.width,o=this.height,l=Es.MIN_SIZE/i,h=Es.MIN_SIZE/n,c=t=>Math.round(1e4*t)/1e4,d=this.#pe(this.rotation),u=(t,e)=>[d[0]*t+d[2]*e,d[1]*t+d[3]*e],p=this.#pe(360-this.rotation);let f,g,m=!1,b=!1;switch(t){case"topLeft":m=!0,f=(t,e)=>[0,0],g=(t,e)=>[t,e];break;case"topMiddle":f=(t,e)=>[t/2,0],g=(t,e)=>[t/2,e];break;case"topRight":m=!0,f=(t,e)=>[t,0],g=(t,e)=>[0,e];break;case"middleRight":b=!0,f=(t,e)=>[t,e/2],g=(t,e)=>[0,e/2];break;case"bottomRight":m=!0,f=(t,e)=>[t,e],g=(t,e)=>[0,0];break;case"bottomMiddle":f=(t,e)=>[t/2,e],g=(t,e)=>[t/2,0];break;case"bottomLeft":m=!0,f=(t,e)=>[0,e],g=(t,e)=>[t,0];break;case"middleLeft":b=!0,f=(t,e)=>[0,e/2],g=(t,e)=>[t,e/2]}const v=f(a,o),y=g(a,o);let w=u(...y);const A=c(s+w[0]),E=c(r+w[1]);let x=1,_=1,[S,C]=this.screenToPageTranslation(e.movementX,e.movementY);if([S,C]=((t,e)=>[p[0]*t+p[2]*e,p[1]*t+p[3]*e])(S/i,C/n),m){const t=Math.hypot(a,o);x=_=Math.max(Math.min(Math.hypot(y[0]-v[0]-S,y[1]-v[1]-C)/t,1/a,1/o),l/a,h/o)}else b?x=Math.max(l,Math.min(1,Math.abs(y[0]-v[0]-S)))/a:_=Math.max(h,Math.min(1,Math.abs(y[1]-v[1]-C)))/o;const T=c(a*x),k=c(o*_);w=u(...g(T,k));const P=A-w[0],R=E-w[1];this.width=T,this.height=k,this.x=P,this.y=R,this.setDims(i*T,n*k),this.fixAndSetPosition()}altTextFinish(){this.#Nt?.finish()}async addEditToolbar(){return this.#Jt||this.#ie||(this.#Jt=new us(this),this.div.append(this.#Jt.render()),this.#Nt&&this.#Jt.addAltTextButton(await this.#Nt.render())),this.#Jt}removeEditToolbar(){this.#Jt&&(this.#Jt.remove(),this.#Jt=null,this.#Nt?.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#Nt||(As.initialize(Es._l10nPromise),this.#Nt=new As(this),await this.addEditToolbar())}get altTextData(){return this.#Nt?.data}set altTextData(t){this.#Nt&&(this.#Nt.data=t)}hasAltText(){return!this.#Nt?.isEmpty()}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#Vt?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",this.#Yt),this.div.addEventListener("focusout",this.#Xt);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,n]=this.getInitialTranslation();return this.translate(i,n),fs(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=En.platform;0!==t.button||t.ctrlKey&&e?t.preventDefault():(this.#Qt=!0,this._isDraggable?this.#ve(t):this.#ye(t))}#ye(t){const{isMac:e}=En.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#ve(t){const e=this._uiManager.isSelected(this);let i,n;this._uiManager.setUpDragSession(),e&&(this.div.classList.add("moving"),i={passive:!0,capture:!0},this.#re=t.clientX,this.#ae=t.clientY,n=t=>{const{clientX:e,clientY:i}=t,[n,s]=this.screenToPageTranslation(e-this.#re,i-this.#ae);this.#re=e,this.#ae=i,this._uiManager.dragSelectedEditors(n,s)},window.addEventListener("pointermove",n,i));const s=()=>{window.removeEventListener("pointerup",s),window.removeEventListener("blur",s),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",n,i)),this.#Qt=!1,this._uiManager.endDragSession()||this.#ye(t)};window.addEventListener("pointerup",s),window.addEventListener("blur",s)}moveInDOM(){this.#se&&clearTimeout(this.#se),this.#se=setTimeout((()=>{this.#se=null,this.parent?.moveEditorInDOM(this)}),0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const n=this.parentScale,[s,r]=this.pageDimensions,[a,o]=this.pageTranslation,l=t/n,h=e/n,c=this.x*s,d=this.y*r,u=this.width*s,p=this.height*r;switch(i){case 0:return[c+l+a,r-d-h-p+o,c+l+u+a,r-d-h+o];case 90:return[c+h+a,r-d+l+o,c+h+p+a,r-d+l+u+o];case 180:return[c-l-u+a,r-d+h+o,c-l+a,r-d+h+p+o];case 270:return[c-h-p+a,r-d-l-u+o,c-h+a,r-d-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,n,s,r]=t,a=s-i,o=r-n;switch(this.rotation){case 0:return[i,e-r,a,o];case 90:return[i,e-n,o,a];case 180:return[s,e-n,a,o];case 270:return[s,e-r,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#ie=!0}disableEditMode(){this.#ie=!1}isInEditMode(){return this.#ie}shouldGetKeyboardEvents(){return this.#ne}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#Yt),this.div?.addEventListener("focusout",this.#Xt)}rotate(t){}serialize(){on("An editor must be serializable")}static deserialize(t,e,i){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});n.rotation=t.rotation;const[s,r]=n.pageDimensions,[a,o,l,h]=n.getRectInCurrentCoords(t.rect,r);return n.x=a/s,n.y=o/r,n.width=l/s,n.height=h/r,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.div.removeEventListener("focusin",this.#Yt),this.div.removeEventListener("focusout",this.#Xt),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#se&&(clearTimeout(this.#se),this.#se=null),this.#ce(),this.removeEditToolbar(),this.#oe){for(const t of this.#oe.values())clearTimeout(t);this.#oe=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#fe(),this.#qt.classList.remove("hidden"),fs(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||"Enter"!==t.key)return;this._uiManager.setSelected(this),this.#Kt={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#qt.children;if(!this.#$t){this.#$t=Array.from(e);const t=this.#we.bind(this),i=this.#Ae.bind(this);for(const e of this.#$t){const n=e.getAttribute("data-resizer-name");e.setAttribute("role","spinbutton"),e.addEventListener("keydown",t),e.addEventListener("blur",i),e.addEventListener("focus",this.#Ee.bind(this,n)),Es._l10nPromise.get(`pdfjs-editor-resizer-label-${n}`).then((t=>e.setAttribute("aria-label",t)))}}const i=this.#$t[0];let n=0;for(const r of e){if(r===i)break;n++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#$t.length/4);if(s!==n){if(s<n)for(let e=0;e<n-s;e++)this.#qt.append(this.#qt.firstChild);else if(s>n)for(let e=0;e<s-n;e++)this.#qt.firstChild.before(this.#qt.lastChild);let t=0;for(const i of e){const e=this.#$t[t++].getAttribute("data-resizer-name");Es._l10nPromise.get(`pdfjs-editor-resizer-label-${e}`).then((t=>i.setAttribute("aria-label",t)))}}this.#xe(0),this.#ne=!0,this.#qt.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#we(t){Es._resizerKeyboardManager.exec(this,t)}#Ae(t){this.#ne&&t.relatedTarget?.parentNode!==this.#qt&&this.#ce()}#Ee(t){this.#Zt=this.#ne?t:""}#xe(t){if(this.#$t)for(const e of this.#$t)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#ne&&this.#me(this.#Zt,{movementX:t,movementY:e})}#ce(){if(this.#ne=!1,this.#xe(-1),this.#Kt){const{savedX:t,savedY:e,savedWidth:i,savedHeight:n}=this.#Kt;this.#be(t,e,i,n),this.#Kt=null}}_stopResizingWithKeyboard(){this.#ce(),this.div.focus()}select(){this.makeResizable(),this.div?.classList.add("selectedEditor"),this.#Jt?this.#Jt?.show():this.addEditToolbar().then((()=>{this.div?.classList.contains("selectedEditor")&&this.#Jt?.show()}))}unselect(){this.#qt?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this.#Jt?.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#ee}set isEditing(t){this.#ee=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#Wt=!0;const i=t/e,{style:n}=this.div;n.aspectRatio=i,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){this.#oe||=new Map;const{action:e}=t;let i=this.#oe.get(e);return i&&clearTimeout(i),i=setTimeout((()=>{this._reportTelemetry(t),this.#oe.delete(e),0===this.#oe.size&&(this.#oe=null)}),Es._telemetryTimeout),void this.#oe.set(e,i)}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#Vt=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#Vt=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){const t=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.before(e)}}else e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);return e}resetAnnotationElement(t){const{firstChild:e}=t.container;"DIV"===e.nodeName&&e.classList.contains("annotationContent")&&e.remove()}}class xs extends Es{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const _s=3285377520,Ss=4294901760,Cs=65535;class Ts{constructor(t){this.h1=t?4294967295&t:_s,this.h2=t?4294967295&t:_s}update(t){let e,i;if("string"===typeof t){e=new Uint8Array(2*t.length),i=0;for(let n=0,s=t.length;n<s;n++){const s=t.charCodeAt(n);s<=255?e[i++]=s:(e[i++]=s>>>8,e[i++]=255&s)}}else{if(!ArrayBuffer.isView(t))throw new Error("Invalid data format, must be a string or TypedArray.");e=t.slice(),i=e.byteLength}const n=i>>2,s=i-4*n,r=new Uint32Array(e.buffer,0,n);let a=0,o=0,l=this.h1,h=this.h2;const c=3432918353,d=461845907,u=11601,p=13715;for(let f=0;f<n;f++)1&f?(a=r[f],a=a*c&Ss|a*u&Cs,a=a<<15|a>>>17,a=a*d&Ss|a*p&Cs,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=r[f],o=o*c&Ss|o*u&Cs,o=o<<15|o>>>17,o=o*d&Ss|o*p&Cs,h^=o,h=h<<13|h>>>19,h=5*h+3864292196);switch(a=0,s){case 3:a^=e[4*n+2]<<16;case 2:a^=e[4*n+1]<<8;case 1:a^=e[4*n],a=a*c&Ss|a*u&Cs,a=a<<15|a>>>17,a=a*d&Ss|a*p&Cs,1&n?l^=a:h^=a}this.h1=l,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=3981806797*t&Ss|36045*t&Cs,e=4283543511*e&Ss|(2950163797*(e<<16|t>>>16)&Ss)>>>16,t^=e>>>1,t=444984403*t&Ss|60499*t&Cs,e=3301882366*e&Ss|(3120437893*(e<<16|t>>>16)&Ss)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const ks=Object.freeze({map:null,hash:"",transfer:void 0});class Ps{#_e=!1;#Se=(()=>new Map)();constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#Se.get(t);return void 0===i?e:Object.assign(e,i)}getRawValue(t){return this.#Se.get(t)}remove(t){if(this.#Se.delete(t),0===this.#Se.size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const t of this.#Se.values())if(t instanceof Es)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#Se.get(t);let n=!1;if(void 0!==i)for(const[s,r]of Object.entries(e))i[s]!==r&&(n=!0,i[s]=r);else n=!0,this.#Se.set(t,e);n&&this.#Ce(),e instanceof Es&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#Se.has(t)}getAll(){return this.#Se.size>0?An(this.#Se):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return this.#Se.size}#Ce(){this.#_e||(this.#_e=!0,"function"===typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#_e&&(this.#_e=!1,"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new Rs(this)}get serializable(){if(0===this.#Se.size)return ks;const t=new Map,e=new Ts,i=[],n=Object.create(null);let s=!1;for(const[r,a]of this.#Se){const i=a instanceof Es?a.serialize(!1,n):a;i&&(t.set(r,i),e.update(`${r}:${JSON.stringify(i)}`),s||=!!i.bitmap)}if(s)for(const r of t.values())r.bitmap&&i.push(r.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:ks}get editorStats(){let t=null;const e=new Map;for(const i of this.#Se.values()){if(!(i instanceof Es))continue;const n=i.telemetryFinalData;if(!n)continue;const{type:s}=n;e.has(s)||e.set(s,Object.getPrototypeOf(i).constructor),t||=Object.create(null);const r=t[s]||=new Map;for(const[t,e]of Object.entries(n)){if("type"===t)continue;let i=r.get(t);i||(i=new Map,r.set(t,i));const n=i.get(e)??0;i.set(e,n+1)}}for(const[i,n]of e)t[i]=n.computeTelemetryFinalData(t[i]);return t}}class Rs extends Ps{#Te;constructor(t){super();const{map:e,hash:i,transfer:n}=t.serializable,s=structuredClone(e,n?{transfer:n}:null);this.#Te={map:s,hash:i,transfer:n}}get print(){on("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#Te}}class Ms{#ke=(()=>new Set)();constructor(t){let{ownerDocument:e=globalThis.document,styleElement:i=null}=t;this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#ke.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(t){let{systemFontInfo:e,_inspectFont:i}=t;if(e&&!this.#ke.has(e.loadedName))if(ln(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:t,src:n,style:s}=e,r=new FontFace(t,n,s);this.addNativeFontFace(r);try{await r.load(),this.#ke.add(t),i?.(e)}catch{an(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}}else on("Not implemented: loadSystemFont without the Font Loading API.")}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo)return void await this.loadSystemFont(t);if(this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(i){throw an(`Failed to load font '${e.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise((e=>{const i=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,i)}))}}get isFontLoadingAPISupported(){return cn(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){let t=!1;return(ai||"undefined"!==typeof navigator&&"string"===typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),cn(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const{loadingRequests:e}=this,i={done:!1,complete:function(){for(ln(!i.done,"completeRequest() cannot be called twice."),i.done=!0;e.length>0&&e[0].done;){const t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(i),i}get _loadTestFont(){return cn(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e){function i(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function n(t,e,i,n){return t.substring(0,e)+n+t.substring(e+i)}let s,r;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const h=`lt${Date.now()}${this.loadTestFontId++}`;let c=this._loadTestFont;c=n(c,976,h.length,h);const d=1482184792;let u=i(c,16);for(s=0,r=h.length-3;s<r;s+=4)u=u-d+i(h,s)|0;var p;s<h.length&&(u=u-d+i(h+"XXX",s)|0),c=n(c,16,4,(p=u,String.fromCharCode(p>>24&255,p>>16&255,p>>8&255,255&p)));const f=`@font-face {font-family:"${h}";src:${`url(data:font/opentype;base64,${btoa(c)});`}}`;this.insertRule(f);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const m of[t.loadedName,h]){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=m,g.append(t)}this._document.body.append(g),function t(e,i){if(++l>30)return an("Load test font never loaded."),void i();o.font="30px "+e,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?i():setTimeout(t.bind(null,e,i))}(h,(()=>{g.remove(),e.complete()}))}}class Is{constructor(t,e){let{disableFontFace:i=!1,inspectFont:n=null}=e;this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this.disableFontFace=!0===i,this._inspectFont=n}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=yn(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let i;if(this.cssFontInfo){let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${e}}`}else i=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return this._inspectFont?.(this,e),i}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(s){an(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(i)||0===i.length)return this.compiledGlyphs[e]=function(t,e){};const n=[];for(let r=0,a=i.length;r<a;)switch(i[r++]){case Pn:{const[t,e,s,a,o,l]=i.slice(r,r+6);n.push((i=>i.bezierCurveTo(t,e,s,a,o,l))),r+=6}break;case Rn:{const[t,e]=i.slice(r,r+2);n.push((i=>i.moveTo(t,e))),r+=2}break;case Mn:{const[t,e]=i.slice(r,r+2);n.push((i=>i.lineTo(t,e))),r+=2}break;case In:{const[t,e,s,a]=i.slice(r,r+4);n.push((i=>i.quadraticCurveTo(t,e,s,a))),r+=4}break;case Ln:n.push((t=>t.restore()));break;case Dn:n.push((t=>t.save()));break;case On:ln(2===n.length,"Scale command is only valid at the third position.");break;case Fn:{const[t,e,s,a,o,l]=i.slice(r,r+6);n.push((i=>i.transform(t,e,s,a,o,l))),r+=6}break;case Nn:{const[t,e]=i.slice(r,r+2);n.push((i=>i.translate(t,e))),r+=2}}return this.compiledGlyphs[e]=function(t,e){n[0](t),n[1](t),t.scale(e,-e);for(let i=2,s=n.length;i<s;i++)n[i](t)}}}if(ai){var Ls=Promise.withResolvers(),Ds=null;(async()=>{const t=await import("fs"),e=await import("http"),i=await import("https"),n=await import("url");return new Map(Object.entries({fs:t,http:e,https:i,url:n,canvas:undefined,path2d:undefined}))})().then((t=>{Ds=t,Ls.resolve()}),(t=>{an(`loadPackages: ${t}`),Ds=new Map,Ls.resolve()}))}class Os{static get promise(){return Ls.promise}static get(t){return Ds?.get(t)}}const Fs=function(t){return Os.get("fs").promises.readFile(t).then((t=>new Uint8Array(t)))};const Ns="Fill",Bs="Stroke",js="Shading";function Us(t,e){if(!e)return;const i=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],i,n),t.clip(s)}class zs{constructor(){this.constructor===zs&&on("Cannot initialize BaseShadingPattern.")}getPattern(){on("Abstract method `getPattern` called.")}}class Hs extends zs{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,n){let s;if(n===Bs||n===Ns){const r=e.current.getClippedPathBoundingBox(n,hs(t))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,o=Math.ceil(r[3]-r[1])||1,l=e.cachedCanvases.getCanvas("pattern",a,o,!0),h=l.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-r[0],-r[1]),i=_n.transform(i,[1,0,0,1,r[0],r[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),Us(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),s=t.createPattern(l.canvas,"no-repeat");const c=new DOMMatrix(i);s.setTransform(c)}else Us(t,this._bbox),s=this._createGradient(t);return s}}function Gs(t,e,i,n,s,r,a,o){const l=e.coords,h=e.colors,c=t.data,d=4*t.width;let u;l[i+1]>l[n+1]&&(u=i,i=n,n=u,u=r,r=a,a=u),l[n+1]>l[s+1]&&(u=n,n=s,s=u,u=a,a=o,o=u),l[i+1]>l[n+1]&&(u=i,i=n,n=u,u=r,r=a,a=u);const p=(l[i]+e.offsetX)*e.scaleX,f=(l[i+1]+e.offsetY)*e.scaleY,g=(l[n]+e.offsetX)*e.scaleX,m=(l[n+1]+e.offsetY)*e.scaleY,b=(l[s]+e.offsetX)*e.scaleX,v=(l[s+1]+e.offsetY)*e.scaleY;if(f>=v)return;const y=h[r],w=h[r+1],A=h[r+2],E=h[a],x=h[a+1],_=h[a+2],S=h[o],C=h[o+1],T=h[o+2],k=Math.round(f),P=Math.round(v);let R,M,I,L,D,O,F,N;for(let B=k;B<=P;B++){if(B<m){const t=B<f?0:(f-B)/(f-m);R=p-(p-g)*t,M=y-(y-E)*t,I=w-(w-x)*t,L=A-(A-_)*t}else{let t;t=B>v?1:m===v?0:(m-B)/(m-v),R=g-(g-b)*t,M=E-(E-S)*t,I=x-(x-C)*t,L=_-(_-T)*t}let t;t=B<f?0:B>v?1:(f-B)/(f-v),D=p-(p-b)*t,O=y-(y-S)*t,F=w-(w-C)*t,N=A-(A-T)*t;const e=Math.round(Math.min(R,D)),i=Math.round(Math.max(R,D));let n=d*B+4*e;for(let s=e;s<=i;s++)t=(R-s)/(R-D),t<0?t=0:t>1&&(t=1),c[n++]=M-(M-O)*t|0,c[n++]=I-(I-F)*t|0,c[n++]=L-(L-N)*t|0,c[n++]=255}}function $s(t,e,i){const n=e.coords,s=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(n.length/o)-1,h=o-1;for(r=0;r<l;r++){let e=r*o;for(let r=0;r<h;r++,e++)Gs(t,i,n[e],n[e+1],n[e+o],s[e],s[e+1],s[e+o]),Gs(t,i,n[e+o+1],n[e+1],n[e+o],s[e+o+1],s[e+1],s[e+o])}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)Gs(t,i,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class Vs extends zs{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const n=Math.floor(this._bounds[0]),s=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-n,a=Math.ceil(this._bounds[3])-s,o=Math.min(Math.ceil(Math.abs(r*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3),h=r/o,c=a/l,d={coords:this._coords,colors:this._colors,offsetX:-n,offsetY:-s,scaleX:1/h,scaleY:1/c},u=o+4,p=l+4,f=i.getCanvas("mesh",u,p,!1),g=f.context,m=g.createImageData(o,l);if(e){const t=m.data;for(let i=0,n=t.length;i<n;i+=4)t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=255}for(const b of this._figures)$s(m,b,d);g.putImageData(m,2,2);return{canvas:f.canvas,offsetX:n-2*h,offsetY:s-2*c,scaleX:h,scaleY:c}}getPattern(t,e,i,n){let s;if(Us(t,this._bbox),n===js)s=_n.singularValueDecompose2dScale(hs(t));else if(s=_n.singularValueDecompose2dScale(e.baseTransform),this.matrix){const t=_n.singularValueDecompose2dScale(this.matrix);s=[s[0]*t[0],s[1]*t[1]]}const r=this._createMeshCanvas(s,n===js?null:this._background,e.cachedCanvases);return n!==js&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}}class Ws extends zs{getPattern(){return"hotpink"}}const qs=1,Ks=2;class Ys{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,n,s){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(t){const e=this.operatorList,i=this.bbox,n=this.xstep,s=this.ystep,r=this.paintType,a=this.tilingType,o=this.color,l=this.canvasGraphicsFactory;rn("TilingType: "+a);const h=i[0],c=i[1],d=i[2],u=i[3],p=_n.singularValueDecompose2dScale(this.matrix),f=_n.singularValueDecompose2dScale(this.baseTransform),g=[p[0]*f[0],p[1]*f[1]],m=this.getSizeAndScale(n,this.ctx.canvas.width,g[0]),b=this.getSizeAndScale(s,this.ctx.canvas.height,g[1]),v=t.cachedCanvases.getCanvas("pattern",m.size,b.size,!0),y=v.context,w=l.createCanvasGraphics(y);w.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(w,r,o);let A=h,E=c,x=d,_=u;return h<0&&(A=0,x+=Math.abs(h)),c<0&&(E=0,_+=Math.abs(c)),y.translate(-m.scale*A,-b.scale*E),w.transform(m.scale,0,0,b.scale,0,0),y.save(),this.clipBbox(w,A,E,x,_),w.baseTransform=hs(w.ctx),w.executeOperatorList(e),w.endDrawing(),{canvas:v.canvas,scaleX:m.scale,scaleY:b.scale,offsetX:A,offsetY:E}}getSizeAndScale(t,e,i){t=Math.abs(t);const n=Math.max(Ys.MAX_PATTERN_SIZE,e);let s=Math.ceil(t*i);return s>=n?s=n:i=s/t,{scale:i,size:s}}clipBbox(t,e,i,n,s){const r=n-e,a=s-i;t.ctx.rect(e,i,r,a),t.current.updateRectMinMax(hs(t.ctx),[e,i,n,s]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const n=t.ctx,s=t.current;switch(e){case qs:const t=this.ctx;n.fillStyle=t.fillStyle,n.strokeStyle=t.strokeStyle,s.fillColor=t.fillStyle,s.strokeColor=t.strokeStyle;break;case Ks:const r=_n.makeHexColor(i[0],i[1],i[2]);n.fillStyle=r,n.strokeStyle=r,s.fillColor=r,s.strokeColor=r;break;default:throw new bn(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,n){let s=i;n!==js&&(s=_n.transform(s,e.baseTransform),this.matrix&&(s=_n.transform(s,this.matrix)));const r=this.createPatternCanvas(e);let a=new DOMMatrix(s);a=a.translate(r.offsetX,r.offsetY),a=a.scale(1/r.scaleX,1/r.scaleY);const o=t.createPattern(r.canvas,"repeat");return o.setTransform(a),o}}function Xs(t){let{src:e,srcPos:i=0,dest:n,width:s,height:r,nonBlackColor:a=4294967295,inverseDecode:o=!1}=t;const l=En.isLittleEndian?4278190080:255,[h,c]=o?[a,l]:[l,a],d=s>>3,u=7&s,p=e.length;n=new Uint32Array(n.buffer);let f=0;for(let g=0;g<r;g++){for(const s=i+d;i<s;i++){const t=i<p?e[i]:255;n[f++]=128&t?c:h,n[f++]=64&t?c:h,n[f++]=32&t?c:h,n[f++]=16&t?c:h,n[f++]=8&t?c:h,n[f++]=4&t?c:h,n[f++]=2&t?c:h,n[f++]=1&t?c:h}if(0===u)continue;const t=i<p?e[i++]:255;for(let e=0;e<u;e++)n[f++]=t&1<<7-e?c:h}return{srcPos:i,destPos:f}}const Js=16;class Zs{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let n;return void 0!==this.cache[t]?(n=this.cache[t],this.canvasFactory.reset(n,e,i)):(n=this.canvasFactory.create(e,i),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Qs(t,e,i,n,s,r,a,o,l,h){const[c,d,u,p,f,g]=hs(t);if(0===d&&0===u){const m=a*c+f,b=Math.round(m),v=o*p+g,y=Math.round(v),w=(a+l)*c+f,A=Math.abs(Math.round(w)-b)||1,E=(o+h)*p+g,x=Math.abs(Math.round(E)-y)||1;return t.setTransform(Math.sign(c),0,0,Math.sign(p),b,y),t.drawImage(e,i,n,s,r,0,0,A,x),t.setTransform(c,d,u,p,f,g),[A,x]}if(0===c&&0===p){const m=o*u+f,b=Math.round(m),v=a*d+g,y=Math.round(v),w=(o+h)*u+f,A=Math.abs(Math.round(w)-b)||1,E=(a+l)*d+g,x=Math.abs(Math.round(E)-y)||1;return t.setTransform(0,Math.sign(d),Math.sign(u),0,b,y),t.drawImage(e,i,n,s,r,0,0,x,A),t.setTransform(c,d,u,p,f,g),[x,A]}t.drawImage(e,i,n,s,r,a,o,l,h);return[Math.hypot(c,d)*l,Math.hypot(u,p)*h]}class tr{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=oi,this.textMatrixScale=1,this.fontMatrix=li,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Ai,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=_n.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=_n.applyTransform(e,t),n=_n.applyTransform(e.slice(2),t),s=_n.applyTransform([e[0],e[3]],t),r=_n.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],n[0],s[0],r[0]),this.minY=Math.min(this.minY,i[1],n[1],s[1],r[1]),this.maxX=Math.max(this.maxX,i[0],n[0],s[0],r[0]),this.maxY=Math.max(this.maxY,i[1],n[1],s[1],r[1])}updateScalingPathMinMax(t,e){_n.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,n,s,r,a,o,l,h){const c=_n.bezierBoundingBox(e,i,n,s,r,a,o,l,h);h||this.updateRectMinMax(t,c)}getPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ns,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===Bs){e||on("Stroke bounding box must include transform.");const t=_n.singularValueDecompose2dScale(e),n=t[0]*this.lineWidth/2,s=t[1]*this.lineWidth/2;i[0]-=n,i[1]-=s,i[2]+=n,i[3]+=s}return i}updateClipFromPath(){const t=_n.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ns,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _n.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function er(t,e){if("undefined"!==typeof ImageData&&e instanceof ImageData)return void t.putImageData(e,0,0);const i=e.height,n=e.width,s=i%Js,r=(i-s)/Js,a=0===s?r:r+1,o=t.createImageData(n,Js);let l,h=0;const c=e.data,d=o.data;let u,p,f,g;if(e.kind===Ti.GRAYSCALE_1BPP){const e=c.byteLength,i=new Uint32Array(d.buffer,0,d.byteLength>>2),g=i.length,m=n+7>>3,b=4294967295,v=En.isLittleEndian?4278190080:255;for(u=0;u<a;u++){for(f=u<r?Js:s,l=0,p=0;p<f;p++){const t=e-h;let s=0;const r=t>m?n:8*t-7,a=-8&r;let o=0,d=0;for(;s<a;s+=8)d=c[h++],i[l++]=128&d?b:v,i[l++]=64&d?b:v,i[l++]=32&d?b:v,i[l++]=16&d?b:v,i[l++]=8&d?b:v,i[l++]=4&d?b:v,i[l++]=2&d?b:v,i[l++]=1&d?b:v;for(;s<r;s++)0===o&&(d=c[h++],o=128),i[l++]=d&o?b:v,o>>=1}for(;l<g;)i[l++]=0;t.putImageData(o,0,u*Js)}}else if(e.kind===Ti.RGBA_32BPP){for(p=0,g=n*Js*4,u=0;u<r;u++)d.set(c.subarray(h,h+g)),h+=g,t.putImageData(o,0,p),p+=Js;u<a&&(g=n*s*4,d.set(c.subarray(h,h+g)),t.putImageData(o,0,p))}else{if(e.kind!==Ti.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(f=Js,g=n*f,u=0;u<a;u++){for(u>=r&&(f=s,g=n*f),l=0,p=g;p--;)d[l++]=c[h++],d[l++]=c[h++],d[l++]=c[h++],d[l++]=255;t.putImageData(o,0,u*Js)}}}function ir(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const i=e.height,n=e.width,s=i%Js,r=(i-s)/Js,a=0===s?r:r+1,o=t.createImageData(n,Js);let l=0;const h=e.data,c=o.data;for(let d=0;d<a;d++){const e=d<r?Js:s;({srcPos:l}=Xs({src:h,srcPos:l,dest:c,width:n,height:e,nonBlackColor:0})),t.putImageData(o,0,d*Js)}}function nr(t,e){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of i)void 0!==t[n]&&(e[n]=t[n]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function sr(t){if(t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0),!ai){const{filter:e}=t;"none"!==e&&""!==e&&(t.filter="none")}}function rr(t,e){if(e)return!0;const i=_n.singularValueDecompose2dScale(t);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*$n.PDF_TO_CSS_UNITS);return i[0]<=n&&i[1]<=n}const ar=["butt","round","square"],or=["miter","round","bevel"],lr={},hr={};class cr{constructor(t,e,i,n,s,r,a,o){let{optionalContentConfig:l,markedContentStack:h=null}=r;this.ctx=t,this.current=new tr(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=n,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=l,this.cachedCanvases=new Zs(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing(t){let{transform:e,viewport:i,transparency:n=!1,background:s=null}=t;const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,n){const t=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(...hs(this.compositeCtx))}this.ctx.save(),sr(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=hs(this.ctx)}executeOperatorList(t,e,i,n){const s=t.argsArray,r=t.fnArray;let a=e||0;const o=s.length;if(o===a)return a;const l=o-a>10&&"function"===typeof i,h=l?Date.now()+15:0;let c=0;const d=this.commonObjs,u=this.objs;let p;for(;;){if(void 0!==n&&a===n.nextBreakPoint)return n.breakIt(a,i),a;if(p=r[a],p!==Qi.dependency)this[p].apply(this,s[a]);else for(const t of s[a]){const e=t.startsWith("g_")?d:u;if(!e.has(t))return e.get(t,i),a}if(a++,a===o)return a;if(l&&++c>10){if(Date.now()>h)return i(),a;c=0}}}#Pe(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#Pe(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#Re()}#Re(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width,n=t.height;let s,r,a=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=i,h=n,c="prescale1";for(;a>2&&l>1||o>2&&h>1;){let e=l,i=h;a>2&&l>1&&(e=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/e),o>2&&h>1&&(i=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/i),s=this.cachedCanvases.getCanvas(c,e,i),r=s.context,r.clearRect(0,0,e,i),r.drawImage(t,0,0,l,h,0,0,e,i),t=s.canvas,l=e,h=i,c="prescale1"===c?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:n}=t,s=this.current.fillColor,r=this.current.patternFill,a=hs(e);let o,l,h,c;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer;l=JSON.stringify(r?a:[a.slice(0,4),s]),o=this._cachedBitmapsMap.get(e),o||(o=new Map,this._cachedBitmapsMap.set(e,o));const i=o.get(l);if(i&&!r){return{canvas:i,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])}}h=i}h||(c=this.cachedCanvases.getCanvas("maskCanvas",i,n),ir(c.context,t));let d=_n.transform(a,[1/i,0,0,-1/n,0,0]);d=_n.transform(d,[1,0,0,1,0,-n]);const[u,p,f,g]=_n.getAxialAlignedBoundingBox([0,0,i,n],d),m=Math.round(f-u)||1,b=Math.round(g-p)||1,v=this.cachedCanvases.getCanvas("fillCanvas",m,b),y=v.context,w=u,A=p;y.translate(-w,-A),y.transform(...d),h||(h=this._scaleImage(c.canvas,cs(y)),h=h.img,o&&r&&o.set(l,h)),y.imageSmoothingEnabled=rr(hs(y),t.interpolate),Qs(y,h,0,0,h.width,h.height,0,0,i,n),y.globalCompositeOperation="source-in";const E=_n.transform(cs(y),[1,0,0,1,-w,-A]);return y.fillStyle=r?s.getPattern(e,this,E,Ns):s,y.fillRect(0,0,i,n),o&&!r&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,v.canvas)),{canvas:v.canvas,offsetX:Math.round(w),offsetY:Math.round(A)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=ar[t]}setLineJoin(t){this.ctx.lineJoin=or[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=n.context;const s=this.ctx;s.setTransform(...hs(this.suspendedCtx)),nr(this.suspendedCtx,s),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},t.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},t.transform=function(t,i,n,s,r,a){e.transform(t,i,n,s,r,a),this.__originalTransform(t,i,n,s,r,a)},t.setTransform=function(t,i,n,s,r,a){e.setTransform(t,i,n,s,r,a),this.__originalSetTransform(t,i,n,s,r,a)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},t.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},t.bezierCurveTo=function(t,i,n,s,r,a){e.bezierCurveTo(t,i,n,s,r,a),this.__originalBezierCurveTo(t,i,n,s,r,a)},t.rect=function(t,i,n,s){e.rect(t,i,n,s),this.__originalRect(t,i,n,s)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),nr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,n){const s=n[0],r=n[1],a=n[2]-s,o=n[3]-r;0!==a&&0!==o&&(this.genericComposeSMask(e.context,i,a,o,e.subtype,e.backdrop,e.transferMap,s,r,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,n,s,r,a,o,l,h,c){let d=t.canvas,u=o-h,p=l-c;if(r)if(u<0||p<0||u+i>d.width||p+n>d.height){const t=this.cachedCanvases.getCanvas("maskExtension",i,n),e=t.context;e.drawImage(d,-u,-p),r.some((t=>0!==t))&&(e.globalCompositeOperation="destination-atop",e.fillStyle=_n.makeHexColor(...r),e.fillRect(0,0,i,n),e.globalCompositeOperation="source-over"),d=t.canvas,u=p=0}else if(r.some((t=>0!==t))){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const e=new Path2D;e.rect(u,p,i,n),t.clip(e),t.globalCompositeOperation="destination-atop",t.fillStyle=_n.makeHexColor(...r),t.fillRect(u,p,i,n),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===s&&a?e.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===s&&(e.filter=this.filterFactory.addLuminosityFilter(a));const f=new Path2D;f.rect(o,l,i,n),e.clip(f),e.globalCompositeOperation="destination-in",e.drawImage(d,u,p,i,n,o,l,i,n),e.restore()}save(){this.inSMaskMode?(nr(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),nr(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,n,s,r){this.ctx.transform(t,e,i,n,s,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const n=this.ctx,s=this.current;let r,a,o=s.x,l=s.y;const h=hs(n),c=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],d=c?i.slice(0):null;for(let u=0,p=0,f=t.length;u<f;u++)switch(0|t[u]){case Qi.rectangle:o=e[p++],l=e[p++];const t=e[p++],i=e[p++],u=o+t,f=l+i;n.moveTo(o,l),0===t||0===i?n.lineTo(u,f):(n.lineTo(u,l),n.lineTo(u,f),n.lineTo(o,f)),c||s.updateRectMinMax(h,[o,l,u,f]),n.closePath();break;case Qi.moveTo:o=e[p++],l=e[p++],n.moveTo(o,l),c||s.updatePathMinMax(h,o,l);break;case Qi.lineTo:o=e[p++],l=e[p++],n.lineTo(o,l),c||s.updatePathMinMax(h,o,l);break;case Qi.curveTo:r=o,a=l,o=e[p+4],l=e[p+5],n.bezierCurveTo(e[p],e[p+1],e[p+2],e[p+3],o,l),s.updateCurvePathMinMax(h,r,a,e[p],e[p+1],e[p+2],e[p+3],o,l,d),p+=6;break;case Qi.curveTo2:r=o,a=l,n.bezierCurveTo(o,l,e[p],e[p+1],e[p+2],e[p+3]),s.updateCurvePathMinMax(h,r,a,o,l,e[p],e[p+1],e[p+2],e[p+3],d),o=e[p+2],l=e[p+3],p+=4;break;case Qi.curveTo3:r=o,a=l,o=e[p+2],l=e[p+3],n.bezierCurveTo(e[p],e[p+1],o,l,o,l),s.updateCurvePathMinMax(h,r,a,e[p],e[p+1],o,l,o,l,d),p+=4;break;case Qi.closePath:n.closePath()}c&&s.updateScalingPathMinMax(h,d),s.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===typeof i&&i?.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,cs(e),Bs),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=this.ctx,i=this.current.fillColor;let n=!1;this.current.patternFill&&(e.save(),e.fillStyle=i.getPattern(e,this,cs(e),Ns),n=!0);const s=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==s&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),n&&e.restore(),t&&this.consumePath(s)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=lr}eoClip(){this.pendingClip=hr}beginText(){this.current.textMatrix=oi,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(const i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const i=this.commonObjs.get(t),n=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=i.fontMatrix||li,0!==n.fontMatrix[0]&&0!==n.fontMatrix[3]||an("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const s=i.loadedName||"sans-serif",r=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const o=i.italic?"italic":"normal";let l=e;e<16?l=16:e>100&&(l=100),this.current.fontSizeScale=e/l,this.ctx.font=`${o} ${a} ${l}px ${r}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,n,s,r){this.current.textMatrix=[t,e,i,n,s,r],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,n){const s=this.ctx,r=this.current,a=r.font,o=r.textRenderingMode,l=r.fontSize/r.fontSizeScale,h=o&Si,c=!!(o&Ci),d=r.patternFill&&!a.missingFile;let u;if((a.disableFontFace||c||d)&&(u=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||d?(s.save(),s.translate(e,i),s.beginPath(),u(s,l),n&&s.setTransform(...n),h!==Ai&&h!==xi||s.fill(),h!==Ei&&h!==xi||s.stroke(),s.restore()):(h!==Ai&&h!==xi||s.fillText(t,e,i),h!==Ei&&h!==xi||s.strokeText(t,e,i)),c){(this.pendingTextPaths||=[]).push({transform:hs(s),x:e,y:i,fontSize:l,addToPath:u})}}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){i=!0;break}return cn(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(0===n)return;const s=this.ctx,r=e.fontSizeScale,a=e.charSpacing,o=e.wordSpacing,l=e.fontDirection,h=e.textHScale*l,c=t.length,d=i.vertical,u=d?1:-1,p=i.defaultVMetrics,f=n*e.fontMatrix[0],g=e.textRenderingMode===Ai&&!i.disableFontFace&&!e.patternFill;let m;if(s.save(),s.transform(...e.textMatrix),s.translate(e.x,e.y+e.textRise),l>0?s.scale(h,-1):s.scale(h,1),e.patternFill){s.save();const t=e.fillColor.getPattern(s,this,cs(s),Ns);m=hs(s),s.restore(),s.fillStyle=t}let b=e.lineWidth;const v=e.textMatrixScale;if(0===v||0===b){const t=e.textRenderingMode&Si;t!==Ei&&t!==xi||(b=this.getSinglePixelWidth())}else b/=v;if(1!==r&&(s.scale(r,r),b/=r),s.lineWidth=b,i.isInvalidPDFjsFont){const i=[];let n=0;for(const e of t)i.push(e.unicode),n+=e.width;return s.fillText(i.join(""),0,0),e.x+=n*f*h,s.restore(),void this.compose()}let y,w=0;for(y=0;y<c;++y){const e=t[y];if("number"===typeof e){w+=u*e*n/1e3;continue}let h=!1;const c=(e.isSpace?o:0)+a,b=e.fontChar,v=e.accent;let A,E,x=e.width;if(d){const t=e.vmetric||p,i=-(e.vmetric?t[1]:.5*x)*f,n=t[2]*f;x=t?-t[0]:x,A=i/r,E=(w+n)/r}else A=w/r,E=0;if(i.remeasure&&x>0){const t=1e3*s.measureText(b).width/n*r;if(x<t&&this.isFontSubpixelAAEnabled){const e=x/t;h=!0,s.save(),s.scale(e,1),A/=e}else x!==t&&(A+=(x-t)/2e3*n/r)}if(this.contentVisible&&(e.isInFont||i.missingFile))if(g&&!v)s.fillText(b,A,E);else if(this.paintChar(b,A,E,m),v){const t=A+n*v.offset.x/r,e=E-n*v.offset.y/r;this.paintChar(v.fontChar,t,e,m)}w+=d?x*f-c*l:x*f+c*l,h&&s.restore()}d?e.y-=w:e.x+=w*h,s.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,n=i.font,s=i.fontSize,r=i.fontDirection,a=n.vertical?1:-1,o=i.charSpacing,l=i.wordSpacing,h=i.textHScale*r,c=i.fontMatrix||li,d=t.length;let u,p,f,g;if(!(i.textRenderingMode===_i)&&0!==s){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(h,r),u=0;u<d;++u){if(p=t[u],"number"===typeof p){g=a*p*s/1e3,this.ctx.translate(g,0),i.x+=g*h;continue}const r=(p.isSpace?l:0)+o,d=n.charProcOperatorList[p.operatorListId];if(!d){an(`Type3 character "${p.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=p,this.save(),e.scale(s,s),e.transform(...c),this.executeOperatorList(d),this.restore());f=_n.applyTransform([p.width,0],c)[0]*s+r,e.translate(f,0),i.x+=f*h}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,n,s,r){this.ctx.rect(i,n,s-i,r-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if("TilingPattern"===t[0]){const i=t[1],n=this.baseTransform||hs(this.ctx),s={createCanvasGraphics:t=>new cr(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Ys(t,i,this.ctx,s,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){const n=_n.makeHexColor(t,e,i);this.ctx.strokeStyle=n,this.current.strokeColor=n}setFillRGBColor(t,e,i){const n=_n.makeHexColor(t,e,i);this.ctx.fillStyle=n,this.current.fillColor=n,this.current.patternFill=!1}_getPattern(t){let e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(t)?e=this.cachedPatterns.get(t):(e=function(t){switch(t[0]){case"RadialAxial":return new Hs(t);case"Mesh":return new Vs(t);case"Dummy":return new Ws}throw new Error(`Unknown IR type: ${t[0]}`)}(this.getObject(t)),this.cachedPatterns.set(t,e)),i&&(e.matrix=i),e}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,cs(e),js);const n=cs(e);if(n){const{width:t,height:i}=e.canvas,[s,r,a,o]=_n.getAxialAlignedBoundingBox([0,0,t,i],n);this.ctx.fillRect(s,r,a-s,o-r)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){on("Should not call beginInlineImage")}beginImageData(){on("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=hs(this.ctx),e)){const t=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],t,i),this.current.updateRectMinMax(hs(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||rn("TODO: Support non-isolated groups."),t.knockout&&an("Knockout groups not supported.");const i=hs(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=_n.getAxialAlignedBoundingBox(t.bbox,hs(e));const s=[0,0,e.canvas.width,e.canvas.height];n=_n.intersect(n,s)||[0,0,0,0];const r=Math.floor(n[0]),a=Math.floor(n[1]),o=Math.max(Math.ceil(n[2])-r,1),l=Math.max(Math.ceil(n[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,l]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const c=this.cachedCanvases.getCanvas(h,o,l),d=c.context;d.translate(-r,-a),d.transform(...i),t.smask?this.smaskStack.push({canvas:c.canvas,context:d,offsetX:r,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(r,a),e.save()),nr(e,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const t=hs(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...t);const i=_n.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(t,e,i,n,s){if(this.#Pe(),sr(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const n=e[2]-e[0],r=e[3]-e[1];if(s&&this.annotationCanvasMap){(i=i.slice())[4]-=e[0],i[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=n,e[3]=r;const[s,a]=_n.singularValueDecompose2dScale(hs(this.ctx)),{viewportScale:o}=this,l=Math.ceil(n*this.outputScaleX*o),h=Math.ceil(r*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(l,h);const{canvas:c,context:d}=this.annotationCanvas;this.annotationCanvasMap.set(t,c),this.annotationCanvas.savedCtx=this.ctx,this.ctx=d,this.ctx.save(),this.ctx.setTransform(s,0,0,-a,0,r*a),sr(this.ctx)}else sr(this.ctx),this.ctx.rect(e[0],e[1],n,r),this.ctx.clip(),this.endPath()}this.current=new tr(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#Re(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;(t=this.getObject(t.data,t)).count=e;const i=this.ctx,n=this.processingType3;if(n&&(void 0===n.compiled&&(n.compiled=function(t){const{width:e,height:i}=t;if(e>1e3||i>1e3)return null;const n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let r,a,o,l=new Uint8Array(s*(i+1));const h=e+7&-8;let c=new Uint8Array(h*i),d=0;for(const g of t.data){let t=128;for(;t>0;)c[d++]=g&t?0:255,t>>=1}let u=0;for(d=0,0!==c[d]&&(l[0]=1,++u),a=1;a<e;a++)c[d]!==c[d+1]&&(l[a]=c[d]?2:1,++u),d++;for(0!==c[d]&&(l[a]=2,++u),r=1;r<i;r++){d=r*h,o=r*s,c[d-h]!==c[d]&&(l[o]=c[d]?1:8,++u);let t=(c[d]?4:0)+(c[d-h]?8:0);for(a=1;a<e;a++)t=(t>>2)+(c[d+1]?4:0)+(c[d-h+1]?8:0),n[t]&&(l[o+a]=n[t],++u),d++;if(c[d-h]!==c[d]&&(l[o+a]=c[d]?2:4,++u),u>1e3)return null}for(d=h*(i-1),o=r*s,0!==c[d]&&(l[o]=8,++u),a=1;a<e;a++)c[d]!==c[d+1]&&(l[o+a]=c[d]?4:8,++u),d++;if(0!==c[d]&&(l[o+a]=4,++u),u>1e3)return null;const p=new Int32Array([0,s,-1,0,-s,0,0,0,1]),f=new Path2D;for(r=0;u&&r<=i;r++){let t=r*s;const i=t+e;for(;t<i&&!l[t];)t++;if(t===i)continue;f.moveTo(t%s,r);const n=t;let a=l[t];do{const e=p[a];do{t+=e}while(!l[t]);const i=l[t];5!==i&&10!==i?(a=i,l[t]=0):(a=i&51*a>>4,l[t]&=a>>2|a<<2),f.lineTo(t%s,t/s|0),l[t]||--u}while(n!==t);--r}return c=null,l=null,function(t){t.save(),t.scale(1/e,-1/i),t.translate(0,-i),t.fill(f),t.beginPath(),t.restore()}}(t)),n.compiled))return void n.compiled(i);const s=this._createMaskCanvas(t),r=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(r,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const o=hs(a);a.transform(e,i,n,s,0,0);const l=this._createMaskCanvas(t);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let h=0,c=r.length;h<c;h+=2){const t=_n.transform(o,[e,i,n,s,r[h],r[h+1]]),[c,d]=_n.applyTransform([0,0],t);a.drawImage(l.canvas,c,d)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(const s of t){const{data:t,width:r,height:a,transform:o}=s,l=this.cachedCanvases.getCanvas("maskCanvas",r,a),h=l.context;h.save();ir(h,this.getObject(t,s)),h.globalCompositeOperation="source-in",h.fillStyle=n?i.getPattern(h,this,cs(e),Ns):i,h.fillRect(0,0,r,a),h.restore(),e.save(),e.transform(...o),e.scale(1,-1),Qs(e,l.canvas,0,0,r,a,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):an("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,i,n){if(!this.contentVisible)return;const s=this.getObject(t);if(!s)return void an("Dependent image isn't ready yet");const r=s.width,a=s.height,o=[];for(let l=0,h=n.length;l<h;l+=2)o.push({transform:[e,0,0,i,n[l],n[l+1]],x:0,y:0,w:r,h:a});this.paintInlineImageXObjectGroup(s,o)}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;const{bitmap:e,width:i,height:n}=t,s=this.cachedCanvases.getCanvas("inlineImage",i,n),r=s.context;return r.filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",s.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,n=this.ctx;if(this.save(),!ai){const{filter:t}=n;"none"!==t&&""!==t&&(n.filter="none")}let s;if(n.scale(1/e,-1/i),t.bitmap)s=this.applyTransferMapsToBitmap(t);else if("function"===typeof HTMLElement&&t instanceof HTMLElement||!t.data)s=t;else{const n=this.cachedCanvases.getCanvas("inlineImage",e,i).context;er(n,t),s=this.applyTransferMapsToCanvas(n)}const r=this._scaleImage(s,cs(n));n.imageSmoothingEnabled=rr(hs(n),t.interpolate),Qs(n,r.img,0,0,r.paintWidth,r.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const e=t.width,i=t.height,s=this.cachedCanvases.getCanvas("inlineImage",e,i).context;er(s,t),n=this.applyTransferMapsToCanvas(s)}for(const s of e)i.save(),i.transform(...s.transform),i.scale(1,-1),Qs(i,n,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===hr?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=hs(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:t}=this.current,{a:e,b:i,c:n,d:s}=this.ctx.getTransform();let r,a;if(0===i&&0===n){const i=Math.abs(e),n=Math.abs(s);if(i===n)if(0===t)r=a=1/i;else{const e=i*t;r=a=e<1?1/e:1}else if(0===t)r=1/i,a=1/n;else{const e=i*t,s=n*t;r=e<1?1/e:1,a=s<1?1/s:1}}else{const o=Math.abs(e*s-i*n),l=Math.hypot(e,i),h=Math.hypot(n,s);if(0===t)r=h/o,a=l/o;else{const e=t*o;r=h>e?h/e:1,a=l>e?l/e:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[n,s]=this.getScaleForStroking();if(e.lineWidth=i||1,1===n&&1===s)return void e.stroke();const r=e.getLineDash();if(t&&e.save(),e.scale(n,s),r.length>0){const t=Math.max(n,s);e.setLineDash(r.map((e=>e/t))),e.lineDashOffset/=t}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const rc in Qi)void 0!==cr.prototype[rc]&&(cr.prototype[Qi[rc]]=cr.prototype[rc]);class dr{static#Me=null;static#Ie="";static get workerPort(){return this.#Me}static set workerPort(t){if(!("undefined"!==typeof Worker&&t instanceof Worker)&&null!==t)throw new Error("Invalid `workerPort` type.");this.#Me=t}static get workerSrc(){return this.#Ie}static set workerSrc(t){if("string"!==typeof t)throw new Error("Invalid `workerSrc` type.");this.#Ie=t}}const ur=1,pr=2,fr=1,gr=2,mr=3,br=4,vr=5,yr=6,wr=7,Ar=8;function Er(t){switch(t instanceof Error||"object"===typeof t&&null!==t||on('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new vn(t.message);case"MissingPDFException":return new gn(t.message);case"PasswordException":return new un(t.message,t.code);case"UnexpectedResponseException":return new mn(t.message,t.status);case"UnknownErrorException":return new pn(t.message,t.details);default:return new pn(t.message,t.toString())}}class xr{constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void this.#Le(e);if(e.callback){const t=e.callbackId,i=this.callbackCapabilities[t];if(!i)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],e.callback===ur)i.resolve(e.data);else{if(e.callback!==pr)throw new Error("Unexpected callback case");i.reject(Er(e.reason))}return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,s=e.sourceName;new Promise((function(t){t(n(e.data))})).then((function(n){i.postMessage({sourceName:t,targetName:s,callback:ur,callbackId:e.callbackId,data:n})}),(function(n){i.postMessage({sourceName:t,targetName:s,callback:pr,callbackId:e.callbackId,reason:Er(n)})}))}else e.streamId?this.#De(e):n(e.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const n=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[n]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},i)}catch(r){s.reject(r)}return s.promise}sendWithStream(t,e,i,n){const s=this.streamId++,r=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:i=>{const l=Promise.withResolvers();return this.streamControllers[s]={controller:i,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:r,targetName:a,action:t,streamId:s,data:e,desiredSize:i.desiredSize},n),l.promise},pull:t=>{const e=Promise.withResolvers();return this.streamControllers[s].pullCall=e,o.postMessage({sourceName:r,targetName:a,stream:yr,streamId:s,desiredSize:t.desiredSize}),e.promise},cancel:t=>{ln(t instanceof Error,"cancel must have a valid reason");const e=Promise.withResolvers();return this.streamControllers[s].cancelCall=e,this.streamControllers[s].isClosed=!0,o.postMessage({sourceName:r,targetName:a,stream:fr,streamId:s,reason:Er(t)}),e.promise}},i)}#De(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,s=this.comObj,r=this,a=this.actionHandler[t.action],o={enqueue(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=r,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:n,stream:br,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:mr,streamId:e}),delete r.streamSinks[e])},error(t){ln(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:vr,streamId:e,reason:Er(t)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[e]=o,new Promise((function(e){e(a(t.data,o))})).then((function(){s.postMessage({sourceName:i,targetName:n,stream:Ar,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:i,targetName:n,stream:Ar,streamId:e,reason:Er(t)})}))}#Le(t){const e=t.streamId,i=this.sourceName,n=t.sourceName,s=this.comObj,r=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Ar:t.success?r.startCall.resolve():r.startCall.reject(Er(t.reason));break;case wr:t.success?r.pullCall.resolve():r.pullCall.reject(Er(t.reason));break;case yr:if(!a){s.postMessage({sourceName:i,targetName:n,stream:wr,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,new Promise((function(t){t(a.onPull?.())})).then((function(){s.postMessage({sourceName:i,targetName:n,stream:wr,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:i,targetName:n,stream:wr,streamId:e,reason:Er(t)})}));break;case br:if(ln(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case mr:if(ln(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),this.#Oe(r,e);break;case vr:ln(r,"error should have stream controller"),r.controller.error(Er(t.reason)),this.#Oe(r,e);break;case gr:t.success?r.cancelCall.resolve():r.cancelCall.reject(Er(t.reason)),this.#Oe(r,e);break;case fr:if(!a)break;new Promise((function(e){e(a.onCancel?.(Er(t.reason)))})).then((function(){s.postMessage({sourceName:i,targetName:n,stream:gr,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:i,targetName:n,stream:gr,streamId:e,reason:Er(t)})})),a.sinkCapability.reject(Er(t.reason)),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#Oe(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}class _r{#Fe;#Ne;constructor(t){let{parsedData:e,rawData:i}=t;this.#Fe=e,this.#Ne=i}getRaw(){return this.#Ne}get(t){return this.#Fe.get(t)??null}getAll(){return An(this.#Fe)}has(t){return this.#Fe.has(t)}}const Sr=Symbol("INTERNAL");class Cr{#Be=!1;#je=!1;#Ue=!1;#ze=!0;constructor(t,e){let{name:i,intent:n,usage:s}=e;this.#Be=!!(t&di),this.#je=!!(t&ui),this.name=i,this.intent=n,this.usage=s}get visible(){if(this.#Ue)return this.#ze;if(!this.#ze)return!1;const{print:t,view:e}=this.usage;return this.#Be?"OFF"!==e?.viewState:!this.#je||"OFF"!==t?.printState}_setVisible(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t!==Sr&&on("Internal method `_setVisible` called."),this.#Ue=i,this.#ze=e}}class Tr{#He=null;#Ge=(()=>new Map)();#$e=null;#Ve=null;constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:di;if(this.renderingIntent=e,this.name=null,this.creator=null,null!==t){this.name=t.name,this.creator=t.creator,this.#Ve=t.order;for(const i of t.groups)this.#Ge.set(i.id,new Cr(e,i));if("OFF"===t.baseState)for(const t of this.#Ge.values())t._setVisible(Sr,!1);for(const e of t.on)this.#Ge.get(e)._setVisible(Sr,!0);for(const e of t.off)this.#Ge.get(e)._setVisible(Sr,!1);this.#$e=this.getHash()}}#We(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let n=1;n<e;n++){const e=t[n];let s;if(Array.isArray(e))s=this.#We(e);else{if(!this.#Ge.has(e))return an(`Optional content group not found: ${e}`),!0;s=this.#Ge.get(e).visible}switch(i){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===i}isVisible(t){if(0===this.#Ge.size)return!0;if(!t)return rn("Optional content group not defined."),!0;if("OCG"===t.type)return this.#Ge.has(t.id)?this.#Ge.get(t.id).visible:(an(`Optional content group not found: ${t.id}`),!0);if("OCMD"===t.type){if(t.expression)return this.#We(t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!this.#Ge.has(e))return an(`Optional content group not found: ${e}`),!0;if(this.#Ge.get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!this.#Ge.has(e))return an(`Optional content group not found: ${e}`),!0;if(!this.#Ge.get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!this.#Ge.has(e))return an(`Optional content group not found: ${e}`),!0;if(!this.#Ge.get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!this.#Ge.has(e))return an(`Optional content group not found: ${e}`),!0;if(this.#Ge.get(e).visible)return!1}return!0}return an(`Unknown optional content policy ${t.policy}.`),!0}return an(`Unknown group type ${t.type}.`),!0}setVisibility(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.#Ge.get(t);i?(i._setVisible(Sr,!!e,!0),this.#He=null):an(`Optional content group not found: ${t}`)}setOCGState(t){let e,{state:i,preserveRB:n}=t;for(const s of i){switch(s){case"ON":case"OFF":case"Toggle":e=s;continue}const t=this.#Ge.get(s);if(t)switch(e){case"ON":t._setVisible(Sr,!0);break;case"OFF":t._setVisible(Sr,!1);break;case"Toggle":t._setVisible(Sr,!t.visible)}}this.#He=null}get hasInitialVisibility(){return null===this.#$e||this.getHash()===this.#$e}getOrder(){return this.#Ge.size?this.#Ve?this.#Ve.slice():[...this.#Ge.keys()]:null}getGroups(){return this.#Ge.size>0?An(this.#Ge):null}getGroup(t){return this.#Ge.get(t)||null}getHash(){if(null!==this.#He)return this.#He;const t=new Ts;for(const[e,i]of this.#Ge)t.update(`${e}:${i.visible}`);return this.#He=t.hexdigest()}}class kr{constructor(t,e){let{disableRange:i=!1,disableStream:n=!1}=e;ln(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,r?.length>0){const t=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!i,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})})),t.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})})),t.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})})),t.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),t.transportReady()}_onReceiveData(t){let{begin:e,chunk:i}=t;const n=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(void 0===e)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{ln(this._rangeReaders.some((function(t){return t._begin===e&&(t._enqueue(n),!0)})),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){void 0===t.total?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ln(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Pr(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Rr(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class Pr{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=t,this._done=i||!1,this._filename=Zn(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunks.push(t);this._loaded+=t.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Rr{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Mr(t){let{getResponseHeader:e,isHttp:i,rangeChunkSize:n,disableRange:s}=t;const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(e("Content-Length"),10);if(!Number.isInteger(a))return r;if(r.suggestedLength=a,a<=2*n)return r;if(s||!i)return r;if("bytes"!==e("Accept-Ranges"))return r;return"identity"!==(e("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r}function Ir(t){const e=t("Content-Disposition");if(e){let t=function(t){let e=!0,i=n("filename\\*","i").exec(t);if(i){i=i[1];let t=a(i);return t=unescape(t),t=o(t),t=l(t),r(t)}if(i=function(t){const e=[];let i;const s=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(i=s.exec(t));){let[,t,n,s]=i;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[n,s]}const r=[];for(let n=0;n<e.length&&n in e;++n){let[t,i]=e[n];i=a(i),t&&(i=unescape(i),0===n&&(i=o(i))),r.push(i)}return r.join("")}(t),i)return r(l(i));if(i=n("filename","i").exec(t),i){i=i[1];let t=a(i);return t=l(t),r(t)}function n(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function s(t,i){if(t){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const n=new TextDecoder(t,{fatal:!0}),s=wn(i);i=n.decode(s),e=!1}catch{}}return i}function r(t){return e&&/[\x80-\xff]/.test(t)&&(t=s("utf-8",t),e&&(t=s("iso-8859-1",t))),t}function a(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const i=e[t].indexOf('"');-1!==i&&(e[t]=e[t].slice(0,i),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function o(t){const e=t.indexOf("'");return-1===e?t:s(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function l(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,i,n){if("q"===i||"Q"===i)return s(e,n=(n=n.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{n=atob(n)}catch{}return s(e,n)}))}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Zn(t))return t}return null}function Lr(t,e){return 404===t||0===t&&e.startsWith("file:")?new gn('Missing PDF "'+e+'".'):new mn(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)}function Dr(t){return 200===t||206===t}function Or(t,e,i){return{method:"GET",headers:t,signal:i.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Fr(t){const e=new Headers;for(const i in t){const n=t[i];void 0!==n&&e.append(i,n)}return e}function Nr(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(an(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class Br{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ln(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new jr(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Ur(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class jr{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=Fr(this._stream.httpHeaders);const i=e.url;fetch(i,Or(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!Dr(t.status))throw Lr(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const e=e=>t.headers.get(e),{allowRangeRequests:n,suggestedLength:s}=Mr({getResponseHeader:e,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=n,this._contentLength=s||this._contentLength,this._filename=Ir(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new vn("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Nr(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Ur{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController,this._headers=Fr(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${i-1}`);const s=n.url;fetch(s,Or(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!Dr(t.status))throw Lr(t.status,s);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Nr(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class zr{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){const n={begin:t,end:e};for(const s in i)n[s]=i[s];return this.request(n)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const s in this.httpHeaders){const t=this.httpHeaders[s];void 0!==t&&e.setRequestHeader(s,t)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=206):n.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(i){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==n.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===n.status&&this.isHttp)return void i.onError?.(n.status);const s=n.status||200;if(!(200===s&&206===i.expectedStatus)&&s!==i.expectedStatus)return void i.onError?.(n.status);const r=function(t){const e=t.response;return"string"!==typeof e?e:wn(e).buffer}(n);if(206===s){const t=n.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);i.onDone({begin:parseInt(e[1],10),chunk:r})}else r?i.onDone({begin:0,chunk:r}):i.onError?.(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Hr{constructor(t){this._source=t,this._manager=new zr(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ln(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Gr(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new $r(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Gr{constructor(t,e){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=t=>e.getResponseHeader(t),{allowRangeRequests:n,suggestedLength:s}=Mr({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=Ir(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t)if(this._requests.length>0){this._requests.shift().resolve({value:t.chunk,done:!1})}else this._cachedChunks.push(t.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Lr(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class $r{constructor(t,e,i){this._manager=t;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunk=e;this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=Lr(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Vr=/^file:\/\/\/[a-zA-Z]:\//;class Wr{constructor(t){this.source=t,this.url=function(t){const e=Os.get("url"),i=e.parse(t);return"file:"===i.protocol||i.host?i:/^[a-z]:[/\\]/i.test(t)?e.parse(`file:///${t}`):(i.host||(i.protocol="file:"),i)}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ln(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Zr(this):new Xr(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new Qr(this,t,e):new Jr(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class qr{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new vn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Kr{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,this.onProgress?.({loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function Yr(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class Xr extends qr{constructor(t){super(t);const e=e=>{if(404===e.statusCode){const t=new gn(`Missing PDF "${this._url}".`);return this._storedError=t,void this._headersCapability.reject(t)}this._headersCapability.resolve(),this._setReadableStream(e);const i=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:n,suggestedLength:s}=Mr({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=n,this._contentLength=s||this._contentLength,this._filename=Ir(i)};if(this._request=null,"http:"===this._url.protocol){const i=Os.get("http");this._request=i.request(Yr(this._url,t.httpHeaders),e)}else{const i=Os.get("https");this._request=i.request(Yr(this._url,t.httpHeaders),e)}this._request.on("error",(t=>{this._storedError=t,this._headersCapability.reject(t)})),this._request.end()}}class Jr extends Kr{constructor(t,e,i){super(t),this._httpHeaders={};for(const s in t.httpHeaders){const e=t.httpHeaders[s];void 0!==e&&(this._httpHeaders[s]=e)}this._httpHeaders.Range=`bytes=${e}-${i-1}`;const n=t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new gn(`Missing PDF "${this._url}".`);this._storedError=t}};if(this._request=null,"http:"===this._url.protocol){const t=Os.get("http");this._request=t.request(Yr(this._url,this._httpHeaders),n)}else{const t=Os.get("https");this._request=t.request(Yr(this._url,this._httpHeaders),n)}this._request.on("error",(t=>{this._storedError=t})),this._request.end()}}class Zr extends qr{constructor(t){super(t);let e=decodeURIComponent(this._url.path);Vr.test(this._url.href)&&(e=e.replace(/^\//,""));const i=Os.get("fs");i.promises.lstat(e).then((t=>{this._contentLength=t.size,this._setReadableStream(i.createReadStream(e)),this._headersCapability.resolve()}),(t=>{"ENOENT"===t.code&&(t=new gn(`Missing PDF "${e}".`)),this._storedError=t,this._headersCapability.reject(t)}))}}class Qr extends Kr{constructor(t,e,i){super(t);let n=decodeURIComponent(this._url.path);Vr.test(this._url.href)&&(n=n.replace(/^\//,""));const s=Os.get("fs");this._setReadableStream(s.createReadStream(n,{start:e,end:i-1}))}}const ta=30;class ea{#qe=(()=>Promise.withResolvers())();#mt=null;#Ke=!1;#Ye=(()=>!!globalThis.FontInspector?.enabled)();#Xe=null;#Je=null;#Ze=0;#Qe=0;#ti=null;#ei=null;#ii=0;#ni=0;#si=(()=>Object.create(null))();#ri=[];#ai=null;#oi=[];#li=(()=>new WeakMap)();#hi=null;static#ci=(()=>new Map)();static#di=(()=>new Map)();static#ui=(()=>new Set)();constructor(t){let{textContentSource:e,container:i,viewport:n}=t;if(e instanceof ReadableStream)this.#ai=e;else{if("object"!==typeof e)throw new Error('No "textContentSource" parameter specified.');this.#ai=new ReadableStream({start(t){t.enqueue(e),t.close()}})}this.#mt=this.#ei=i,this.#ni=n.scale*(globalThis.devicePixelRatio||1),this.#ii=n.rotation,this.#Je={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:r,pageX:a,pageY:o}=n.rawDims;this.#hi=[1,0,0,-1,-a,o+r],this.#Qe=s,this.#Ze=r,ds(i,n),this.#qe.promise.catch((()=>{})).then((()=>{ea.#ui.delete(this),this.#Je=null,this.#si=null}))}render(){const t=()=>{this.#ti.read().then((e=>{let{value:i,done:n}=e;n?this.#qe.resolve():(this.#Xe??=i.lang,Object.assign(this.#si,i.styles),this.#pi(i.items),t())}),this.#qe.reject)};return this.#ti=this.#ai.getReader(),ea.#ui.add(this),t(),this.#qe.promise}update(t){let{viewport:e,onBefore:i=null}=t;const n=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==this.#ii&&(i?.(),this.#ii=s,ds(this.#ei,{rotation:s})),n!==this.#ni){i?.(),this.#ni=n;const t={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:ea.#fi(this.#Xe)};for(const e of this.#oi)t.properties=this.#li.get(e),t.div=e,this.#gi(t)}}cancel(){const t=new vn("TextLayer task cancelled.");this.#ti?.cancel(t).catch((()=>{})),this.#ti=null,this.#qe.reject(t)}get textDivs(){return this.#oi}get textContentItemsStr(){return this.#ri}#pi(t){if(this.#Ke)return;this.#Je.ctx||=ea.#fi(this.#Xe);const e=this.#oi,i=this.#ri;for(const n of t){if(e.length>1e5)return an("Ignoring additional textDivs for performance reasons."),void(this.#Ke=!0);if(void 0!==n.str)i.push(n.str),this.#mi(n);else if("beginMarkedContentProps"===n.type||"beginMarkedContent"===n.type){const t=this.#mt;this.#mt=document.createElement("span"),this.#mt.classList.add("markedContent"),null!==n.id&&this.#mt.setAttribute("id",`${n.id}`),t.append(this.#mt)}else"endMarkedContent"===n.type&&(this.#mt=this.#mt.parentNode)}}#mi(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};this.#oi.push(e);const n=_n.transform(this.#hi,t.transform);let s=Math.atan2(n[1],n[0]);const r=this.#si[t.fontName];r.vertical&&(s+=Math.PI/2);const a=this.#Ye&&r.fontSubstitution||r.fontFamily,o=Math.hypot(n[2],n[3]),l=o*ea.#bi(a,this.#Xe);let h,c;0===s?(h=n[4],c=n[5]-l):(h=n[4]+l*Math.sin(s),c=n[5]-l*Math.cos(s));const d="calc(var(--scale-factor)*",u=e.style;this.#mt===this.#ei?(u.left=`${(100*h/this.#Qe).toFixed(2)}%`,u.top=`${(100*c/this.#Ze).toFixed(2)}%`):(u.left=`${d}${h.toFixed(2)}px)`,u.top=`${d}${c.toFixed(2)}px)`),u.fontSize=`${d}${o.toFixed(2)}px)`,u.fontFamily=a,i.fontSize=o,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#Ye&&(e.dataset.fontName=r.fontSubstitutionLoadedName||t.fontName),0!==s&&(i.angle=s*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),i=Math.abs(t.transform[3]);e!==i&&Math.max(e,i)/Math.min(e,i)>1.5&&(p=!0)}if(p&&(i.canvasWidth=r.vertical?t.height:t.width),this.#li.set(e,i),this.#Je.div=e,this.#Je.properties=i,this.#gi(this.#Je),i.hasText&&this.#mt.append(e),i.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),this.#mt.append(t)}}#gi(t){const{div:e,properties:i,ctx:n,prevFontSize:s,prevFontFamily:r}=t,{style:a}=e;let o="";if(0!==i.canvasWidth&&i.hasText){const{fontFamily:l}=a,{canvasWidth:h,fontSize:c}=i;s===c&&r===l||(n.font=`${c*this.#ni}px ${l}`,t.prevFontSize=c,t.prevFontFamily=l);const{width:d}=n.measureText(e.textContent);d>0&&(o=`scaleX(${h*this.#ni/d})`)}0!==i.angle&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(a.transform=o)}static cleanup(){if(!(this.#ui.size>0)){this.#ci.clear();for(const{canvas:t}of this.#di.values())t.remove();this.#di.clear()}}static#fi(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.#di.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1}),this.#di.set(t,e)}return e}static#bi(t,e){const i=this.#ci.get(t);if(i)return i;const n=this.#fi(e),s=n.font;n.canvas.width=n.canvas.height=ta,n.font=`30px ${t}`;const r=n.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const e=a/(a+o);return this.#ci.set(t,e),n.canvas.width=n.canvas.height=0,n.font=s,e}n.strokeStyle="red",n.clearRect(0,0,ta,ta),n.strokeText("g",0,0);let l=n.getImageData(0,0,ta,ta).data;o=0;for(let c=l.length-1-3;c>=0;c-=4)if(l[c]>0){o=Math.ceil(c/4/ta);break}n.clearRect(0,0,ta,ta),n.strokeText("A",0,ta),l=n.getImageData(0,0,ta,ta).data,a=0;for(let c=0,d=l.length;c<d;c+=4)if(l[c]>0){a=ta-Math.floor(c/4/ta);break}n.canvas.width=n.canvas.height=0,n.font=s;const h=a?a/(a+o):.8;return this.#ci.set(t,h),h}}function ia(){ss("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:t,container:e,viewport:i,...n}=arguments[0],s=Object.keys(n);s.length>0&&an("Ignoring `renderTextLayer` parameters: "+s.join(", "));const r=new ea({textContentSource:t,container:e,viewport:i}),{textDivs:a,textContentItemsStr:o}=r;return{promise:r.render(),textDivs:a,textContentItemsStr:o}}function na(){ss("`updateTextLayer`, please use `TextLayer` instead.")}class sa{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};return function t(i){if(!i)return;let n=null;const s=i.name;if("#text"===s)n=i.value;else{if(!sa.shouldBuildText(s))return;i?.attributes?.textContent?n=i.attributes.textContent:i.value&&(n=i.value)}if(null!==n&&e.push({str:n}),i.children)for(const e of i.children)t(e)}(t),i}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}const ra=65536,aa=ai?class extends jn{_createCanvas(t,e){return Os.get("canvas").createCanvas(t,e)}}:class extends jn{constructor(){let{ownerDocument:t=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}},oa=ai?class extends Un{_fetchData(t,e){return Fs(t).then((t=>({cMapData:t,compressionType:e})))}}:Wn,la=ai?class extends Bn{}:class extends Bn{#vi;#yi;#wi;#Ai;#Ei;#m=0;constructor(){let{docId:t,ownerDocument:e=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.#wi=t,this.#Ai=e}get#v(){return this.#vi||=new Map}get#xi(){return this.#Ei||=new Map}get#_i(){if(!this.#yi){const t=this.#Ai.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#Ai.createElementNS(Gn,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#yi=this.#Ai.createElementNS(Gn,"defs"),t.append(i),i.append(this.#yi),this.#Ai.body.append(t)}return this.#yi}#Si(t){if(1===t.length){const e=t[0],i=new Array(256);for(let t=0;t<256;t++)i[t]=e[t]/255;const n=i.join(",");return[n,n,n]}const[e,i,n]=t,s=new Array(256),r=new Array(256),a=new Array(256);for(let o=0;o<256;o++)s[o]=e[o]/255,r[o]=i[o]/255,a[o]=n[o]/255;return[s.join(","),r.join(","),a.join(",")]}addFilter(t){if(!t)return"none";let e=this.#v.get(t);if(e)return e;const[i,n,s]=this.#Si(t),r=1===t.length?i:`${i}${n}${s}`;if(e=this.#v.get(r),e)return this.#v.set(t,e),e;const a=`g_${this.#wi}_transfer_map_${this.#m++}`,o=`url(#${a})`;this.#v.set(t,o),this.#v.set(r,o);const l=this.#Ci(a);return this.#Ti(i,n,s,l),o}addHCMFilter(t,e){const i=`${t}-${e}`,n="base";let s=this.#xi.get(n);if(s?.key===i)return s.url;if(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},this.#xi.set(n,s)),!t||!e)return s.url;const r=this.#ki(t);t=_n.makeHexColor(...r);const a=this.#ki(e);if(e=_n.makeHexColor(...a),this.#_i.style.color="","#000000"===t&&"#ffffff"===e||t===e)return s.url;const o=new Array(256);for(let u=0;u<=255;u++){const t=u/255;o[u]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}const l=o.join(","),h=`g_${this.#wi}_hcm_filter`,c=s.filter=this.#Ci(h);this.#Ti(l,l,l,c),this.#Pi(c);const d=(t,e)=>{const i=r[t]/255,n=a[t]/255,s=new Array(e+1);for(let r=0;r<=e;r++)s[r]=i+r/e*(n-i);return s.join(",")};return this.#Ti(d(0,5),d(1,5),d(2,5),c),s.url=`url(#${h})`,s.url}addAlphaFilter(t){let e=this.#v.get(t);if(e)return e;const[i]=this.#Si([t]),n=`alpha_${i}`;if(e=this.#v.get(n),e)return this.#v.set(t,e),e;const s=`g_${this.#wi}_alpha_map_${this.#m++}`,r=`url(#${s})`;this.#v.set(t,r),this.#v.set(n,r);const a=this.#Ci(s);return this.#Ri(i,a),r}addLuminosityFilter(t){let e,i,n=this.#v.get(t||"luminosity");if(n)return n;if(t?([e]=this.#Si([t]),i=`luminosity_${e}`):i="luminosity",n=this.#v.get(i),n)return this.#v.set(t,n),n;const s=`g_${this.#wi}_luminosity_map_${this.#m++}`,r=`url(#${s})`;this.#v.set(t,r),this.#v.set(i,r);const a=this.#Ci(s);return this.#Mi(a),t&&this.#Ri(e,a),r}addHighlightHCMFilter(t,e,i,n,s){const r=`${e}-${i}-${n}-${s}`;let a=this.#xi.get(t);if(a?.key===r)return a.url;if(a?(a.filter?.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},this.#xi.set(t,a)),!e||!i)return a.url;const[o,l]=[e,i].map(this.#ki.bind(this));let h=Math.round(.2126*o[0]+.7152*o[1]+.0722*o[2]),c=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),[d,u]=[n,s].map(this.#ki.bind(this));c<h&&([h,c,d,u]=[c,h,u,d]),this.#_i.style.color="";const p=(t,e,i)=>{const n=new Array(256),s=(c-h)/i,r=t/255,a=(e-t)/(255*i);let o=0;for(let l=0;l<=i;l++){const t=Math.round(h+l*s),e=r+l*a;for(let i=o;i<=t;i++)n[i]=e;o=t+1}for(let l=o;l<256;l++)n[l]=n[o-1];return n.join(",")},f=`g_${this.#wi}_hcm_${t}_filter`,g=a.filter=this.#Ci(f);return this.#Pi(g),this.#Ti(p(d[0],u[0],5),p(d[1],u[1],5),p(d[2],u[2],5),g),a.url=`url(#${f})`,a.url}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&0!==this.#xi.size||(this.#yi&&(this.#yi.parentNode.parentNode.remove(),this.#yi=null),this.#vi&&(this.#vi.clear(),this.#vi=null),this.#m=0)}#Mi(t){const e=this.#Ai.createElementNS(Gn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#Pi(t){const e=this.#Ai.createElementNS(Gn,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#Ci(t){const e=this.#Ai.createElementNS(Gn,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#_i.append(e),e}#Ii(t,e,i){const n=this.#Ai.createElementNS(Gn,e);n.setAttribute("type","discrete"),n.setAttribute("tableValues",i),t.append(n)}#Ti(t,e,i,n){const s=this.#Ai.createElementNS(Gn,"feComponentTransfer");n.append(s),this.#Ii(s,"feFuncR",t),this.#Ii(s,"feFuncG",e),this.#Ii(s,"feFuncB",i)}#Ri(t,e){const i=this.#Ai.createElementNS(Gn,"feComponentTransfer");e.append(i),this.#Ii(i,"feFuncA",t)}#ki(t){return this.#_i.style.color=t,ls(getComputedStyle(this.#_i).getPropertyValue("color"))}},ha=ai?class extends zn{_fetchData(t){return Fs(t)}}:qn;function ca(t){if("string"===typeof t||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t}),"object"!==typeof t)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new ua,{docId:i}=e,n=t.url?function(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(ai&&"string"===typeof t)return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(t.url):null,s=t.data?function(t){if(ai&&"undefined"!==typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"===typeof t)return wn(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||"object"===typeof t&&!isNaN(t?.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(t.data):null,r=t.httpHeaders||null,a=!0===t.withCredentials,o=t.password??null,l=t.range instanceof pa?t.range:null,h=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:ra;let c=t.worker instanceof va?t.worker:null;const d=t.verbosity,u="string"!==typeof t.docBaseUrl||Jn(t.docBaseUrl)?null:t.docBaseUrl,p="string"===typeof t.cMapUrl?t.cMapUrl:null,f=!1!==t.cMapPacked,g=t.CMapReaderFactory||oa,m="string"===typeof t.standardFontDataUrl?t.standardFontDataUrl:null,b=t.StandardFontDataFactory||ha,v=!0!==t.stopAtErrors,y=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,w=!1!==t.isEvalSupported,A="boolean"===typeof t.isOffscreenCanvasSupported?t.isOffscreenCanvasSupported:!ai,E=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,x="boolean"===typeof t.disableFontFace?t.disableFontFace:ai,_=!0===t.fontExtraProperties,S=!0===t.enableXfa,C=t.ownerDocument||globalThis.document,T=!0===t.disableRange,k=!0===t.disableStream,P=!0===t.disableAutoFetch,R=!0===t.pdfBug,M=l?l.length:t.length??NaN,I="boolean"===typeof t.useSystemFonts?t.useSystemFonts:!ai&&!x,L="boolean"===typeof t.useWorkerFetch?t.useWorkerFetch:g===Wn&&b===qn&&p&&m&&is(p,document.baseURI)&&is(m,document.baseURI),D=t.canvasFactory||new aa({ownerDocument:C}),O=t.filterFactory||new la({docId:i,ownerDocument:C});nn(d);const F={canvasFactory:D,filterFactory:O};if(L||(F.cMapReaderFactory=new g({baseUrl:p,isCompressed:f}),F.standardFontDataFactory=new b({baseUrl:m})),!c){const t={verbosity:d,port:dr.workerPort};c=t.port?va.fromPort(t):new va(t),e._worker=c}const N={docId:i,apiVersion:"4.3.136",data:s,password:o,disableAutoFetch:P,rangeChunkSize:h,length:M,docBaseUrl:u,enableXfa:S,evaluatorOptions:{maxImageSize:y,disableFontFace:x,ignoreErrors:v,isEvalSupported:w,isOffscreenCanvasSupported:A,canvasMaxAreaInBytes:E,fontExtraProperties:_,useSystemFonts:I,cMapUrl:L?p:null,standardFontDataUrl:L?m:null}},B={disableFontFace:x,fontExtraProperties:_,ownerDocument:C,pdfBug:R,styleElement:null,loadingParams:{disableAutoFetch:P,enableXfa:S}};return c.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const t=c.messageHandler.sendWithPromise("GetDocRequest",N,s?[s.buffer]:null);let o;if(l)o=new kr(l,{disableRange:T,disableStream:k});else if(!s){o=(t=>{if(ai){return function(){return"undefined"!==typeof fetch&&"undefined"!==typeof Response&&"body"in Response.prototype}()&&is(t.url)?new Br(t):new Wr(t)}return is(t.url)?new Br(t):new Hr(t)})({url:n,length:M,httpHeaders:r,withCredentials:a,rangeChunkSize:h,disableRange:T,disableStream:k})}return t.then((t=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const n=new xr(i,t,c.port),s=new ya(n,e,o,B,F);e._transport=s,n.send("Ready",null)}))})).catch(e._capability.reject),e}function da(t){return"object"===typeof t&&Number.isInteger(t?.num)&&t.num>=0&&Number.isInteger(t?.gen)&&t.gen>=0}class ua{static#wi=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+ua.#wi++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await(this._transport?.destroy())}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class pa{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const i of this._progressListeners)i(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){on("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class fa{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return cn(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:t="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class ga{#Li=null;#Di=!1;constructor(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=n?new es:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new Aa,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:s=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Yn({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:s})}getAnnotations(){let{intent:t="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return cn(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render(t){let{canvasContext:e,viewport:i,intent:n="display",annotationMode:s=bi.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:h=null,printAnnotationStorage:c=null}=t;this._stats?.time("Overall");const d=this._transport.getRenderingIntent(n,s,c),{renderingIntent:u,cacheKey:p}=d;this.#Di=!1,this.#Oi(),o||=this._transport.getOptionalContentConfig(u);let f=this._intentStates.get(p);f||(f=Object.create(null),this._intentStates.set(p,f)),f.streamReaderCancelTimeout&&(clearTimeout(f.streamReaderCancelTimeout),f.streamReaderCancelTimeout=null);const g=!!(u&ui);f.displayReadyCapability||(f.displayReadyCapability=Promise.withResolvers(),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(d));const m=t=>{f.renderTasks.delete(b),(this._maybeCleanupAfterRender||g)&&(this.#Di=!0),this.#Fi(!g),t?(b.capability.reject(t),this._abortOperatorList({intentState:f,reason:t instanceof Error?t:new Error(t)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new xa({callback:m,params:{canvasContext:e,viewport:i,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:f.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:h});(f.renderTasks||=new Set).add(b);const v=b.task;return Promise.all([f.displayReadyCapability.promise,o]).then((t=>{let[e,i]=t;if(this.destroyed)m();else{if(this._stats?.time("Rendering"),!(i.renderingIntent&u))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:e,optionalContentConfig:i}),b.operatorListChanged()}})).catch(m),v}getOperatorList(){let{intent:t="display",annotationMode:e=bi.ENABLE,printAnnotationStorage:i=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._transport.getRenderingIntent(t,e,i,!0);let s,r=this._intentStates.get(n.cacheKey);return r||(r=Object.create(null),this._intentStates.set(n.cacheKey,r)),r.opListReadCapability||(s=Object.create(null),s.operatorListChanged=function(){r.operatorList.lastChunk&&(r.opListReadCapability.resolve(r.operatorList),r.renderTasks.delete(s))},r.opListReadCapability=Promise.withResolvers(),(r.renderTasks||=new Set).add(s),r.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(n)),r.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:t=!1,disableNormalization:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((t=>sa.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,i){const n=e.getReader(),s={items:[],styles:Object.create(null),lang:null};!function e(){n.read().then((function(i){let{value:n,done:r}=i;r?t(s):(s.lang??=n.lang,Object.assign(s.styles,n.styles),s.items.push(...n.items),e())}),i)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#Di=!1,this.#Oi(),Promise.all(t)}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.#Di=!0;const e=this.#Fi(!1);return t&&e&&(this._stats&&=new es),e}#Fi(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.#Oi(),!this.#Di||this.destroyed)return!1;if(t)return this.#Li=setTimeout((()=>{this.#Li=null,this.#Fi(!1)}),5e3),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#Di=!1,!0}#Oi(){this.#Li&&(clearTimeout(this.#Li),this.#Li=null)}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,n=t.length;i<n;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#Fi(!0)}_pumpOperatorList(t){let{renderingIntent:e,cacheKey:i,annotationStorageSerializable:n}=t;const{map:s,transfer:r}=n,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:i,annotationStorage:s},r).getReader(),o=this._intentStates.get(i);o.streamReader=a;const l=()=>{a.read().then((t=>{let{value:e,done:i}=t;i?o.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,o),l())}),(t=>{if(o.streamReader=null,!this._transport.destroyed){if(o.operatorList){o.operatorList.lastChunk=!0;for(const t of o.renderTasks)t.operatorListChanged();this.#Fi(!0)}if(o.displayReadyCapability)o.displayReadyCapability.reject(t);else{if(!o.opListReadCapability)throw t;o.opListReadCapability.reject(t)}}}))};l()}_abortOperatorList(t){let{intentState:e,reason:i,force:n=!1}=t;if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(i instanceof Xn){let t=100;return i.extraDelay>0&&i.extraDelay<1e3&&(t+=i.extraDelay),void(e.streamReaderCancelTimeout=setTimeout((()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:i,force:!0})}),t))}}if(e.streamReader.cancel(new vn(i.message)).catch((()=>{})),e.streamReader=null,!this._transport.destroyed){for(const[t,i]of this._intentStates)if(i===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}}class ma{#Ni=(()=>new Set)();#Bi=(()=>Promise.resolve())();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#Bi.then((()=>{for(const t of this.#Ni)t.call(this,i)}))}addEventListener(t,e){this.#Ni.add(e)}removeEventListener(t,e){this.#Ni.delete(e)}terminate(){this.#Ni.clear()}}const ba={isWorkerDisabled:!1,fakeWorkerId:0};ai&&(ba.isWorkerDisabled=!0,dr.workerSrc||="./pdf.worker.mjs"),ba.isSameOrigin=function(t,e){let i;try{if(i=new URL(t),!i.origin||"null"===i.origin)return!1}catch{return!1}const n=new URL(e,i);return i.origin===n.origin},ba.createCDNWrapper=function(t){const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};class va{static#ji;constructor(){let{name:t=null,port:e=null,verbosity:i=sn()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if(va.#ji?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");return(va.#ji||=new WeakMap).set(e,this),void this._initializeFromPort(e)}this._initialize()}get promise(){return ai?Promise.all([Os.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new xr("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!ba.isWorkerDisabled&&!va.#Ui){let{workerSrc:t}=va;try{ba.isSameOrigin(window.location.href,t)||(t=ba.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new xr("main","worker",e),n=()=>{e.removeEventListener("error",s),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=()=>{this._webWorker||n()};e.addEventListener("error",s),i.on("test",(t=>{e.removeEventListener("error",s),this.destroyed?n():t?(this._messageHandler=i,this._port=e,this._webWorker=e,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),e.terminate())})),i.on("ready",(t=>{if(e.removeEventListener("error",s),this.destroyed)n();else try{r()}catch{this._setupFakeWorker()}}));const r=()=>{const t=new Uint8Array;i.send("test",t,[t.buffer])};return void r()}catch{rn("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){ba.isWorkerDisabled||(an("Setting up fake worker."),ba.isWorkerDisabled=!0),va._setupFakeWorkerGlobal.then((t=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new ma;this._port=e;const i="fake"+ba.fakeWorkerId++,n=new xr(i+"_worker",i,e);t.setup(n,e);const s=new xr(i,i+"_worker",e);this._messageHandler=s,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})})).catch((t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),va.#ji?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=this.#ji?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new va(t)}static get workerSrc(){if(dr.workerSrc)return dr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#Ui(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return cn(this,"_setupFakeWorkerGlobal",(async()=>{if(this.#Ui)return this.#Ui;return(await import(this.workerSrc)).WorkerMessageHandler})())}}class ya{#zi=(()=>new Map)();#Hi=(()=>new Map)();#Gi=(()=>new Map)();#$i=(()=>new Map)();#Vi=null;constructor(t,e,i,n,s){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Aa,this.fontLoader=new Ms({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#Wi(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=this.#zi.get(t);if(i)return i;const n=this.messageHandler.sendWithPromise(t,e);return this.#zi.set(t,n),n}get annotationStorage(){return cn(this,"annotationStorage",new Ps)}getRenderingIntent(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi.ENABLE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=di,r=ks;switch(t){case"any":s=ci;break;case"display":break;case"print":s=ui;break;default:an(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case bi.DISABLE:s+=gi;break;case bi.ENABLE:break;case bi.ENABLE_FORMS:s+=pi;break;case bi.ENABLE_STORAGE:s+=fi;r=(s&ui&&i instanceof Rs?i:this.annotationStorage).serializable;break;default:an(`getRenderingIntent - invalid annotationMode: ${e}`)}return n&&(s+=mi),{renderingIntent:s,cacheKey:`${s}_${r.hash}`,annotationStorageSerializable:r}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#Vi?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#Hi.values())t.push(i._destroy());this.#Hi.clear(),this.#Gi.clear(),this.#$i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#zi.clear(),this.filterFactory.destroy(),ea.cleanup(),this._networkStream?.cancelAllRequests(new vn("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{ln(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then((function(t){let{value:i,done:n}=t;n?e.close():(ln(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(i),1,[i]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(t=>{const i=Promise.withResolvers(),n=this._fullReader;return n.headersReady.then((()=>{n.isStreamingSupported&&n.isRangeSupported||(this._lastProgress&&e.onProgress?.(this._lastProgress),n.onProgress=t=>{e.onProgress?.({loaded:t.loaded,total:t.total})}),i.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})}),i.reject),i.promise})),t.on("GetRangeReader",((t,e)=>{ln(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(t.begin,t.end);i?(e.onPull=()=>{i.read().then((function(t){let{value:i,done:n}=t;n?e.close():(ln(i instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(i),1,[i]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{i.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}):e.close()})),t.on("GetDoc",(t=>{let{pdfInfo:i}=t;this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new fa(i,this))})),t.on("DocException",(function(t){let i;switch(t.name){case"PasswordException":i=new un(t.message,t.code);break;case"InvalidPDFException":i=new fn(t.message);break;case"MissingPDFException":i=new gn(t.message);break;case"UnexpectedResponseException":i=new mn(t.message,t.status);break;case"UnknownErrorException":i=new pn(t.message,t.details);break;default:on("DocException - expected a valid Error.")}e._capability.reject(i)})),t.on("PasswordRequest",(t=>{if(this.#Vi=Promise.withResolvers(),e.onPassword){const n=t=>{t instanceof Error?this.#Vi.reject(t):this.#Vi.resolve({password:t})};try{e.onPassword(n,t.code)}catch(i){this.#Vi.reject(i)}}else this.#Vi.reject(new un(t.message,t.code));return this.#Vi.promise})),t.on("DataLoaded",(t=>{e.onProgress?.({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(t=>{if(this.destroyed)return;this.#Hi.get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)})),t.on("commonobj",(e=>{let[i,n,s]=e;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(n){case"Font":const{disableFontFace:e,fontExtraProperties:r,pdfBug:a}=this._params;if("error"in s){const t=s.error;an(`Error during font loading: ${t}`),this.commonObjs.resolve(i,t);break}const o=a&&globalThis.FontInspector?.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null,l=new Is(s,{disableFontFace:e,inspectFont:o});this.fontLoader.bind(l).catch((()=>t.sendWithPromise("FontFallback",{id:i}))).finally((()=>{!r&&l.data&&(l.data=null),this.commonObjs.resolve(i,l)}));break;case"CopyLocalImage":const{imageRef:h}=s;ln(h,"The imageRef must be defined.");for(const t of this.#Hi.values())for(const[,e]of t.objs)if(e?.ref===h)return e.dataLen?(this.commonObjs.resolve(i,structuredClone(e)),e.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${n}`)}return null})),t.on("obj",(t=>{let[e,i,n,s]=t;if(this.destroyed)return;const r=this.#Hi.get(i);if(!r.objs.has(e))if(0!==r._intentStates.size)switch(n){case"Image":r.objs.resolve(e,s),s?.dataLen>1e7&&(r._maybeCleanupAfterRender=!0);break;case"Pattern":r.objs.resolve(e,s);break;default:throw new Error(`Got unknown object type ${n}`)}else s?.bitmap?.close()})),t.on("DocProgress",(t=>{this.destroyed||e.onProgress?.({loaded:t.loaded,total:t.total})})),t.on("FetchBuiltInCMap",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),t.on("FetchStandardFontData",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&an("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally((()=>{this.annotationStorage.resetModified()}))}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#Gi.get(e);if(i)return i;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&this.#$i.set(i.refStr,t);const n=new ga(e,i,this,this._params.pdfBug);return this.#Hi.set(e,n),n}));return this.#Gi.set(e,n),n}getPageIndex(t){return da(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#Wi("GetFieldObjects")}hasJSActions(){return this.#Wi("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!==typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#Wi("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#Wi("GetOptionalContentConfig").then((e=>new Tr(e,t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#zi.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then((t=>({info:t[0],metadata:t[1]?new _r(t[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})));return this.#zi.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#Hi.values()){if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`)}this.commonObjs.clear(),t||this.fontLoader.clear(),this.#zi.clear(),this.filterFactory.destroy(!0),ea.cleanup()}}cachedPageNumber(t){if(!da(t))return null;const e=0===t.gen?`${t.num}R`:`${t.num}R${t.gen}`;return this.#$i.get(e)??null}}const wa=Symbol("INITIAL_DATA");class Aa{#qi=(()=>Object.create(null))();#Ki(t){return this.#qi[t]||={...Promise.withResolvers(),data:wa}}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){const i=this.#Ki(t);return i.promise.then((()=>e(i.data))),null}const i=this.#qi[t];if(!i||i.data===wa)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#qi[t];return!!e&&e.data!==wa}resolve(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=this.#Ki(t);i.data=e,i.resolve()}clear(){for(const t in this.#qi){const{data:e}=this.#qi[t];e?.bitmap?.close()}this.#qi=Object.create(null)}*[Symbol.iterator](){for(const t in this.#qi){const{data:e}=this.#qi[t];e!==wa&&(yield[t,e])}}}class Ea{#Yi=null;constructor(t){this.#Yi=t,this.onContinue=null}get promise(){return this.#Yi.capability.promise}cancel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.#Yi.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#Yi.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#Yi;return t.form||t.canvas&&e?.size>0}}class xa{static#Xi=(()=>new WeakSet)();constructor(t){let{callback:e,params:i,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:h,useRequestAnimationFrame:c=!1,pdfBug:d=!1,pageColors:u=null}=t;this.callback=e,this.params=i,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=h,this._pdfBug=d,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===c&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ea(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics(t){let{transparency:e=!1,optionalContentConfig:i}=t;if(this.cancelled)return;if(this._canvas){if(xa.#Xi.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");xa.#Xi.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:r,background:a}=this.params;this.gfx=new cr(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),xa.#Xi.delete(this._canvas),this.callback(t||new Xn(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),xa.#Xi.delete(this._canvas),this.callback())))}}const _a="4.3.136",Sa="0cec64437";function Ca(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function Ta(t){return Math.max(0,Math.min(255,255*t))}class ka{static CMYK_G(t){let[e,i,n,s]=t;return["G",1-Math.min(1,.3*e+.59*n+.11*i+s)]}static G_CMYK(t){let[e]=t;return["CMYK",0,0,0,1-e]}static G_RGB(t){let[e]=t;return["RGB",e,e,e]}static G_rgb(t){let[e]=t;return e=Ta(e),[e,e,e]}static G_HTML(t){let[e]=t;const i=Ca(e);return`#${i}${i}${i}`}static RGB_G(t){let[e,i,n]=t;return["G",.3*e+.59*i+.11*n]}static RGB_rgb(t){return t.map(Ta)}static RGB_HTML(t){return`#${t.map(Ca).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(t){let[e,i,n,s]=t;return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,i+s)]}static CMYK_rgb(t){let[e,i,n,s]=t;return[Ta(1-Math.min(1,e+s)),Ta(1-Math.min(1,n+s)),Ta(1-Math.min(1,i+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK(t){let[e,i,n]=t;const s=1-e,r=1-i,a=1-n;return["CMYK",s,r,a,Math.min(s,r,a)]}}class Pa{static setupStorage(t,e,i,n,s){const r=n.getValue(e,{value:null});switch(i.name){case"textarea":if(null!==r.value&&(t.textContent=r.value),"print"===s)break;t.addEventListener("input",(t=>{n.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(r.value===i.attributes.xfaOn?t.setAttribute("checked",!0):r.value===i.attributes.xfaOff&&t.removeAttribute("checked"),"print"===s)break;t.addEventListener("change",(t=>{n.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==r.value&&t.setAttribute("value",r.value),"print"===s)break;t.addEventListener("input",(t=>{n.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==r.value){t.setAttribute("value",r.value);for(const t of i.children)t.attributes.value===r.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",(t=>{const i=t.target.options,s=-1===i.selectedIndex?"":i[i.selectedIndex].value;n.setValue(e,{value:s})}))}}static setAttributes(t){let{html:e,element:i,storage:n=null,intent:s,linkService:r}=t;const{attributes:a}=i,o=e instanceof HTMLAnchorElement;"radio"===a.type&&(a.name=`${a.name}-${s}`);for(const[l,h]of Object.entries(a))if(null!==h&&void 0!==h)switch(l){case"class":h.length&&e.setAttribute(l,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!o||"href"!==l&&"newWindow"!==l)&&e.setAttribute(l,h)}o&&r.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,i,n)}static render(t){const e=t.annotationStorage,i=t.linkService,n=t.xfaHtml,s=t.intent||"display",r=document.createElement(n.name);n.attributes&&this.setAttributes({html:r,element:n,intent:s,linkService:i});const a="richText"!==s,o=t.div;if(o.append(r),t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;o.style.transform=e}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===n.children.length){if(n.value){const t=document.createTextNode(n.value);r.append(t),a&&sa.shouldBuildText(n.name)&&l.push(t)}return{textDivs:l}}const h=[[n,-1,r]];for(;h.length>0;){const[t,n,r]=h.at(-1);if(n+1===t.children.length){h.pop();continue}const o=t.children[++h.at(-1)[1]];if(null===o)continue;const{name:c}=o;if("#text"===c){const t=document.createTextNode(o.value);l.push(t),r.append(t);continue}const d=o?.attributes?.xmlns?document.createElementNS(o.attributes.xmlns,c):document.createElement(c);if(r.append(d),o.attributes&&this.setAttributes({html:d,element:o,storage:e,intent:s,linkService:i}),o.children?.length>0)h.push([o,-1,d]);else if(o.value){const t=document.createTextNode(o.value);a&&sa.shouldBuildText(c)&&l.push(t),d.append(t)}}for(const c of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))c.setAttribute("readOnly",!0);return{textDivs:l}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Ra=1e3,Ma=new WeakSet;function Ia(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class La{static create(t){switch(t.data.annotationType){case Pi:return new Oa(t);case ki:return new Fa(t);case Vi:switch(t.data.fieldType){case"Tx":return new Ba(t);case"Btn":return t.data.radioButton?new za(t):t.data.checkBox?new Ua(t):new Ha(t);case"Ch":return new Ga(t);case"Sig":return new ja(t)}return new Na(t);case Gi:return new $a(t);case Ri:return new Wa(t);case Mi:return new qa(t);case Ii:return new Ka(t);case Li:return new Ya(t);case Oi:return new Xa(t);case zi:return new Za(t);case Hi:return new Qa(t);case Di:return new Ja(t);case Fi:return new to(t);case Ni:return new eo(t);case Bi:return new io(t);case ji:return new no(t);case Ui:return new so(t);case $i:return new ro(t);default:return new Da(t)}}}class Da{#Ji=null;#Zi=!1;#Qi=null;constructor(t){let{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData(t){let{titleObj:e,contentsObj:i,richText:n}=t;return!!(e?.str||i?.str||n?.str)}get hasPopupData(){return Da._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#Ji||={rect:this.data.rect.slice(0)};const{rect:e}=t;e&&this.#tn(e),this.#Qi?.popup.updateEdited(t)}resetEdited(){this.#Ji&&(this.#tn(this.#Ji.rect),this.#Qi?.popup.resetEdited(),this.#Ji=null)}#tn(t){const{container:{style:e},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:a,pageY:o}}}}=this;i?.splice(0,4,...t);const{width:l,height:h}=Ia(t);e.left=100*(t[0]-a)/s+"%",e.top=100*(r-t[3]+o)/r+"%",0===n?(e.width=100*l/s+"%",e.height=100*h/r+"%"):this.setRotation(n)}_createContainer(t){const{data:e,parent:{page:i,viewport:n}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),this instanceof Na||(s.tabIndex=Ra);const{style:r}=s;if(r.zIndex=this.parent.zIndex++,e.popupRef&&s.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof $a){const{rotation:t}=e;return e.hasOwnCanvas||0===t||this.setRotation(t,s),s}const{width:a,height:o}=Ia(e.rect);if(!t&&e.borderStyle.width>0){r.borderWidth=`${e.borderStyle.width}px`;const t=e.borderStyle.horizontalCornerRadius,i=e.borderStyle.verticalCornerRadius;if(t>0||i>0){const e=`calc(${t}px * var(--scale-factor)) / calc(${i}px * var(--scale-factor))`;r.borderRadius=e}else if(this instanceof za){const t=`calc(${a}px * var(--scale-factor)) / calc(${o}px * var(--scale-factor))`;r.borderRadius=t}switch(e.borderStyle.style){case Wi:r.borderStyle="solid";break;case qi:r.borderStyle="dashed";break;case Ki:an("Unimplemented border style: beveled");break;case Yi:an("Unimplemented border style: inset");break;case Xi:r.borderBottomStyle="solid"}const n=e.borderColor||null;n?(this.#Zi=!0,r.borderColor=_n.makeHexColor(0|n[0],0|n[1],0|n[2])):r.borderWidth=0}const l=_n.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:c,pageX:d,pageY:u}=n.rawDims;r.left=100*(l[0]-d)/h+"%",r.top=100*(l[1]-u)/c+"%";const{rotation:p}=e;return e.hasOwnCanvas||0===p?(r.width=100*a/h+"%",r.height=100*o/c+"%"):this.setRotation(p,s),s}setRotation(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims,{width:s,height:r}=Ia(this.data.rect);let a,o;t%180===0?(a=100*s/i,o=100*r/n):(a=100*r/i,o=100*s/n),e.style.width=`${a}%`,e.style.height=`${o}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(t,e,i)=>{const n=i.detail[t],s=n[0],r=n.slice(1);i.target.style[e]=ka[`${s}_HTML`](r),this.annotationStorage.setValue(this.data.id,{[e]:ka[`${s}_rgb`](r)})};return cn(this,"_commonActions",{display:t=>{const{display:e}=t.detail,i=e%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:1===e||2===e})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:e}=t.detail;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:e,noView:e})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const n of Object.keys(e.detail)){const s=t[n]||i[n];s?.(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[n,s]of Object.entries(e)){const r=i[n];if(r){r({detail:{[n]:s},target:t}),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,n,s]=this.data.rect;if(1===t.length){const[,{x:r,y:a},{x:o,y:l}]=t[0];if(n===r&&s===a&&e===o&&i===l)return}const{style:r}=this.container;let a;if(this.#Zi){const{borderColor:t,borderWidth:e}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${t}" stroke-width="${e}">`],this.container.classList.add("hasBorder")}const o=n-e,l=s-i,{svgFactory:h}=this,c=h.createElement("svg");c.classList.add("quadrilateralsContainer"),c.setAttribute("width",0),c.setAttribute("height",0);const d=h.createElement("defs");c.append(d);const u=h.createElement("clipPath"),p=`clippath_${this.data.id}`;u.setAttribute("id",p),u.setAttribute("clipPathUnits","objectBoundingBox"),d.append(u);for(const[,{x:f,y:g},{x:m,y:b}]of t){const t=h.createElement("rect"),i=(m-e)/o,n=(s-g)/l,r=(f-m)/o,c=(g-b)/l;t.setAttribute("x",i),t.setAttribute("y",n),t.setAttribute("width",r),t.setAttribute("height",c),u.append(t),a?.push(`<rect vector-effect="non-scaling-stroke" x="${i}" y="${n}" width="${r}" height="${c}"/>`)}this.#Zi&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(c),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const i=this.#Qi=new $a({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(i.render())}render(){on("Abstract method `AnnotationElement.render` called")}_getElementsByName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:t,id:s,exportValues:r}of n){if(-1===t)continue;if(s===e)continue;const n="string"===typeof r?r:null,a=document.querySelector(`[data-element-id="${s}"]`);!a||Ma.has(a)?i.push({id:s,exportValue:n,domElement:a}):an(`_getElementsByName - element not allowed: ${s}`)}return i}for(const n of document.getElementsByName(t)){const{exportValue:t}=n,s=n.getAttribute("data-element-id");s!==e&&(Ma.has(n)&&i.push({id:s,exportValue:t,domElement:n}))}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",(()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})}))}}class Oa extends Da{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let n=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),n=!0):t.action?(this._bindNamedAction(i,t.action),n=!0):t.attachment?(this.#en(i,t.attachment,t.attachmentDest),n=!0):t.setOCGState?(this.#in(i,t.setOCGState),n=!0):t.dest?(this._bindLink(i,t.dest),n=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),n=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(i,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(i),this.container}#nn(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&this.#nn()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#nn()}#en(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#nn()}#in(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#nn()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(e.actions)){const s=i.get(n);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}}),!1))}t.onclick||(t.onclick=()=>!1),this.#nn()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#nn(),!this._fieldObjects)return an('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(t.onclick=()=>!1));t.onclick=()=>{i?.();const{fields:t,refs:n,include:s}=e,r=[];if(0!==t.length||0!==n.length){const e=new Set(n);for(const i of t){const t=this._fieldObjects[i]||[];for(const{id:i}of t)e.add(i)}for(const t of Object.values(this._fieldObjects))for(const i of t)e.has(i.id)===s&&r.push(i)}else for(const e of Object.values(this._fieldObjects))r.push(...e);const a=this.annotationStorage,o=[];for(const e of r){const{id:t}=e;switch(o.push(t),e.type){case"text":{const i=e.defaultValue||"";a.setValue(t,{value:i});break}case"checkbox":case"radiobutton":{const i=e.defaultValue===e.exportValues;a.setValue(t,{value:i});break}case"combobox":case"listbox":{const i=e.defaultValue||"";a.setValue(t,{value:i});break}default:continue}const i=document.querySelector(`[data-element-id="${t}"]`);i&&(Ma.has(i)?i.dispatchEvent(new Event("resetform")):an(`_bindResetFormAction - element not allowed: ${t}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}),!1}}}class Fa extends Da{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Na extends Da{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&("CANVAS"===t.previousSibling?.nodeName&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return En.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,n,s){i.includes("mouse")?t.addEventListener(i,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})):t.addEventListener(i,(t=>{if("blur"===i){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===i){if(e.focused)return;e.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(t)}})}))}_setEventListeners(t,e,i,n){for(const[s,r]of i)("Action"===r||this.data.actions?.[r])&&("Focus"!==r&&"Blur"!==r||(e||={focused:!1}),this._setEventListener(t,e,s,r,n),"Focus"!==r||this.data.actions?.Blur?"Blur"!==r||this.data.actions?.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":_n.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||9,s=t.style;let r;const a=t=>Math.round(10*t)/10;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2),e=t/(Math.round(t/(hi*n))||1);r=Math.min(n,a(e/hi))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2);r=Math.min(n,a(t/hi))}s.fontSize=`calc(${r}px * var(--scale-factor))`,s.color=_n.makeHexColor(i[0],i[1],i[2]),null!==this.data.textAlignment&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Ba extends Na{constructor(t){super(t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,i,n){const s=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[e]=i),s.setValue(r.id,{[n]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const n=t.getValue(e,{value:this.data.fieldValue});let s=n.value||"";const r=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;r&&s.length>r&&(s=s.slice(0,r));let a=n.formattedValue||this.data.textContent?.join("\n")||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));const o={userValue:s,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=a??s,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",a??s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Ma.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Ra,this._setRequired(i,this.data.required),r&&(i.maxLength=r),i.addEventListener("input",(n=>{t.setValue(e,{value:n.target.value}),this.setPropertyOnSiblings(i,"value",n.target.value,"value"),o.formattedValue=null})),i.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue??"";i.value=o.userValue=e,o.formattedValue=null}));let l=t=>{const{formattedValue:e}=o;null!==e&&void 0!==e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",(t=>{if(o.focused)return;const{target:e}=t;o.userValue&&(e.value=o.userValue),o.lastCommittedValue=e.value,o.commitKey=1,this.data.actions?.Focus||(o.focused=!0)})),i.addEventListener("updatefromsandbox",(i=>{this.showElementAndHideCanvas(i.target);const n={value(i){o.userValue=i.detail.value??"",t.setValue(e,{value:o.userValue.toString()}),i.target.value=o.userValue},formattedValue(i){const{formattedValue:n}=i.detail;o.formattedValue=n,null!==n&&void 0!==n&&i.target!==document.activeElement&&(i.target.value=n),t.setValue(e,{formattedValue:n})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:i=>{const{charLimit:n}=i.detail,{target:s}=i;if(0===n)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",n);let r=o.userValue;!r||r.length<=n||(r=r.slice(0,n),s.value=o.userValue=r,t.setValue(e,{value:r}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(n,i)})),i.addEventListener("keydown",(t=>{o.commitKey=1;let i=-1;if("Escape"===t.key?i=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(o.commitKey=3):i=2,-1===i)return;const{value:n}=t.target;o.lastCommittedValue!==n&&(o.lastCommittedValue=n,o.userValue=n,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:n,willCommit:!0,commitKey:i,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));const n=l;l=null,i.addEventListener("blur",(t=>{if(!o.focused||!t.relatedTarget)return;this.data.actions?.Blur||(o.focused=!1);const{value:i}=t.target;o.userValue=i,o.lastCommittedValue!==i&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,willCommit:!0,commitKey:o.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}),n(t)})),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",(t=>{o.lastCommittedValue=null;const{data:i,target:n}=t,{value:s,selectionStart:r,selectionEnd:a}=n;let l=r,h=a;switch(t.inputType){case"deleteWordBackward":{const t=s.substring(0,r).match(/\w*[^\w]*$/);t&&(l-=t[0].length);break}case"deleteWordForward":{const t=s.substring(r).match(/^[^\w]*\w*/);t&&(h+=t[0].length);break}case"deleteContentBackward":r===a&&(l-=1);break;case"deleteContentForward":r===a&&(h+=1)}t.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,change:i||"",willCommit:!1,selStart:l,selEnd:h}})})),this._setEventListeners(i,o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.value))}if(l&&i.addEventListener("blur",l),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/r;i.classList.add("comb"),i.style.letterSpacing=`calc(${t}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class ja extends Na{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Ua extends Na{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;"string"===typeof n&&(n="Off"!==n,t.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Ma.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,n&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=Ra,s.addEventListener("change",(n=>{const{name:s,checked:r}=n.target;for(const a of this._getElementsByName(s,i)){const i=r&&a.exportValue===e.exportValue;a.domElement&&(a.domElement.checked=i),t.setValue(a.id,{value:i})}t.setValue(i,{value:r})})),s.addEventListener("resetform",(t=>{const i=e.defaultFieldValue||"Off";t.target.checked=i===e.exportValue})),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",(e=>{const n={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(i,{value:e.target.checked})}};this._dispatchEventFromSandbox(n,e)})),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class za extends Na{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let n=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if("string"===typeof n&&(n=n!==e.buttonValue,t.setValue(i,{value:n})),n)for(const r of this._getElementsByName(e.fieldName,i))t.setValue(r.id,{value:!1});const s=document.createElement("input");if(Ma.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,n&&s.setAttribute("checked",!0),s.tabIndex=Ra,s.addEventListener("change",(e=>{const{name:n,checked:s}=e.target;for(const r of this._getElementsByName(n,i))t.setValue(r.id,{value:!1});t.setValue(i,{value:s})})),s.addEventListener("resetform",(t=>{const i=e.defaultFieldValue;t.target.checked=null!==i&&void 0!==i&&i===e.buttonValue})),this.enableScripting&&this.hasJSActions){const n=e.buttonValue;s.addEventListener("updatefromsandbox",(e=>{const s={value:e=>{const s=n===e.detail.value;for(const n of this._getElementsByName(e.target.name)){const e=s&&n.id===i;n.domElement&&(n.domElement.checked=e),t.setValue(n.id,{value:e})}}};this._dispatchEventFromSandbox(s,e)})),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Ha extends Oa{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",(t=>{this._dispatchEventFromSandbox({},t)}))),t}}class Ga extends Na{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");Ma.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=Ra;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue;for(const i of n.options)i.selected=i.value===e}));for(const h of this.data.options){const t=document.createElement("option");t.textContent=h.displayValue,t.value=h.exportValue,i.value.includes(h.exportValue)&&(t.setAttribute("selected",!0),s=!1),n.append(t)}let r=null;if(s){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),n.prepend(t),r=()=>{t.remove(),n.removeEventListener("input",r),r=null},n.addEventListener("input",r)}const a=t=>{const e=t?"value":"textContent",{options:i,multiple:s}=n;return s?Array.prototype.filter.call(i,(t=>t.selected)).map((t=>t[e])):-1===i.selectedIndex?null:i[i.selectedIndex][e]};let o=a(!1);const l=t=>{const e=t.target.options;return Array.prototype.map.call(e,(t=>({displayValue:t.textContent,exportValue:t.value})))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",(i=>{const s={value(i){r?.();const s=i.detail.value,l=new Set(Array.isArray(s)?s:[s]);for(const t of n.options)t.selected=l.has(t.value);t.setValue(e,{value:a(!0)}),o=a(!1)},multipleSelection(t){n.multiple=!0},remove(i){const s=n.options,r=i.detail.remove;if(s[r].selected=!1,n.remove(r),s.length>0){-1===Array.prototype.findIndex.call(s,(t=>t.selected))&&(s[0].selected=!0)}t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},clear(i){for(;0!==n.length;)n.remove(0);t.setValue(e,{value:null,items:[]}),o=a(!1)},insert(i){const{index:s,displayValue:r,exportValue:h}=i.detail.insert,c=n.children[s],d=document.createElement("option");d.textContent=r,d.value=h,c?c.before(d):n.append(d),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},items(i){const{items:s}=i.detail;for(;0!==n.length;)n.remove(0);for(const t of s){const{displayValue:e,exportValue:i}=t,s=document.createElement("option");s.textContent=e,s.value=i,n.append(s)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:a(!0),items:l(i)}),o=a(!1)},indices(i){const n=new Set(i.detail.indices);for(const t of i.target.options)t.selected=n.has(t.index);t.setValue(e,{value:a(!0)}),o=a(!1)},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(s,i)})),n.addEventListener("input",(i=>{const n=a(!0),s=a(!1);t.setValue(e,{value:n}),i.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:o,change:s,changeEx:n,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(t=>t.target.value))):n.addEventListener("input",(function(i){t.setValue(e,{value:a(!0)})})),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class $a extends Da{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:Da._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Va({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map((t=>`${kn}${t}`)).join(",")),this.container}}class Va{#sn=this.#rn.bind(this);#an=this.#on.bind(this);#ln=this.#hn.bind(this);#cn=this.#dn.bind(this);#un=null;#mt=null;#pn=null;#fn=null;#gn=null;#mn=null;#bn=null;#vn=!1;#yn=null;#x=null;#wn=null;#An=null;#En=null;#Ji=null;#xn=!1;constructor(t){let{container:e,color:i,elements:n,titleObj:s,modificationDate:r,contentsObj:a,richText:o,parent:l,rect:h,parentRect:c,open:d}=t;this.#mt=e,this.#En=s,this.#pn=a,this.#An=o,this.#mn=l,this.#un=i,this.#wn=h,this.#bn=c,this.#gn=n,this.#fn=as.toDateObject(r),this.trigger=n.flatMap((t=>t.getElementsToTriggerPopup()));for(const u of this.trigger)u.addEventListener("click",this.#cn),u.addEventListener("mouseenter",this.#ln),u.addEventListener("mouseleave",this.#an),u.classList.add("popupTriggerArea");for(const u of n)u.container?.addEventListener("keydown",this.#sn);this.#mt.hidden=!0,d&&this.#dn()}render(){if(this.#yn)return;const t=this.#yn=document.createElement("div");if(t.className="popup",this.#un){const e=t.style.outlineColor=_n.makeHexColor(...this.#un);if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))t.style.backgroundColor=`color-mix(in srgb, ${e} 30%, white)`;else{const e=.7;t.style.backgroundColor=_n.makeHexColor(...this.#un.map((t=>Math.floor(e*(255-t)+t))))}}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),({dir:i.dir,str:i.textContent}=this.#En),t.append(e),this.#fn){const t=document.createElement("span");t.classList.add("popupDate"),t.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),t.setAttribute("data-l10n-args",JSON.stringify({date:this.#fn.toLocaleDateString(),time:this.#fn.toLocaleTimeString()})),e.append(t)}const n=this.#_n;if(n)Pa.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const e=this._formatContents(this.#pn);t.append(e)}this.#mt.append(t)}get#_n(){const t=this.#An,e=this.#pn;return!t?.str||e?.str&&e.str!==t.str?null:this.#An.html||null}get#Sn(){return this.#_n?.attributes?.style?.fontSize||0}get#Cn(){return this.#_n?.attributes?.style?.color||null}#Tn(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:this.#Cn,fontSize:this.#Sn?`calc(${this.#Sn}px * var(--scale-factor))`:""}};for(const s of t.split("\n"))e.push({name:"span",value:s,attributes:n});return i}_formatContents(t){let{str:e,dir:i}=t;const n=document.createElement("p");n.classList.add("popupContent"),n.dir=i;const s=e.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const t=s[r];n.append(document.createTextNode(t)),r<a-1&&n.append(document.createElement("br"))}return n}#rn(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&this.#vn)&&this.#dn()}updateEdited(t){let{rect:e,popupContent:i}=t;this.#Ji||={contentsObj:this.#pn,richText:this.#An},e&&(this.#x=null),i&&(this.#An=this.#Tn(i),this.#pn=null),this.#yn?.remove(),this.#yn=null}resetEdited(){this.#Ji&&(({contentsObj:this.#pn,richText:this.#An}=this.#Ji),this.#Ji=null,this.#yn?.remove(),this.#yn=null,this.#x=null)}#kn(){if(null!==this.#x)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:n,pageY:s}}}=this.#mn;let r=!!this.#bn,a=r?this.#bn:this.#wn;for(const u of this.#gn)if(!a||null!==_n.intersect(u.data.rect,a)){a=u.data.rect,r=!0;break}const o=_n.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),l=r?a[2]-a[0]+5:0,h=o[0]+l,c=o[1];this.#x=[100*(h-n)/e,100*(c-s)/i];const{style:d}=this.#mt;d.left=`${this.#x[0]}%`,d.top=`${this.#x[1]}%`}#dn(){this.#vn=!this.#vn,this.#vn?(this.#hn(),this.#mt.addEventListener("click",this.#cn),this.#mt.addEventListener("keydown",this.#sn)):(this.#on(),this.#mt.removeEventListener("click",this.#cn),this.#mt.removeEventListener("keydown",this.#sn))}#hn(){this.#yn||this.render(),this.isVisible?this.#vn&&this.#mt.classList.add("focused"):(this.#kn(),this.#mt.hidden=!1,this.#mt.style.zIndex=parseInt(this.#mt.style.zIndex)+1e3)}#on(){this.#mt.classList.remove("focused"),!this.#vn&&this.isVisible&&(this.#mt.hidden=!0,this.#mt.style.zIndex=parseInt(this.#mt.style.zIndex)-1e3)}forceHide(){this.#xn=this.isVisible,this.#xn&&(this.#mt.hidden=!0)}maybeShow(){this.#xn&&(this.#yn||this.#hn(),this.#xn=!1,this.#mt.hidden=!1)}get isVisible(){return!1===this.#mt.hidden}}class Wa extends Da{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=vi.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class qa extends Da{#Pn=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:i}=Ia(t.rect),n=this.svgFactory.create(e,i,!0),s=this.#Pn=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),n.append(s),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Pn}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ka extends Da{#Rn=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:i}=Ia(t.rect),n=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,r=this.#Rn=this.svgFactory.createElement("svg:rect");return r.setAttribute("x",s/2),r.setAttribute("y",s/2),r.setAttribute("width",e-s),r.setAttribute("height",i-s),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Rn}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ya extends Da{#Mn=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:i}=Ia(t.rect),n=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,r=this.#Mn=this.svgFactory.createElement("svg:ellipse");return r.setAttribute("cx",e/2),r.setAttribute("cy",i/2),r.setAttribute("rx",e/2-s/2),r.setAttribute("ry",i/2-s/2),r.setAttribute("stroke-width",s||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Mn}addHighlightArea(){this.container.classList.add("highlightArea")}}class Xa extends Da{#In=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:e,height:i}=Ia(t.rect),n=this.svgFactory.create(e,i,!0);let s=[];for(const a of t.vertices){const e=a.x-t.rect[0],i=t.rect[3]-a.y;s.push(e+","+i)}s=s.join(" ");const r=this.#In=this.svgFactory.createElement(this.svgElementName);return r.setAttribute("points",s),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),n.append(r),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#In}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ja extends Xa{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Za extends Da{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Qa extends Da{#Ln=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=vi.INK}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:e,height:i}=Ia(t.rect),n=this.svgFactory.create(e,i,!0);for(const s of t.inkLists){let e=[];for(const n of s){const i=n.x-t.rect[0],s=t.rect[3]-n.y;e.push(`${i},${s}`)}e=e.join(" ");const i=this.svgFactory.createElement(this.svgElementName);this.#Ln.push(i),i.setAttribute("points",e),i.setAttribute("stroke-width",t.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),!t.popupRef&&this.hasPopupData&&this._createPopup(),n.append(i)}return this.container.append(n),this.container}getElementsToTriggerPopup(){return this.#Ln}addHighlightArea(){this.container.classList.add("highlightArea")}}class to extends Da{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class eo extends Da{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class io extends Da{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class no extends Da{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class so extends Da{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ro extends Da{#Dn=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||0===e.fillAlpha?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(100*e.fillAlpha)}%);`)),i.addEventListener("dblclick",this.#On.bind(this)),this.#Dn=i;const{isMac:n}=En.platform;return t.addEventListener("keydown",(t=>{"Enter"===t.key&&(n?t.metaKey:t.ctrlKey)&&this.#On()})),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#Dn}addHighlightArea(){this.container.classList.add("highlightArea")}#On(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class ao{#Fn=null;#Nn=null;#Bn=(()=>new Map)();constructor(t){let{div:e,accessibilityManager:i,annotationCanvasMap:n,annotationEditorUIManager:s,page:r,viewport:a}=t;this.div=e,this.#Fn=i,this.#Nn=n,this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}#jn(t,e){const i=t.firstChild||t;i.id=`${kn}${e}`,this.div.append(t),this.#Fn?.moveElementInDOM(this.div,t,i,!1)}async render(t){const{annotations:e}=t,i=this.div;ds(i,this.viewport);const n=new Map,s={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new Kn,annotationStorage:t.annotationStorage||new Ps,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const r of e){if(r.noHTML)continue;const t=r.annotationType===Gi;if(t){const t=n.get(r.id);if(!t)continue;s.elements=t}else{const{width:t,height:e}=Ia(r.rect);if(t<=0||e<=0)continue}s.data=r;const e=La.create(s);if(!e.isRenderable)continue;if(!t&&r.popupRef){const t=n.get(r.popupRef);t?t.push(e):n.set(r.popupRef,[e])}const i=e.render();r.hidden&&(i.style.visibility="hidden"),this.#jn(i,r.id),e.annotationEditorType>0&&(this.#Bn.set(e.data.id,e),this._annotationEditorUIManager?.renderAnnotationElement(e))}this.#Un()}update(t){let{viewport:e}=t;const i=this.div;this.viewport=e,ds(i,{rotation:e.rotation}),this.#Un(),i.hidden=!1}#Un(){if(!this.#Nn)return;const t=this.div;for(const[e,i]of this.#Nn){const n=t.querySelector(`[data-annotation-id="${e}"]`);if(!n)continue;i.className="annotationContent";const{firstChild:s}=n;s?"CANVAS"===s.nodeName?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):n.append(i)}this.#Nn.clear()}getEditableAnnotations(){return Array.from(this.#Bn.values())}getEditableAnnotation(t){return this.#Bn.get(t)}}const oo=/\r\n?|\n/g;class lo extends Es{#zn=this.editorDivBlur.bind(this);#Hn=this.editorDivFocus.bind(this);#Gn=this.editorDivInput.bind(this);#$n=this.editorDivKeydown.bind(this);#Vn=this.editorDivPaste.bind(this);#un;#Wn="";#qn=`${this.id}-editor`;#Sn;#Kn=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=lo.prototype,e=t=>t.isEmpty(),i=ws.TRANSLATE_SMALL,n=ws.TRANSLATE_BIG;return cn(this,"_keyboardManager",new vs([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}]]))}static _type="freetext";static _editorType=(()=>vi.FREETEXT)();constructor(t){super({...t,name:"freeTextEditor"}),this.#un=t.color||lo._defaultColor||Es._defaultLineColor,this.#Sn=t.fontSize||lo._defaultFontSize}static initialize(t,e){Es.initialize(t,e,{strings:["pdfjs-free-text-default-content"]});const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case yi.FREETEXT_SIZE:lo._defaultFontSize=e;break;case yi.FREETEXT_COLOR:lo._defaultColor=e}}updateParams(t,e){switch(t){case yi.FREETEXT_SIZE:this.#Yn(e);break;case yi.FREETEXT_COLOR:this.#Xn(e)}}static get defaultPropertiesToUpdate(){return[[yi.FREETEXT_SIZE,lo._defaultFontSize],[yi.FREETEXT_COLOR,lo._defaultColor||Es._defaultLineColor]]}get propertiesToUpdate(){return[[yi.FREETEXT_SIZE,this.#Sn],[yi.FREETEXT_COLOR,this.#un]]}#Yn(t){const e=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--scale-factor))`,this.translate(0,-(t-this.#Sn)*this.parentScale),this.#Sn=t,this.#Jn()},i=this.#Sn;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yi.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#Xn(t){const e=t=>{this.#un=this.editorDiv.style.color=t},i=this.#un;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yi.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-lo._internalPadding*t,-(lo._internalPadding+this.#Sn)*t]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(vi.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#$n),this.editorDiv.addEventListener("focus",this.#Hn),this.editorDiv.addEventListener("blur",this.#zn),this.editorDiv.addEventListener("input",this.#Gn),this.editorDiv.addEventListener("paste",this.#Vn))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#qn),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#$n),this.editorDiv.removeEventListener("focus",this.#Hn),this.editorDiv.removeEventListener("blur",this.#zn),this.editorDiv.removeEventListener("input",this.#Gn),this.editorDiv.removeEventListener("paste",this.#Vn),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#Zn(){const t=[];this.editorDiv.normalize();for(const e of this.editorDiv.childNodes)t.push(lo.#Qn(e));return t.join("\n")}#Jn(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:t,div:e}=this,n=e.style.display,s=e.classList.contains("hidden");e.classList.remove("hidden"),e.style.display="hidden",t.div.append(this.div),i=e.getBoundingClientRect(),e.remove(),e.style.display=n,e.classList.toggle("hidden",s)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#Wn,e=this.#Wn=this.#Zn().trimEnd();if(t===e)return;const i=t=>{this.#Wn=t,t?(this.#ts(),this._uiManager.rebuild(this),this.#Jn()):this.remove()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#Jn()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){lo._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#qn),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Es._l10nPromise.get("pdfjs-free-text-default-content").then((t=>this.editorDiv?.setAttribute("default-content",t))),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#Sn}px * var(--scale-factor))`,i.color=this.#un,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),fs(this,this.div,["dblclick","keydown"]),this.width){const[i,n]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this.#Kn;let[r,a]=this.getInitialTranslation();[r,a]=this.pageTranslationToScreen(r,a);const[o,l]=this.pageDimensions,[h,c]=this.pageTranslation;let d,u;switch(this.rotation){case 0:d=t+(s[0]-h)/o,u=e+this.height-(s[1]-c)/l;break;case 90:d=t+(s[0]-h)/o,u=e-(s[1]-c)/l,[r,a]=[a,-r];break;case 180:d=t-this.width+(s[0]-h)/o,u=e-(s[1]-c)/l,[r,a]=[-r,-a];break;case 270:d=t+(s[0]-h-this.height*l)/o,u=e+(s[1]-c-this.width*o)/l,[r,a]=[-a,r]}this.setAt(d*i,u*n,r,a)}else this.setAt(t*i,e*n,this.width*i,this.height*n);this.#ts(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#Qn(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(oo,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(1===i.length&&"text/plain"===i[0])return;t.preventDefault();const n=lo.#es(e.getData("text")||"").replaceAll(oo,"\n");if(!n)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const r=s.getRangeAt(0);if(!n.includes("\n"))return r.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),void s.collapseToStart();const{startContainer:a,startOffset:o}=r,l=[],h=[];if(a.nodeType===Node.TEXT_NODE){const t=a.parentElement;if(h.push(a.nodeValue.slice(o).replaceAll(oo,"")),t!==this.editorDiv){let e=l;for(const i of this.editorDiv.childNodes)i!==t?e.push(lo.#Qn(i)):e=h}l.push(a.nodeValue.slice(0,o).replaceAll(oo,""))}else if(a===this.editorDiv){let t=l,e=0;for(const i of this.editorDiv.childNodes)e++===o&&(t=h),t.push(lo.#Qn(i))}this.#Wn=`${l.join("\n")}${n}${h.join("\n")}`,this.#ts();const c=new Range;let d=l.reduce(((t,e)=>t+e.length),0);for(const{firstChild:u}of this.editorDiv.childNodes)if(u.nodeType===Node.TEXT_NODE){const t=u.nodeValue.length;if(d<=t){c.setStart(u,d),c.setEnd(u,d);break}d-=t}s.removeAllRanges(),s.addRange(c)}#ts(){if(this.editorDiv.replaceChildren(),this.#Wn)for(const t of this.#Wn.split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#is(){return this.#Wn.replaceAll("\xa0"," ")}static#es(t){return t.replaceAll(" ","\xa0")}get contentDiv(){return this.editorDiv}static deserialize(t,e,i){let n=null;if(t instanceof Wa){const{data:{defaultAppearanceData:{fontSize:e,fontColor:i},rect:s,rotation:r,id:a},textContent:o,textPosition:l,parent:{page:{pageNumber:h}}}=t;if(!o||0===o.length)return null;n=t={annotationType:vi.FREETEXT,color:Array.from(i),fontSize:e,value:o.join("\n"),position:l,pageIndex:h-1,rect:s.slice(0),rotation:r,id:a,deleted:!1}}const s=super.deserialize(t,e,i);return s.#Sn=t.fontSize,s.#un=_n.makeHexColor(...t.color),s.#Wn=lo.#es(t.value),s.annotationElementId=t.id||null,s.#Kn=n,s}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const e=lo._internalPadding*this.parentScale,i=this.getRect(e,e),n=Es._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#un),s={annotationType:vi.FREETEXT,color:n,fontSize:this.#Sn,value:this.#is(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?s:this.annotationElementId&&!this.#ns(s)?null:(s.id=this.annotationElementId,s)}#ns(t){const{value:e,fontSize:i,color:n,pageIndex:s}=this.#Kn;return this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some(((t,e)=>t!==n[e]))||t.pageIndex!==s}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:i}=e;i.fontSize=`calc(${this.#Sn}px * var(--scale-factor))`,i.color=this.#un,e.replaceChildren();for(const s of this.#Wn.split("\n")){const t=document.createElement("div");t.append(s?document.createTextNode(s):document.createElement("br")),e.append(t)}const n=lo._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(n,n),popupContent:this.#Wn}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class ho{#ss;#rs=[];#as=[];constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=1/0,r=-1/0,a=1/0,o=-1/0;const l=10**-4;for(const{x:g,y:m,width:b,height:v}of t){const t=Math.floor((g-e)/l)*l,i=Math.ceil((g+b+e)/l)*l,n=Math.floor((m-e)/l)*l,h=Math.ceil((m+v+e)/l)*l,c=[t,n,h,!0],d=[i,n,h,!1];this.#rs.push(c,d),s=Math.min(s,t),r=Math.max(r,i),a=Math.min(a,n),o=Math.max(o,h)}const h=r-s+2*i,c=o-a+2*i,d=s-i,u=a-i,p=this.#rs.at(n?-1:-2),f=[p[0],p[2]];for(const g of this.#rs){const[t,e,i]=g;g[0]=(t-d)/h,g[1]=(e-u)/c,g[2]=(i-u)/c}this.#ss={x:d,y:u,width:h,height:c,lastPoint:f}}getOutlines(){this.#rs.sort(((t,e)=>t[0]-e[0]||t[1]-e[1]||t[2]-e[2]));const t=[];for(const e of this.#rs)e[3]?(t.push(...this.#os(e)),this.#ls(e)):(this.#hs(e),t.push(...this.#os(e)));return this.#cs(t)}#cs(t){const e=[],i=new Set;for(const r of t){const[t,i,n]=r;e.push([t,i,r],[t,n,r])}e.sort(((t,e)=>t[1]-e[1]||t[0]-e[0]));for(let r=0,a=e.length;r<a;r+=2){const t=e[r][2],n=e[r+1][2];t.push(n),n.push(t),i.add(t),i.add(n)}const n=[];let s;for(;i.size>0;){const t=i.values().next().value;let[e,r,a,o,l]=t;i.delete(t);let h=e,c=r;for(s=[e,a],n.push(s);;){let t;if(i.has(o))t=o;else{if(!i.has(l))break;t=l}i.delete(t),[e,r,a,o,l]=t,h!==e&&(s.push(h,c,e,c===r?r:a),h=e),c=c===r?a:r}s.push(h,c)}return new uo(n,this.#ss)}#ds(t){const e=this.#as;let i=0,n=e.length-1;for(;i<=n;){const s=i+n>>1,r=e[s][0];if(r===t)return s;r<t?i=s+1:n=s-1}return n+1}#ls(t){let[,e,i]=t;const n=this.#ds(e);this.#as.splice(n,0,[e,i])}#hs(t){let[,e,i]=t;const n=this.#ds(e);for(let s=n;s<this.#as.length;s++){const[t,n]=this.#as[s];if(t!==e)break;if(t===e&&n===i)return void this.#as.splice(s,1)}for(let s=n-1;s>=0;s--){const[t,n]=this.#as[s];if(t!==e)break;if(t===e&&n===i)return void this.#as.splice(s,1)}}#os(t){const[e,i,n]=t,s=[[e,i,n]],r=this.#ds(n);for(let a=0;a<r;a++){const[t,i]=this.#as[a];for(let n=0,r=s.length;n<r;n++){const[,a,o]=s[n];if(!(i<=a||o<=t))if(a>=t)if(o>i)s[n][1]=i;else{if(1===r)return[];s.splice(n,1),n--,r--}else s[n][2]=t,o>i&&s.push([e,i,o])}}return s}}class co{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof fo}}class uo extends co{#ss;#us;constructor(t,e){super(),this.#us=t,this.#ss=e}toSVGPath(){const t=[];for(const e of this.#us){let[i,n]=e;t.push(`M${i} ${n}`);for(let s=2;s<e.length;s+=2){const r=e[s],a=e[s+1];r===i?(t.push(`V${a}`),n=a):a===n&&(t.push(`H${r}`),i=r)}t.push("Z")}return t.join(" ")}serialize(t,e){let[i,n,s,r]=t;const a=[],o=s-i,l=r-n;for(const h of this.#us){const t=new Array(h.length);for(let e=0;e<h.length;e+=2)t[e]=i+h[e]*o,t[e+1]=r-h[e+1]*l;a.push(t)}return a}get box(){return this.#ss}}class po{#ss;#ps=[];#fs;#gs;#ms=[];#bs=(()=>new Float64Array(18))();#vs;#ys;#ws;#As;#Es;#xs;#_s=[];static#Ss=8;static#Cs=2;static#Ts=(()=>po.#Ss+po.#Cs)();constructor(t,e,i,n,s){let{x:r,y:a}=t,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.#ss=e,this.#xs=n*i,this.#gs=s,this.#bs.set([NaN,NaN,NaN,NaN,r,a],6),this.#fs=o,this.#As=po.#Ss*i,this.#ws=po.#Ts*i,this.#Es=i,this.#_s.push(r,a)}get free(){return!0}isEmpty(){return isNaN(this.#bs[8])}#ks(){const t=this.#bs.subarray(4,6),e=this.#bs.subarray(16,18),[i,n,s,r]=this.#ss;return[(this.#vs+(t[0]-e[0])/2-i)/s,(this.#ys+(t[1]-e[1])/2-n)/r,(this.#vs+(e[0]-t[0])/2-i)/s,(this.#ys+(e[1]-t[1])/2-n)/r]}add(t){let{x:e,y:i}=t;this.#vs=e,this.#ys=i;const[n,s,r,a]=this.#ss;let[o,l,h,c]=this.#bs.subarray(8,12);const d=e-h,u=i-c,p=Math.hypot(d,u);if(p<this.#ws)return!1;const f=p-this.#As,g=f/p,m=g*d,b=g*u;let v=o,y=l;o=h,l=c,h+=m,c+=b,this.#_s?.push(e,i);const w=m/f,A=-b/f*this.#xs,E=w*this.#xs;if(this.#bs.set(this.#bs.subarray(2,8),0),this.#bs.set([h+A,c+E],4),this.#bs.set(this.#bs.subarray(14,18),12),this.#bs.set([h-A,c-E],16),isNaN(this.#bs[6]))return 0===this.#ms.length&&(this.#bs.set([o+A,l+E],2),this.#ms.push(NaN,NaN,NaN,NaN,(o+A-n)/r,(l+E-s)/a),this.#bs.set([o-A,l-E],14),this.#ps.push(NaN,NaN,NaN,NaN,(o-A-n)/r,(l-E-s)/a)),this.#bs.set([v,y,o,l,h,c],6),!this.isEmpty();this.#bs.set([v,y,o,l,h,c],6);return Math.abs(Math.atan2(y-l,v-o)-Math.atan2(b,m))<Math.PI/2?([o,l,h,c]=this.#bs.subarray(2,6),this.#ms.push(NaN,NaN,NaN,NaN,((o+h)/2-n)/r,((l+c)/2-s)/a),[o,l,v,y]=this.#bs.subarray(14,18),this.#ps.push(NaN,NaN,NaN,NaN,((v+o)/2-n)/r,((y+l)/2-s)/a),!0):([v,y,o,l,h,c]=this.#bs.subarray(0,6),this.#ms.push(((v+5*o)/6-n)/r,((y+5*l)/6-s)/a,((5*o+h)/6-n)/r,((5*l+c)/6-s)/a,((o+h)/2-n)/r,((l+c)/2-s)/a),[h,c,o,l,v,y]=this.#bs.subarray(12,18),this.#ps.push(((v+5*o)/6-n)/r,((y+5*l)/6-s)/a,((5*o+h)/6-n)/r,((5*l+c)/6-s)/a,((o+h)/2-n)/r,((l+c)/2-s)/a),!0)}toSVGPath(){if(this.isEmpty())return"";const t=this.#ms,e=this.#ps,i=this.#bs.subarray(4,6),n=this.#bs.subarray(16,18),[s,r,a,o]=this.#ss,[l,h,c,d]=this.#ks();if(isNaN(this.#bs[6])&&!this.isEmpty())return`M${(this.#bs[2]-s)/a} ${(this.#bs[3]-r)/o} L${(this.#bs[4]-s)/a} ${(this.#bs[5]-r)/o} L${l} ${h} L${c} ${d} L${(this.#bs[16]-s)/a} ${(this.#bs[17]-r)/o} L${(this.#bs[14]-s)/a} ${(this.#bs[15]-r)/o} Z`;const u=[];u.push(`M${t[4]} ${t[5]}`);for(let p=6;p<t.length;p+=6)isNaN(t[p])?u.push(`L${t[p+4]} ${t[p+5]}`):u.push(`C${t[p]} ${t[p+1]} ${t[p+2]} ${t[p+3]} ${t[p+4]} ${t[p+5]}`);u.push(`L${(i[0]-s)/a} ${(i[1]-r)/o} L${l} ${h} L${c} ${d} L${(n[0]-s)/a} ${(n[1]-r)/o}`);for(let p=e.length-6;p>=6;p-=6)isNaN(e[p])?u.push(`L${e[p+4]} ${e[p+5]}`):u.push(`C${e[p]} ${e[p+1]} ${e[p+2]} ${e[p+3]} ${e[p+4]} ${e[p+5]}`);return u.push(`L${e[4]} ${e[5]} Z`),u.join(" ")}getOutlines(){const t=this.#ms,e=this.#ps,i=this.#bs,n=i.subarray(4,6),s=i.subarray(16,18),[r,a,o,l]=this.#ss,h=new Float64Array((this.#_s?.length??0)+2);for(let m=0,b=h.length-2;m<b;m+=2)h[m]=(this.#_s[m]-r)/o,h[m+1]=(this.#_s[m+1]-a)/l;h[h.length-2]=(this.#vs-r)/o,h[h.length-1]=(this.#ys-a)/l;const[c,d,u,p]=this.#ks();if(isNaN(i[6])&&!this.isEmpty()){const t=new Float64Array(36);return t.set([NaN,NaN,NaN,NaN,(i[2]-r)/o,(i[3]-a)/l,NaN,NaN,NaN,NaN,(i[4]-r)/o,(i[5]-a)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,u,p,NaN,NaN,NaN,NaN,(i[16]-r)/o,(i[17]-a)/l,NaN,NaN,NaN,NaN,(i[14]-r)/o,(i[15]-a)/l],0),new fo(t,h,this.#ss,this.#Es,this.#fs,this.#gs)}const f=new Float64Array(this.#ms.length+24+this.#ps.length);let g=t.length;for(let m=0;m<g;m+=2)isNaN(t[m])?f[m]=f[m+1]=NaN:(f[m]=t[m],f[m+1]=t[m+1]);f.set([NaN,NaN,NaN,NaN,(n[0]-r)/o,(n[1]-a)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,u,p,NaN,NaN,NaN,NaN,(s[0]-r)/o,(s[1]-a)/l],g),g+=24;for(let m=e.length-6;m>=6;m-=6)for(let t=0;t<6;t+=2)isNaN(e[m+t])?(f[g]=f[g+1]=NaN,g+=2):(f[g]=e[m+t],f[g+1]=e[m+t+1],g+=2);return f.set([NaN,NaN,NaN,NaN,e[4],e[5]],g),new fo(f,h,this.#ss,this.#Es,this.#fs,this.#gs)}}class fo extends co{#ss;#Ps=null;#fs;#gs;#_s;#Es;#Rs;constructor(t,e,i,n,s,r){super(),this.#Rs=t,this.#_s=e,this.#ss=i,this.#Es=n,this.#fs=s,this.#gs=r,this.#Ms(r);const{x:a,y:o,width:l,height:h}=this.#Ps;for(let c=0,d=t.length;c<d;c+=2)t[c]=(t[c]-a)/l,t[c+1]=(t[c+1]-o)/h;for(let c=0,d=e.length;c<d;c+=2)e[c]=(e[c]-a)/l,e[c+1]=(e[c+1]-o)/h}toSVGPath(){const t=[`M${this.#Rs[4]} ${this.#Rs[5]}`];for(let e=6,i=this.#Rs.length;e<i;e+=6)isNaN(this.#Rs[e])?t.push(`L${this.#Rs[e+4]} ${this.#Rs[e+5]}`):t.push(`C${this.#Rs[e]} ${this.#Rs[e+1]} ${this.#Rs[e+2]} ${this.#Rs[e+3]} ${this.#Rs[e+4]} ${this.#Rs[e+5]}`);return t.push("Z"),t.join(" ")}serialize(t,e){let[i,n,s,r]=t;const a=s-i,o=r-n;let l,h;switch(e){case 0:l=this.#Is(this.#Rs,i,r,a,-o),h=this.#Is(this.#_s,i,r,a,-o);break;case 90:l=this.#Ls(this.#Rs,i,n,a,o),h=this.#Ls(this.#_s,i,n,a,o);break;case 180:l=this.#Is(this.#Rs,s,n,-a,o),h=this.#Is(this.#_s,s,n,-a,o);break;case 270:l=this.#Ls(this.#Rs,s,r,-a,-o),h=this.#Ls(this.#_s,s,r,-a,-o)}return{outline:Array.from(l),points:[Array.from(h)]}}#Is(t,e,i,n,s){const r=new Float64Array(t.length);for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a]*n,r[a+1]=i+t[a+1]*s;return r}#Ls(t,e,i,n,s){const r=new Float64Array(t.length);for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a+1]*n,r[a+1]=i+t[a]*s;return r}#Ms(t){const e=this.#Rs;let i=e[4],n=e[5],s=i,r=n,a=i,o=n,l=i,h=n;const c=t?Math.max:Math.min;for(let g=6,m=e.length;g<m;g+=6){if(isNaN(e[g]))s=Math.min(s,e[g+4]),r=Math.min(r,e[g+5]),a=Math.max(a,e[g+4]),o=Math.max(o,e[g+5]),h<e[g+5]?(l=e[g+4],h=e[g+5]):h===e[g+5]&&(l=c(l,e[g+4]));else{const t=_n.bezierBoundingBox(i,n,...e.slice(g,g+6));s=Math.min(s,t[0]),r=Math.min(r,t[1]),a=Math.max(a,t[2]),o=Math.max(o,t[3]),h<t[3]?(l=t[2],h=t[3]):h===t[3]&&(l=c(l,t[2]))}i=e[g+4],n=e[g+5]}const d=s-this.#fs,u=r-this.#fs,p=a-s+2*this.#fs,f=o-r+2*this.#fs;this.#Ps={x:d,y:u,width:p,height:f,lastPoint:[l,h]}}get box(){return this.#Ps}getNewOutline(t,e){const{x:i,y:n,width:s,height:r}=this.#Ps,[a,o,l,h]=this.#ss,c=s*l,d=r*h,u=i*l+a,p=n*h+o,f=new po({x:this.#_s[0]*c+u,y:this.#_s[1]*d+p},this.#ss,this.#Es,t,this.#gs,e??this.#fs);for(let g=2;g<this.#_s.length;g+=2)f.add({x:this.#_s[g]*c+u,y:this.#_s[g+1]*d+p});return f.getOutlines()}}class go{#sn=this.#rn.bind(this);#Ds=this.#a.bind(this);#Os=null;#Fs=null;#Ns;#Bs=null;#js=!1;#Us=!1;#s=null;#zs;#u=null;#Hs;static get _keyboardManager(){return cn(this,"_keyboardManager",new vs([[["Escape","mac+Escape"],go.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],go.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],go.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],go.prototype._moveToPrevious],[["Home","mac+Home"],go.prototype._moveToBeginning],[["End","mac+End"],go.prototype._moveToEnd]]))}constructor(t){let{editor:e=null,uiManager:i=null}=t;e?(this.#Us=!1,this.#Hs=yi.HIGHLIGHT_COLOR,this.#s=e):(this.#Us=!0,this.#Hs=yi.HIGHLIGHT_DEFAULT_COLOR),this.#u=e?._uiManager||i,this.#zs=this.#u._eventBus,this.#Ns=e?.color||this.#u?.highlightColors.values().next().value||"#FFFF98"}renderButton(){const t=this.#Os=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0),t.addEventListener("click",this.#Gs.bind(this)),t.addEventListener("keydown",this.#sn);const e=this.#Fs=document.createElement("span");return e.className="swatch",e.setAttribute("aria-hidden",!0),e.style.backgroundColor=this.#Ns,t.append(e),t}renderMainDropdown(){const t=this.#Bs=this.#$s();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#$s(){const t=document.createElement("div");t.addEventListener("contextmenu",ns),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[e,i]of this.#u.highlightColors){const n=document.createElement("button");n.tabIndex="0",n.role="option",n.setAttribute("data-color",i),n.title=e,n.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${e}`);const s=document.createElement("span");n.append(s),s.className="swatch",s.style.backgroundColor=i,n.setAttribute("aria-selected",i===this.#Ns),n.addEventListener("click",this.#Vs.bind(this,i)),t.append(n)}return t.addEventListener("keydown",this.#sn),t}#Vs(t,e){e.stopPropagation(),this.#zs.dispatch("switchannotationeditorparams",{source:this,type:this.#Hs,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#Os)return void this.#Gs(t);const e=t.target.getAttribute("data-color");e&&this.#Vs(e,t)}_moveToNext(t){this.#Ws?t.target!==this.#Os?t.target.nextSibling?.focus():this.#Bs.firstChild?.focus():this.#Gs(t)}_moveToPrevious(t){t.target!==this.#Bs?.firstChild&&t.target!==this.#Os?(this.#Ws||this.#Gs(t),t.target.previousSibling?.focus()):this.#Ws&&this._hideDropdownFromKeyboard()}_moveToBeginning(t){this.#Ws?this.#Bs.firstChild?.focus():this.#Gs(t)}_moveToEnd(t){this.#Ws?this.#Bs.lastChild?.focus():this.#Gs(t)}#rn(t){go._keyboardManager.exec(this,t)}#Gs(t){if(this.#Ws)return void this.hideDropdown();if(this.#js=0===t.detail,window.addEventListener("pointerdown",this.#Ds),this.#Bs)return void this.#Bs.classList.remove("hidden");const e=this.#Bs=this.#$s();this.#Os.append(e)}#a(t){this.#Bs?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#Bs?.classList.add("hidden"),window.removeEventListener("pointerdown",this.#Ds)}get#Ws(){return this.#Bs&&!this.#Bs.classList.contains("hidden")}_hideDropdownFromKeyboard(){this.#Us||(this.#Ws?(this.hideDropdown(),this.#Os.focus({preventScroll:!0,focusVisible:this.#js})):this.#s?.unselect())}updateColor(t){if(this.#Fs&&(this.#Fs.style.backgroundColor=t),!this.#Bs)return;const e=this.#u.highlightColors.values();for(const i of this.#Bs.children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){this.#Os?.remove(),this.#Os=null,this.#Fs=null,this.#Bs?.remove(),this.#Bs=null}}class mo extends Es{#qs=null;#Ks=0;#Ys;#Xs=null;#n=null;#Js=null;#Zs=null;#Qs=0;#tr=null;#er=null;#m=null;#ir=!1;#rt=this.#nr.bind(this);#sr=null;#rr;#ar=null;#or="";#xs;#lr="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _l10nPromise;static _type="highlight";static _editorType=(()=>vi.HIGHLIGHT)();static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=mo.prototype;return cn(this,"_keyboardManager",new vs([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||mo._defaultColor,this.#xs=t.thickness||mo._defaultThickness,this.#rr=t.opacity||mo._defaultOpacity,this.#Ys=t.boxes||null,this.#lr=t.methodOfCreation||"",this.#or=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#ir=!0,this.#hr(t),this.#cr()):(this.#qs=t.anchorNode,this.#Ks=t.anchorOffset,this.#Zs=t.focusNode,this.#Qs=t.focusOffset,this.#dr(),this.#cr(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#ir?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#xs,methodOfCreation:this.#lr}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#dr(){const t=new ho(this.#Ys,.001);this.#er=t.getOutlines(),({x:this.x,y:this.y,width:this.width,height:this.height}=this.#er.box);const e=new ho(this.#Ys,.0025,.001,"ltr"===this._uiManager.direction);this.#Js=e.getOutlines();const{lastPoint:i}=this.#Js.box;this.#sr=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#hr(t){let{highlightOutlines:e,highlightId:i,clipPathId:n}=t;this.#er=e;if(this.#Js=e.getNewOutline(this.#xs/2+1.5,.0025),i>=0)this.#m=i,this.#Xs=n,this.parent.drawLayer.finalizeLine(i,e),this.#ar=this.parent.drawLayer.highlightOutline(this.#Js);else if(this.parent){const t=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#m,e),this.parent.drawLayer.updateBox(this.#m,mo.#ur(this.#er.box,(t-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#ar,this.#Js),this.parent.drawLayer.updateBox(this.#ar,mo.#ur(this.#Js.box,t))}const{x:s,y:r,width:a,height:o}=e.box;switch(this.rotation){case 0:this.x=s,this.y=r,this.width=a,this.height=o;break;case 90:{const[t,e]=this.parentDimensions;this.x=r,this.y=1-s,this.width=a*e/t,this.height=o*t/e;break}case 180:this.x=1-s,this.y=1-r,this.width=a,this.height=o;break;case 270:{const[t,e]=this.parentDimensions;this.x=1-r,this.y=s,this.width=a*e/t,this.height=o*t/e;break}}const{lastPoint:l}=this.#Js.box;this.#sr=[(l[0]-s)/a,(l[1]-r)/o]}static initialize(t,e){Es.initialize(t,e),mo._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case yi.HIGHLIGHT_DEFAULT_COLOR:mo._defaultColor=e;break;case yi.HIGHLIGHT_THICKNESS:mo._defaultThickness=e}}translateInPage(t,e){}get toolbarPosition(){return this.#sr}updateParams(t,e){switch(t){case yi.HIGHLIGHT_COLOR:this.#Xn(e);break;case yi.HIGHLIGHT_THICKNESS:this.#pr(e)}}static get defaultPropertiesToUpdate(){return[[yi.HIGHLIGHT_DEFAULT_COLOR,mo._defaultColor],[yi.HIGHLIGHT_THICKNESS,mo._defaultThickness]]}get propertiesToUpdate(){return[[yi.HIGHLIGHT_COLOR,this.color||mo._defaultColor],[yi.HIGHLIGHT_THICKNESS,this.#xs||mo._defaultThickness],[yi.HIGHLIGHT_FREE,this.#ir]]}#Xn(t){const e=t=>{this.color=t,this.parent?.drawLayer.changeColor(this.#m,t),this.#n?.updateColor(t)},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yi.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#pr(t){const e=this.#xs,i=t=>{this.#xs=t,this.#fr(t)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yi.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#n=new go({editor:this}),t.addColorPicker(this.#n)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#gr())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#gr())}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#mr(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#cr(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#mr():t&&(this.#cr(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#fr(t){if(!this.#ir)return;this.#hr({highlightOutlines:this.#er.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#mr(){null!==this.#m&&this.parent&&(this.parent.drawLayer.remove(this.#m),this.#m=null,this.parent.drawLayer.remove(this.#ar),this.#ar=null)}#cr(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===this.#m&&(({id:this.#m,clipPathId:this.#Xs}=t.drawLayer.highlight(this.#er,this.color,this.#rr)),this.#ar=t.drawLayer.highlightOutline(this.#Js),this.#tr&&(this.#tr.style.clipPath=this.#Xs))}static#ur(t,e){let{x:i,y:n,width:s,height:r}=t;switch(e){case 90:return{x:1-n-r,y:i,width:r,height:s};case 180:return{x:1-i-s,y:1-n-r,width:s,height:r};case 270:return{x:n,y:1-i-s,width:r,height:s}}return{x:i,y:n,width:s,height:r}}rotate(t){const{drawLayer:e}=this.parent;let i;this.#ir?(t=(t-this.rotation+360)%360,i=mo.#ur(this.#er.box,t)):i=mo.#ur(this,t),e.rotate(this.#m,t),e.rotate(this.#ar,t),e.updateBox(this.#m,i),e.updateBox(this.#ar,mo.#ur(this.#Js.box,t))}render(){if(this.div)return this.div;const t=super.render();this.#or&&(t.setAttribute("aria-label",this.#or),t.setAttribute("role","mark")),this.#ir?t.classList.add("free"):this.div.addEventListener("keydown",this.#rt);const e=this.#tr=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#Xs;const[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),fs(this,this.#tr,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(this.#ar,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#ar,"hovered")}#nr(t){mo._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#br(!0);break;case 1:case 3:this.#br(!1)}}#br(t){if(!this.#qs)return;const e=window.getSelection();t?e.setPosition(this.#qs,this.#Ks):e.setPosition(this.#Zs,this.#Qs)}select(){super.select(),this.#ar&&(this.parent?.drawLayer.removeClass(this.#ar,"hovered"),this.parent?.drawLayer.addClass(this.#ar,"selected"))}unselect(){super.unselect(),this.#ar&&(this.parent?.drawLayer.removeClass(this.#ar,"selected"),this.#ir||this.#br(!1))}get _mustFixPosition(){return!this.#ir}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(t),this.parent&&(this.parent.drawLayer.show(this.#m,t),this.parent.drawLayer.show(this.#ar,t))}#gr(){return this.#ir?this.rotation:0}#vr(){if(this.#ir)return null;const[t,e]=this.pageDimensions,i=this.#Ys,n=new Array(8*i.length);let s=0;for(const{x:r,y:a,width:o,height:l}of i){const i=r*t,h=(1-a-l)*e;n[s]=n[s+4]=i,n[s+1]=n[s+3]=h,n[s+2]=n[s+6]=i+o*t,n[s+5]=n[s+7]=h+l*e,s+=8}return n}#yr(t){return this.#er.serialize(t,this.#gr())}static startHighlighting(t,e,i){let{target:n,x:s,y:r}=i;const{x:a,y:o,width:l,height:h}=n.getBoundingClientRect(),c=e=>{this.#wr(t,e)},d={capture:!0,passive:!1},u=t=>{t.preventDefault(),t.stopPropagation()},p=e=>{n.removeEventListener("pointermove",c),window.removeEventListener("blur",p),window.removeEventListener("pointerup",p),window.removeEventListener("pointerdown",u,d),window.removeEventListener("contextmenu",ns),this.#Ar(t,e)};window.addEventListener("blur",p),window.addEventListener("pointerup",p),window.addEventListener("pointerdown",u,d),window.addEventListener("contextmenu",ns),n.addEventListener("pointermove",c),this._freeHighlight=new po({x:s,y:r},[a,o,l,h],t.scale,this._defaultThickness/2,e,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static#wr(t,e){this._freeHighlight.add(e)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#Ar(t,e){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(t,e,i){const n=super.deserialize(t,e,i),{rect:[s,r,a,o],color:l,quadPoints:h}=t;n.color=_n.makeHexColor(...l),n.#rr=t.opacity;const[c,d]=n.pageDimensions;n.width=(a-s)/c,n.height=(o-r)/d;const u=n.#Ys=[];for(let p=0;p<h.length;p+=8)u.push({x:(h[4]-a)/c,y:(o-(1-h[p+5]))/d,width:(h[p+2]-h[p])/c,height:(h[p+5]-h[p+1])/d});return n.#dr(),n}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||t)return null;const e=this.getRect(0,0),i=Es._colorManager.convert(this.color);return{annotationType:vi.HIGHLIGHT,color:i,opacity:this.#rr,thickness:this.#xs,quadPoints:this.#vr(),outlines:this.#yr(e),pageIndex:this.pageIndex,rect:e,rotation:this.#gr(),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}}class bo extends Es{#Er=0;#xr=0;#_r=this.canvasPointermove.bind(this);#Sr=this.canvasPointerleave.bind(this);#Cr=this.canvasPointerup.bind(this);#Tr=this.canvasPointerdown.bind(this);#kr=null;#Pr=(()=>new Path2D)();#Rr=!1;#Mr=!1;#Ir=!1;#Lr=null;#Dr=0;#Or=0;#Fr=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=(()=>vi.INK)();constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,e){Es.initialize(t,e)}static updateDefaultParams(t,e){switch(t){case yi.INK_THICKNESS:bo._defaultThickness=e;break;case yi.INK_COLOR:bo._defaultColor=e;break;case yi.INK_OPACITY:bo._defaultOpacity=e/100}}updateParams(t,e){switch(t){case yi.INK_THICKNESS:this.#pr(e);break;case yi.INK_COLOR:this.#Xn(e);break;case yi.INK_OPACITY:this.#Nr(e)}}static get defaultPropertiesToUpdate(){return[[yi.INK_THICKNESS,bo._defaultThickness],[yi.INK_COLOR,bo._defaultColor||Es._defaultLineColor],[yi.INK_OPACITY,Math.round(100*bo._defaultOpacity)]]}get propertiesToUpdate(){return[[yi.INK_THICKNESS,this.thickness||bo._defaultThickness],[yi.INK_COLOR,this.color||bo._defaultColor||Es._defaultLineColor],[yi.INK_OPACITY,Math.round(100*(this.opacity??bo._defaultOpacity))]]}#pr(t){const e=t=>{this.thickness=t,this.#Br()},i=this.thickness;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yi.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#Xn(t){const e=t=>{this.color=t,this.#jr()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yi.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#Nr(t){const e=t=>{this.opacity=t,this.#jr()};t/=100;const i=this.opacity;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:yi.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#Ur(),this.#zr()),this.isAttachedToDOM||(this.parent.add(this),this.#Hr()),this.#Br()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#kr&&(clearTimeout(this.#kr),this.#kr=null),this.#Lr.disconnect(),this.#Lr=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&null===t&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,e]=this.parentDimensions,i=this.width*t,n=this.height*e;this.setDimensions(i,n)}enableEditMode(){this.#Rr||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#Tr))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#Tr))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#Gr(){const{parentRotation:t,parentDimensions:[e,i]}=this;switch(t){case 90:return[0,i,i,e];case 180:return[e,i,e,i];case 270:return[e,0,i,e];default:return[0,0,e,i]}}#$r(){const{ctx:t,color:e,opacity:i,thickness:n,parentScale:s,scaleFactor:r}=this;t.lineWidth=n*s/r,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${e}${function(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")}(i)}`}#Vr(t,e){this.canvas.addEventListener("contextmenu",ns),this.canvas.addEventListener("pointerleave",this.#Sr),this.canvas.addEventListener("pointermove",this.#_r),this.canvas.addEventListener("pointerup",this.#Cr),this.canvas.removeEventListener("pointerdown",this.#Tr),this.isEditing=!0,this.#Ir||(this.#Ir=!0,this.#Hr(),this.thickness||=bo._defaultThickness,this.color||=bo._defaultColor||Es._defaultLineColor,this.opacity??=bo._defaultOpacity),this.currentPath.push([t,e]),this.#Mr=!1,this.#$r(),this.#Fr=()=>{this.#Wr(),this.#Fr&&window.requestAnimationFrame(this.#Fr)},window.requestAnimationFrame(this.#Fr)}#qr(t,e){const[i,n]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===i&&e===n)return;const s=this.currentPath;let r=this.#Pr;if(s.push([t,e]),this.#Mr=!0,s.length<=2)return r.moveTo(...s[0]),void r.lineTo(t,e);3===s.length&&(this.#Pr=r=new Path2D,r.moveTo(...s[0])),this.#Kr(r,...s.at(-3),...s.at(-2),t,e)}#Yr(){if(0===this.currentPath.length)return;const t=this.currentPath.at(-1);this.#Pr.lineTo(...t)}#Xr(t,e){let i;if(this.#Fr=null,t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),this.#qr(t,e),this.#Yr(),1!==this.currentPath.length)i=this.#Jr();else{const n=[t,e];i=[[n,n.slice(),n.slice(),n]]}const n=this.#Pr,s=this.currentPath;this.currentPath=[],this.#Pr=new Path2D;this.addCommands({cmd:()=>{this.allRawPaths.push(s),this.paths.push(i),this.bezierPath2D.push(n),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#Ur(),this.#zr()),this.#Br())},mustExec:!0})}#Wr(){if(!this.#Mr)return;this.#Mr=!1;const t=Math.ceil(this.thickness*this.parentScale),e=this.currentPath.slice(-3),i=e.map((t=>t[0])),n=e.map((t=>t[1])),{ctx:s}=(Math.min(...i),Math.max(...i),Math.min(...n),Math.max(...n),this);s.save(),s.clearRect(0,0,this.canvas.width,this.canvas.height);for(const r of this.bezierPath2D)s.stroke(r);s.stroke(this.#Pr),s.restore()}#Kr(t,e,i,n,s,r,a){const o=(e+n)/2,l=(i+s)/2,h=(n+r)/2,c=(s+a)/2;t.bezierCurveTo(o+2*(n-o)/3,l+2*(s-l)/3,h+2*(n-h)/3,c+2*(s-c)/3,h,c)}#Jr(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const e=[];let i,[n,s]=t[0];for(i=1;i<t.length-2;i++){const[r,a]=t[i],[o,l]=t[i+1],h=(r+o)/2,c=(a+l)/2,d=[n+2*(r-n)/3,s+2*(a-s)/3],u=[h+2*(r-h)/3,c+2*(a-c)/3];e.push([[n,s],d,u,[h,c]]),[n,s]=[h,c]}const[r,a]=t[i],[o,l]=t[i+1],h=[n+2*(r-n)/3,s+2*(a-s)/3],c=[o+2*(r-o)/3,l+2*(a-l)/3];return e.push([[n,s],h,c,[o,l]]),e}#jr(){if(this.isEmpty())return void this.#Zr();this.#$r();const{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),this.#Zr();for(const i of this.bezierPath2D)e.stroke(i)}commit(){this.#Rr||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#Rr=!0,this.div.classList.add("disabled"),this.#Br(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){0===t.button&&this.isInEditMode()&&!this.#Rr&&(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#Vr(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#qr(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#Qr(t)}canvasPointerleave(t){this.#Qr(t)}#Qr(t){this.canvas.removeEventListener("pointerleave",this.#Sr),this.canvas.removeEventListener("pointermove",this.#_r),this.canvas.removeEventListener("pointerup",this.#Cr),this.canvas.addEventListener("pointerdown",this.#Tr),this.#kr&&clearTimeout(this.#kr),this.#kr=setTimeout((()=>{this.#kr=null,this.canvas.removeEventListener("contextmenu",ns)}),10),this.#Xr(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#Ur(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#zr(){this.#Lr=new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)})),this.#Lr.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#Rr}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,n,s,r]=this.#Gr();if(this.setAt(i,n,0,0),this.setDims(s,r),this.#Ur(),this.width){const[i,n]=this.parentDimensions;this.setAspectRatio(this.width*i,this.height*n),this.setAt(t*i,e*n,this.width*i,this.height*n),this.#Ir=!0,this.#Hr(),this.setDims(this.width*i,this.height*n),this.#jr(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#zr(),this.div}#Hr(){if(!this.#Ir)return;const[t,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),this.#Zr()}setDimensions(t,e){const i=Math.round(t),n=Math.round(e);if(this.#Dr===i&&this.#Or===n)return;this.#Dr=i,this.#Or=n,this.canvas.style.visibility="hidden";const[s,r]=this.parentDimensions;this.width=t/s,this.height=e/r,this.fixAndSetPosition(),this.#Rr&&this.#ta(t,e),this.#Hr(),this.#jr(),this.canvas.style.visibility="visible",this.fixDims()}#ta(t,e){const i=this.#ea(),n=(t-i)/this.#xr,s=(e-i)/this.#Er;this.scaleFactor=Math.min(n,s)}#Zr(){const t=this.#ea()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#ia(t){const e=new Path2D;for(let i=0,n=t.length;i<n;i++){const[n,s,r,a]=t[i];0===i&&e.moveTo(...n),e.bezierCurveTo(s[0],s[1],r[0],r[1],a[0],a[1])}return e}static#na(t,e,i){const[n,s,r,a]=e;switch(i){case 0:for(let e=0,i=t.length;e<i;e+=2)t[e]+=n,t[e+1]=a-t[e+1];break;case 90:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=t[e+1]+n,t[e+1]=i+s}break;case 180:for(let e=0,i=t.length;e<i;e+=2)t[e]=r-t[e],t[e+1]+=s;break;case 270:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=r-t[e+1],t[e+1]=a-i}break;default:throw new Error("Invalid rotation")}return t}static#sa(t,e,i){const[n,s,r,a]=e;switch(i){case 0:for(let e=0,i=t.length;e<i;e+=2)t[e]-=n,t[e+1]=a-t[e+1];break;case 90:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=t[e+1]-s,t[e+1]=i-n}break;case 180:for(let e=0,i=t.length;e<i;e+=2)t[e]=r-t[e],t[e+1]-=s;break;case 270:for(let e=0,i=t.length;e<i;e+=2){const i=t[e];t[e]=a-t[e+1],t[e+1]=r-i}break;default:throw new Error("Invalid rotation")}return t}#ra(t,e,i,n){const s=[],r=this.thickness/2,a=t*e+r,o=t*i+r;for(const l of this.paths){const e=[],i=[];for(let n=0,s=l.length;n<s;n++){const[r,h,c,d]=l[n];if(r[0]===d[0]&&r[1]===d[1]&&1===s){const n=t*r[0]+a,s=t*r[1]+o;e.push(n,s),i.push(n,s);break}const u=t*r[0]+a,p=t*r[1]+o,f=t*h[0]+a,g=t*h[1]+o,m=t*c[0]+a,b=t*c[1]+o,v=t*d[0]+a,y=t*d[1]+o;0===n&&(e.push(u,p),i.push(u,p)),e.push(f,g,m,b,v,y),i.push(f,g),n===s-1&&i.push(v,y)}s.push({bezier:bo.#na(e,n,this.rotation),points:bo.#na(i,n,this.rotation)})}return s}#aa(){let t=1/0,e=-1/0,i=1/0,n=-1/0;for(const s of this.paths)for(const[r,a,o,l]of s){const s=_n.bezierBoundingBox(...r,...a,...o,...l);t=Math.min(t,s[0]),i=Math.min(i,s[1]),e=Math.max(e,s[2]),n=Math.max(n,s[3])}return[t,i,e,n]}#ea(){return this.#Rr?Math.ceil(this.thickness*this.parentScale):0}#Br(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!this.#Rr)return void this.#jr();const e=this.#aa(),i=this.#ea();this.#xr=Math.max(Es.MIN_SIZE,e[2]-e[0]),this.#Er=Math.max(Es.MIN_SIZE,e[3]-e[1]);const n=Math.ceil(i+this.#xr*this.scaleFactor),s=Math.ceil(i+this.#Er*this.scaleFactor),[r,a]=this.parentDimensions;this.width=n/r,this.height=s/a,this.setAspectRatio(n,s);const o=this.translationX,l=this.translationY;this.translationX=-e[0],this.translationY=-e[1],this.#Hr(),this.#jr(),this.#Dr=n,this.#Or=s,this.setDims(n,s);const h=t?i/this.scaleFactor/2:0;this.translate(o-this.translationX-h,l-this.translationY-h)}static deserialize(t,e,i){if(t instanceof Qa)return null;const n=super.deserialize(t,e,i);n.thickness=t.thickness,n.color=_n.makeHexColor(...t.color),n.opacity=t.opacity;const[s,r]=n.pageDimensions,a=n.width*s,o=n.height*r,l=n.parentScale,h=t.thickness/2;n.#Rr=!0,n.#Dr=Math.round(a),n.#Or=Math.round(o);const{paths:c,rect:d,rotation:u}=t;for(let{bezier:f}of c){f=bo.#sa(f,d,u);const t=[];n.paths.push(t);let e=l*(f[0]-h),i=l*(f[1]-h);for(let n=2,r=f.length;n<r;n+=6){const s=l*(f[n]-h),r=l*(f[n+1]-h),a=l*(f[n+2]-h),o=l*(f[n+3]-h),c=l*(f[n+4]-h),d=l*(f[n+5]-h);t.push([[e,i],[s,r],[a,o],[c,d]]),e=c,i=d}const s=this.#ia(t);n.bezierPath2D.push(s)}const p=n.#aa();return n.#xr=Math.max(Es.MIN_SIZE,p[2]-p[0]),n.#Er=Math.max(Es.MIN_SIZE,p[3]-p[1]),n.#ta(a,o),n}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),e=Es._colorManager.convert(this.ctx.strokeStyle);return{annotationType:vi.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:this.#ra(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class vo extends Es{#oa=null;#la=null;#ha=null;#ca=null;#da=null;#ua="";#pa=null;#Lr=null;#fa=null;#ga=!1;#ma=!1;static _type="stamp";static _editorType=(()=>vi.STAMP)();constructor(t){super({...t,name:"stampEditor"}),this.#ca=t.bitmapUrl,this.#da=t.bitmapFile}static initialize(t,e){Es.initialize(t,e)}static get supportedTypes(){return cn(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((t=>`image/${t}`)))}static get supportedTypesStr(){return cn(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(vi.STAMP,{bitmapFile:t.getAsFile()})}#ba(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(this.#oa=t.bitmap,e||(this.#la=t.id,this.#ga=t.isSvg),t.file&&(this.#ua=t.file.name),this.#Ur()):this.remove()}#va(){this.#ha=null,this._uiManager.enableWaiting(!1),this.#pa&&this.div.focus()}#ya(){if(this.#la)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#la).then((t=>this.#ba(t,!0))).finally((()=>this.#va()));if(this.#ca){const t=this.#ca;return this.#ca=null,this._uiManager.enableWaiting(!0),void(this.#ha=this._uiManager.imageManager.getFromUrl(t).then((t=>this.#ba(t))).finally((()=>this.#va())))}if(this.#da){const t=this.#da;return this.#da=null,this._uiManager.enableWaiting(!0),void(this.#ha=this._uiManager.imageManager.getFromFile(t).then((t=>this.#ba(t))).finally((()=>this.#va())))}const t=document.createElement("input");t.type="file",t.accept=vo.supportedTypesStr,this.#ha=new Promise((e=>{t.addEventListener("change",(async()=>{if(t.files&&0!==t.files.length){this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(t.files[0]);this.#ba(e)}else this.remove();e()})),t.addEventListener("cancel",(()=>{this.remove(),e()}))})).finally((()=>this.#va())),t.click()}remove(){this.#la&&(this.#oa=null,this._uiManager.imageManager.deleteId(this.#la),this.#pa?.remove(),this.#pa=null,this.#Lr?.disconnect(),this.#Lr=null,this.#fa&&(clearTimeout(this.#fa),this.#fa=null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#la&&null===this.#pa&&this.#ya(),this.isAttachedToDOM||this.parent.add(this))):this.#la&&this.#ya()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#ha||this.#oa||this.#ca||this.#da||this.#la)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),this.#oa?this.#Ur():this.#ya(),this.width){const[i,n]=this.parentDimensions;this.setAt(t*i,e*n,this.width*i,this.height*n)}return this.div}#Ur(){const{div:t}=this;let{width:e,height:i}=this.#oa;const[n,s]=this.pageDimensions,r=.75;if(this.width)e=this.width*n,i=this.height*s;else if(e>r*n||i>r*s){const t=Math.min(r*n/e,r*s/i);e*=t,i*=t}const[a,o]=this.parentDimensions;this.setDims(e*a/n,i*o/s),this._uiManager.enableWaiting(!1);const l=this.#pa=document.createElement("canvas");t.append(l),t.hidden=!1,this.#wa(e,i),this.#zr(),this.#ma||(this.parent.addUndoableEditor(this),this.#ma=!0),this._reportTelemetry({action:"inserted_image"}),this.#ua&&l.setAttribute("aria-label",this.#ua)}#Aa(t,e){const[i,n]=this.parentDimensions;this.width=t/i,this.height=e/n,this.setDims(t,e),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#fa&&clearTimeout(this.#fa);this.#fa=setTimeout((()=>{this.#fa=null,this.#wa(t,e)}),200)}#Ea(t,e){const{width:i,height:n}=this.#oa;let s=i,r=n,a=this.#oa;for(;s>2*t||r>2*e;){const i=s,n=r;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const o=new OffscreenCanvas(s,r);o.getContext("2d").drawImage(a,0,0,i,n,0,0,s,r),a=o.transferToImageBitmap()}return a}#wa(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=this.#pa;if(!i||i.width===t&&i.height===e)return;i.width=t,i.height=e;const n=this.#ga?this.#oa:this.#Ea(t,e);if(this._uiManager.hasMLManager&&!this.hasAltText()){const i=new OffscreenCanvas(t,e).getContext("2d");i.drawImage(n,0,0,n.width,n.height,0,0,t,e),this._uiManager.mlGuess({service:"image-to-text",request:{data:i.getImageData(0,0,t,e).data,width:t,height:e,channels:4}}).then((t=>{const e=t?.output||"";this.parent&&e&&!this.hasAltText()&&(this.altTextData={altText:e,decorative:!1})}))}const s=i.getContext("2d");s.filter=this._uiManager.hcmFilter,s.drawImage(n,0,0,n.width,n.height,0,0,t,e)}getImageForAltText(){return this.#pa}#xa(t){if(t){if(this.#ga){const t=this._uiManager.imageManager.getSvgUrl(this.#la);if(t)return t}const t=document.createElement("canvas");({width:t.width,height:t.height}=this.#oa);return t.getContext("2d").drawImage(this.#oa,0,0),t.toDataURL()}if(this.#ga){const[t,e]=this.pageDimensions,i=Math.round(this.width*t*$n.PDF_TO_CSS_UNITS),n=Math.round(this.height*e*$n.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(i,n);return s.getContext("2d").drawImage(this.#oa,0,0,this.#oa.width,this.#oa.height,0,0,i,n),s.transferToImageBitmap()}return structuredClone(this.#oa)}#zr(){this.#Lr=new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.#Aa(e.width,e.height)})),this.#Lr.observe(this.div)}static deserialize(t,e,i){if(t instanceof so)return null;const n=super.deserialize(t,e,i),{rect:s,bitmapUrl:r,bitmapId:a,isSvg:o,accessibilityData:l}=t;a&&i.imageManager.isValidId(a)?n.#la=a:n.#ca=r,n.#ga=o;const[h,c]=n.pageDimensions;return n.width=(s[2]-s[0])/h,n.height=(s[3]-s[1])/c,l&&(n.altTextData=l),n}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;const i={annotationType:vi.STAMP,bitmapId:this.#la,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#ga,structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=this.#xa(!0),i.accessibilityData=this.altTextData,i;const{decorative:n,altText:s}=this.altTextData;if(!n&&s&&(i.accessibilityData={type:"Figure",alt:s}),null===e)return i;e.stamps||=new Map;const r=this.#ga?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(e.stamps.has(this.#la)){if(this.#ga){const t=e.stamps.get(this.#la);r>t.area&&(t.area=r,t.serialized.bitmap.close(),t.serialized.bitmap=this.#xa(!1))}}else e.stamps.set(this.#la,{area:r,serialized:i}),i.bitmap=this.#xa(!1);return i}}class yo{#Fn;#_a=!1;#Sa=null;#Ca=null;#Ta=null;#ka=null;#Pa=null;#Ra=(()=>new Map)();#Ma=!1;#Ia=!1;#La=!1;#Da=null;#u;static _initialized=!1;static#O=(()=>new Map([lo,bo,vo,mo].map((t=>[t._editorType,t]))))();constructor(t){let{uiManager:e,pageIndex:i,div:n,accessibilityManager:s,annotationLayer:r,drawLayer:a,textLayer:o,viewport:l,l10n:h}=t;const c=[...yo.#O.values()];if(!yo._initialized){yo._initialized=!0;for(const t of c)t.initialize(h,e)}e.registerEditorTypes(c),this.#u=e,this.pageIndex=i,this.div=n,this.#Fn=s,this.#Sa=r,this.viewport=l,this.#Da=o,this.drawLayer=a,this.#u.addLayer(this)}get isEmpty(){return 0===this.#Ra.size}get isInvisible(){return this.isEmpty&&this.#u.getMode()===vi.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.#u.getMode();switch(this.#Oa(),t){case vi.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case vi.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case vi.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of yo.#O.values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#Da?.div}addInkEditorIfNeeded(t){if(this.#u.getMode()!==vi.INK)return;if(!t)for(const e of this.#Ra.values())if(e.isEmpty())return void e.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}togglePointerEvents(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.#Sa?.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of this.#Ra.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!this.#Sa)return;const e=this.#Sa.getEditableAnnotations();for(const i of e){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id))continue;if(t.has(i.data.id))continue;const e=this.deserialize(i);e&&(this.addOrRebuild(e),e.enableEditing())}}disable(){this.#La=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const n of this.#Ra.values())n.disableEditing(),n.annotationElementId&&(null===n.serialize()?(e.set(n.annotationElementId,n),this.getEditableAnnotation(n.annotationElementId)?.show(),n.remove()):t.set(n.annotationElementId,n));if(this.#Sa){const i=this.#Sa.getEditableAnnotations();for(const n of i){const{id:i}=n.data;if(this.#u.isDeletedAnnotationElement(i))continue;let s=e.get(i);s?(s.resetAnnotationElement(n),s.show(!1),n.show()):(s=t.get(i),s&&(this.#u.addChangedExistingAnnotation(s),s.renderAnnotationElement(n),s.show(!1)),n.show())}}this.#Oa(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const n of yo.#O.values())i.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#La=!1}getEditableAnnotation(t){return this.#Sa?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){this.div.tabIndex=-1,this.#Da?.div&&!this.#ka&&(this.#ka=this.#Fa.bind(this),this.#Da.div.addEventListener("pointerdown",this.#ka),this.#Da.div.classList.add("highlighting"))}disableTextSelection(){this.div.tabIndex=0,this.#Da?.div&&this.#ka&&(this.#Da.div.removeEventListener("pointerdown",this.#ka),this.#ka=null,this.#Da.div.classList.remove("highlighting"))}#Fa(t){if(this.#u.unselectAll(),t.target===this.#Da.div){const{isMac:e}=En.platform;if(0!==t.button||t.ctrlKey&&e)return;this.#u.showAllEditors("highlight",!0,!0),this.#Da.div.classList.add("free"),mo.startHighlighting(this,"ltr"===this.#u.direction,t),this.#Da.div.addEventListener("pointerup",(()=>{this.#Da.div.classList.remove("free")}),{once:!0}),t.preventDefault()}}enableClick(){this.#Ta||(this.#Ta=this.pointerdown.bind(this),this.#Ca=this.pointerup.bind(this),this.div.addEventListener("pointerdown",this.#Ta),this.div.addEventListener("pointerup",this.#Ca))}disableClick(){this.#Ta&&(this.div.removeEventListener("pointerdown",this.#Ta),this.div.removeEventListener("pointerup",this.#Ca),this.#Ta=null,this.#Ca=null)}attach(t){this.#Ra.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#Ra.delete(t.id),this.#Fn?.removePointerInTextLayer(t.contentDiv),!this.#La&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#Ia||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),Es.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#Pa&&(t._focusEventsAllowed=!1,this.#Pa=setTimeout((()=>{this.#Pa=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0}),e.focus())}),0)),t._structTreeParentId=this.#Fn?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return this.#u.getId()}get#Na(){return yo.#O.get(this.#u.getMode())}#Ba(t){const e=this.#Na;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#Na?.canCreateNewEmptyEditor()}pasteEditor(t,e){this.#u.updateToolbar(t),this.#u.updateMode(t);const{offsetX:i,offsetY:n}=this.#ja(),s=this.getNextId(),r=this.#Ba({parent:this,id:s,x:i,y:n,uiManager:this.#u,isCentered:!0,...e});r&&this.add(r)}deserialize(t){return yo.#O.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.getNextId(),s=this.#Ba({parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...i});return s&&this.add(s),s}#ja(){const{x:t,y:e,width:i,height:n}=this.div.getBoundingClientRect(),s=Math.max(0,t),r=Math.max(0,e),a=(s+Math.min(window.innerWidth,t+i))/2-t,o=(r+Math.min(window.innerHeight,e+n))/2-e,[l,h]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:h}}addNewEditor(){this.createAndAddNewEditor(this.#ja(),!0)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}isSelected(t){return this.#u.isSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=En.platform;0!==t.button||t.ctrlKey&&e||t.target===this.div&&this.#Ma&&(this.#Ma=!1,this.#_a?this.#u.getMode()!==vi.STAMP?this.createAndAddNewEditor(t,!1):this.#u.unselectAll():this.#_a=!0)}pointerdown(t){if(this.#u.getMode()===vi.HIGHLIGHT&&this.enableTextSelection(),this.#Ma)return void(this.#Ma=!1);const{isMac:e}=En.platform;if(0!==t.button||t.ctrlKey&&e)return;if(t.target!==this.div)return;this.#Ma=!0;const i=this.#u.getActive();this.#_a=!i||i.isEmpty()}findNewParent(t,e,i){const n=this.#u.findParent(e,i);return null!==n&&n!==this&&(n.changeParent(t),!0)}destroy(){this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#Pa&&(clearTimeout(this.#Pa),this.#Pa=null);for(const t of this.#Ra.values())this.#Fn?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#Ra.clear(),this.#u.removeLayer(this)}#Oa(){this.#Ia=!0;for(const t of this.#Ra.values())t.isEmpty()&&t.remove();this.#Ia=!1}render(t){let{viewport:e}=t;this.viewport=e,ds(this.div,e);for(const i of this.#u.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update(t){let{viewport:e}=t;this.#u.commitOrRemove(),this.#Oa();const i=this.viewport.rotation,n=e.rotation;if(this.viewport=e,ds(this.div,{rotation:n}),i!==n)for(const s of this.#Ra.values())s.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class wo{#mn=null;#m=0;#Ua=(()=>new Map)();#za=(()=>new Map)();constructor(t){let{pageIndex:e}=t;this.pageIndex=e}setParent(t){if(this.#mn){if(this.#mn!==t){if(this.#Ua.size>0)for(const e of this.#Ua.values())e.remove(),t.append(e);this.#mn=t}}else this.#mn=t}static get _svgFactory(){return cn(this,"_svgFactory",new Kn)}static#Ha(t){let{x:e=0,y:i=0,width:n=1,height:s=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{style:r}=t;r.top=100*i+"%",r.left=100*e+"%",r.width=100*n+"%",r.height=100*s+"%"}#Ga(t){const e=wo._svgFactory.create(1,1,!0);return this.#mn.append(e),e.setAttribute("aria-hidden",!0),wo.#Ha(e,t),e}#$a(t,e){const i=wo._svgFactory.createElement("clipPath");t.append(i);const n=`clip_${e}`;i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");const s=wo._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),n}highlight(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=this.#m++,r=this.#Ga(t.box);r.classList.add("highlight"),t.free&&r.classList.add("free");const a=wo._svgFactory.createElement("defs");r.append(a);const o=wo._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("d",t.toSVGPath()),n&&this.#za.set(s,o);const h=this.#$a(a,l),c=wo._svgFactory.createElement("use");return r.append(c),r.setAttribute("fill",e),r.setAttribute("fill-opacity",i),c.setAttribute("href",`#${l}`),this.#Ua.set(s,r),{id:s,clipPathId:`url(#${h})`}}highlightOutline(t){const e=this.#m++,i=this.#Ga(t.box);i.classList.add("highlightOutline");const n=wo._svgFactory.createElement("defs");i.append(n);const s=wo._svgFactory.createElement("path");n.append(s);const r=`path_p${this.pageIndex}_${e}`;let a;if(s.setAttribute("id",r),s.setAttribute("d",t.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke"),t.free){i.classList.add("free");const t=wo._svgFactory.createElement("mask");n.append(t),a=`mask_p${this.pageIndex}_${e}`,t.setAttribute("id",a),t.setAttribute("maskUnits","objectBoundingBox");const s=wo._svgFactory.createElement("rect");t.append(s),s.setAttribute("width","1"),s.setAttribute("height","1"),s.setAttribute("fill","white");const o=wo._svgFactory.createElement("use");t.append(o),o.setAttribute("href",`#${r}`),o.setAttribute("stroke","none"),o.setAttribute("fill","black"),o.setAttribute("fill-rule","nonzero"),o.classList.add("mask")}const o=wo._svgFactory.createElement("use");i.append(o),o.setAttribute("href",`#${r}`),a&&o.setAttribute("mask",`url(#${a})`);const l=o.cloneNode();return i.append(l),o.classList.add("mainOutline"),l.classList.add("secondaryOutline"),this.#Ua.set(e,i),e}finalizeLine(t,e){const i=this.#za.get(t);this.#za.delete(t),this.updateBox(t,e.box),i.setAttribute("d",e.toSVGPath())}updateLine(t,e){this.#Ua.get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),this.#za.delete(t)}updatePath(t,e){this.#za.get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){wo.#Ha(this.#Ua.get(t),e)}show(t,e){this.#Ua.get(t).classList.toggle("hidden",!e)}rotate(t,e){this.#Ua.get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){this.#Ua.get(t).setAttribute("fill",e)}changeOpacity(t,e){this.#Ua.get(t).setAttribute("fill-opacity",e)}addClass(t,e){this.#Ua.get(t).classList.add(e)}removeClass(t,e){this.#Ua.get(t).classList.remove(e)}remove(t){null!==this.#mn&&(this.#Ua.get(t).remove(),this.#Ua.delete(t))}destroy(){this.#mn=null;for(const t of this.#Ua.values())t.remove();this.#Ua.clear()}}var Ao=ri.AnnotationLayer,Eo=ri.AnnotationMode,xo=ri.GlobalWorkerOptions,_o=ri.PDFDataRangeTransport,So=ri.TextLayer,Co=ri.getDocument,To="SET_ZOOM_LEVEL",ko=function(t){return{type:To,value:t}},Po="SET_PDF_PAGINATED",Ro="SET_NUM_PAGES",Mo=function(t){return{type:Ro,value:t}},Io="SET_CURRENT_PAGE",Lo=function(t){return{type:Io,value:t}},Do=function(){return Do=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Do.apply(this,arguments)},Oo={zoomLevel:1,paginated:!0,numPages:0,currentPage:1},Fo=function(t,e){switch(void 0===t&&(t=Oo),e.type){case To:var i=e.value;return Do(Do({},t),{zoomLevel:i});case Po:i=e.value;return Do(Do({},t),{paginated:i});case Ro:i=e.value;return Do(Do({},t),{numPages:i});case Io:i=e.value;return Do(Do({},t),{currentPage:i});default:return t}},No=function(){return No=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},No.apply(this,arguments)},Bo=(0,s.createContext)({state:Oo,dispatch:function(){return null}}),jo=function(t){var e=t.children,i=t.mainState,n=(0,s.useReducer)(Fo,No(No({},Oo),{mainState:i})),r=n[0],a=n[1];return s.createElement(Bo.Provider,{value:{state:r,dispatch:a}},e)},Uo=function(){return Uo=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Uo.apply(this,arguments)},zo=function(t){return s.createElement(Go,Uo({},t,{reverse:!0}))},Ho=function(t){return s.createElement(Go,Uo({},t))},Go=function(t){var e=t.color,i=t.size,n=t.reverse;return s.createElement("svg",{width:i||"100%",height:i||"100%",style:{transform:"".concat(n?"rotate(180deg)":"")},viewBox:"0 0 12 12",version:"1.1"},s.createElement("g",{id:"Icons",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("g",{id:"Rounded",transform:"translate(-548.000000, -1000.000000)"},s.createElement("g",{id:"AV",transform:"translate(100.000000, 852.000000)"},s.createElement("g",{id:"-Round-/-AV-/-skip_next",transform:"translate(442.000000, 142.000000)"},s.createElement("g",null,s.createElement("rect",{id:"Rectangle-Copy-52",x:"0",y:"0",width:"24",height:"24"}),s.createElement("path",{d:"M7.58,16.89 L13.35,12.82 C13.91,12.42 13.91,11.58 13.35,11.19 L7.58,7.11 C6.91,6.65 6,7.12 6,7.93 L6,16.07 C6,16.88 6.91,17.35 7.58,16.89 Z M16,7 L16,17 C16,17.55 16.45,18 17,18 C17.55,18 18,17.55 18,17 L18,7 C18,6.45 17.55,6 17,6 C16.45,6 16,6.45 16,7 Z",id:"icon_color",fill:e||"#aaa"})))))))},$o=function(t){var e=t.color,i=t.size,n=t.reverse;return s.createElement("svg",{width:i||"100%",height:i||"100%",style:{transform:"".concat(n?"rotate(180deg)":"")},id:"Layer_1",viewBox:"0 0 24 24"},s.createElement("path",{d:"M20.57,9.43A8,8,0,0,0,5.26,10,5,5,0,1,0,5,20h5V18H5a3,3,0,0,1,0-6,3.1,3.1,0,0,1,.79.12l1.12.31.14-1.15a6,6,0,0,1,11.74-.82l.15.54.54.16A3.46,3.46,0,0,1,22,14.5,3.5,3.5,0,0,1,18.5,18H16v2h2.5A5.48,5.48,0,0,0,20.57,9.43Z",fill:e||"#aaa"}),s.createElement("polygon",{points:"12 11 12 15.59 10.71 14.29 9.29 15.71 13 19.41 16.71 15.71 15.29 14.29 14 15.59 14 11 12 11",fill:e||"#aaa"}))},Vo=function(t){return s.createElement(qo,Uo({},t))},Wo=function(t){return s.createElement(qo,Uo({},t,{reverse:!0}))},qo=function(t){var e=t.color,i=t.size,n=t.reverse;return s.createElement("svg",{width:i||"100%",height:i||"100%",viewBox:"0 0 32 32",version:"1.1"},s.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("g",{id:"search-plus-icon",fill:e||"#aaa"},s.createElement("path",{id:"search-plus",d:n?"M 13 13 L 16 13 L 19 13 L 19 16 L 16 16 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z":"M 13 13 L 13 10 L 16 10 L 16 13 L 19 13 L 19 16 L 16 16 L 16 19 L 13 19 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z"}))))},Ko=function(t){var e=t.color,i=t.size;return s.createElement("svg",{width:i||"100%",height:i||"100%",viewBox:"0 0 24 24"},s.createElement("path",{fill:e||"#aaa",d:"M9.29,13.29,4,18.59V17a1,1,0,0,0-2,0v4a1,1,0,0,0,.08.38,1,1,0,0,0,.54.54A1,1,0,0,0,3,22H7a1,1,0,0,0,0-2H5.41l5.3-5.29a1,1,0,0,0-1.42-1.42ZM5.41,4H7A1,1,0,0,0,7,2H3a1,1,0,0,0-.38.08,1,1,0,0,0-.54.54A1,1,0,0,0,2,3V7A1,1,0,0,0,4,7V5.41l5.29,5.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42ZM21,16a1,1,0,0,0-1,1v1.59l-5.29-5.3a1,1,0,0,0-1.42,1.42L18.59,20H17a1,1,0,0,0,0,2h4a1,1,0,0,0,.38-.08,1,1,0,0,0,.54-.54A1,1,0,0,0,22,21V17A1,1,0,0,0,21,16Zm.92-13.38a1,1,0,0,0-.54-.54A1,1,0,0,0,21,2H17a1,1,0,0,0,0,2h1.59l-5.3,5.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L20,5.41V7a1,1,0,0,0,2,0V3A1,1,0,0,0,21.92,2.62Z"}))},Yo=function(t){var e=t.color,i=t.size,n=t.reverse;return s.createElement("svg",{width:i||"100%",height:i||"100%",style:{transform:"".concat(n?"rotate(90deg)":"")},version:"1.1",id:"Scroll_1",viewBox:"0 0 297 297",xmlSpace:"preserve"},s.createElement("path",{fill:e||"#aaa",d:"M206.004,200.723h-31.231V96.277h31.231c0.005,0,0.014,0,0.019,0c5.289,0,9.575-4.287,9.575-9.574\n  c0-2.342-0.841-4.488-2.236-6.151L156.168,3.851C154.36,1.428,151.515,0,148.492,0c-3.023,0-5.868,1.428-7.675,3.851L83.302,80.98\n  c-2.166,2.902-2.507,6.779-0.883,10.017c1.624,3.236,4.936,5.28,8.559,5.28h31.231v104.445H90.978c-3.623,0-6.934,2.044-8.559,5.28\n  c-1.624,3.237-1.283,7.114,0.883,10.017l57.513,77.129c1.808,2.424,4.652,3.852,7.675,3.852c3.023,0,5.868-1.428,7.676-3.852\n  l57.514-77.129c2.164-2.902,2.507-6.779,0.883-10.017C212.938,202.767,209.627,200.723,206.004,200.723z"}))},Xo=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};const Jo=function(){var t=(0,s.useContext)(Bo),e=t.state,i=e.currentPage,n=e.numPages,r=t.dispatch;return s.createElement(il,{id:"pdf-pagination"},s.createElement(nl,{id:"pdf-pagination-prev",onClick:function(){return r(Lo(i-1))},disabled:1===i},s.createElement(zo,{color:"#000",size:"50%"})),s.createElement(rl,{id:"pdf-pagination-info"},"Page ",i,"/",n),s.createElement(sl,{id:"pdf-pagination-next",onClick:function(){return r(Lo(i+1))},disabled:i>=n},s.createElement(Ho,{color:"#000",size:"50%"})))};var Zo,Qo,tl,el,il=Dt.div(Zo||(Zo=Xo(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),nl=Dt(ee)(Qo||(Qo=Xo(["\n  width: 30px;\n  height: 30px;\n  margin: 0 5px;\n\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"],["\n  width: 30px;\n  height: 30px;\n  margin: 0 5px;\n\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"]))),sl=Dt(nl)(tl||(tl=Xo(["\n  margin: 0 20px 0 5px;\n"],["\n  margin: 0 20px 0 5px;\n"]))),rl=Dt.div(el||(el=Xo(["\n  color: ",";\n  font-size: 14px;\n  text-align: left;\n\n  @media (max-width: 768px) {\n    font-size: 10px;\n  }\n"],["\n  color: ",";\n  font-size: 14px;\n  text-align: left;\n\n  @media (max-width: 768px) {\n    font-size: 10px;\n  }\n"])),(function(t){return t.theme.text_primary})),al=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};const ol=function(){var t=(0,s.useContext)(Bo),e=t.state,i=e.mainState,n=e.paginated,r=e.zoomLevel,a=e.numPages,o=t.dispatch,l=(null===i||void 0===i?void 0:i.currentDocument)||null;return s.createElement(dl,{id:"pdf-controls"},n&&a>1&&s.createElement(Jo,null),(null===l||void 0===l?void 0:l.fileData)&&s.createElement(pl,{id:"pdf-download",href:null===l||void 0===l?void 0:l.fileData,download:null===l||void 0===l?void 0:l.uri},s.createElement($o,{color:"#000",size:"75%"})),s.createElement(ul,{id:"pdf-zoom-out",onMouseDown:function(){return o(ko(r-.1))}},s.createElement(Wo,{color:"#000",size:"80%"})),s.createElement(ul,{id:"pdf-zoom-in",onMouseDown:function(){return o(ko(r+.1))}},s.createElement(Vo,{color:"#000",size:"80%"})),s.createElement(ul,{id:"pdf-zoom-reset",onMouseDown:function(){return o(ko(Oo.zoomLevel))},disabled:r===Oo.zoomLevel},s.createElement(Ko,{color:"#000",size:"70%"})),a>1&&s.createElement(ul,{id:"pdf-toggle-pagination",onMouseDown:function(){return o({type:Po,value:!n})}},s.createElement(Yo,{color:"#000",size:"70%",reverse:n})))};var ll,hl,cl,dl=Dt.div(ll||(ll=al(["\n  display: flex;\n  position: sticky;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  justify-content: flex-end;\n  padding: 8px;\n  background-color: ",";\n  box-shadow: 0px 2px 3px #00000033;\n\n  @media (max-width: 768px) {\n    padding: 6px;\n  }\n"],["\n  display: flex;\n  position: sticky;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  justify-content: flex-end;\n  padding: 8px;\n  background-color: ",";\n  box-shadow: 0px 2px 3px #00000033;\n\n  @media (max-width: 768px) {\n    padding: 6px;\n  }\n"])),(function(t){return t.theme.tertiary})),ul=Dt(ee)(hl||(hl=al(["\n  width: 30px;\n  height: 30px;\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"],["\n  width: 30px;\n  height: 30px;\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"]))),pl=Dt(ie)(cl||(cl=al(["\n  width: 30px;\n  height: 30px;\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"],["\n  width: 30px;\n  height: 30px;\n  @media (max-width: 768px) {\n    width: 25px;\n    height: 25px;\n  }\n"]))),fl=i(579),gl=function(t,e,i){if(i||2===arguments.length)for(var n,s=0,r=e.length;s<r;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))},ml=gl(gl(gl(gl(gl(gl(gl(gl(gl(gl(gl(gl(gl(gl(gl(gl(gl(gl([],["onCopy","onCut","onPaste"],!0),["onCompositionEnd","onCompositionStart","onCompositionUpdate"],!0),["onFocus","onBlur"],!0),["onInput","onInvalid","onReset","onSubmit"],!0),["onLoad","onError"],!0),["onKeyDown","onKeyPress","onKeyUp"],!0),["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],!0),["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],!0),["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],!0),["onSelect"],!0),["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],!0),["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],!0),["onScroll"],!0),["onWheel"],!0),["onAnimationStart","onAnimationEnd","onAnimationIteration"],!0),["onTransitionEnd"],!0),["onChange"],!0),["onToggle"],!0);function bl(t,e){var i={};return ml.forEach((function(n){var s=t[n];s&&(i[n]=e?function(t){return s(t,e(n))}:s)})),i}function vl(t){var e=!1;return{promise:new Promise((function(i,n){t.then((function(t){return!e&&i(t)})).catch((function(t){return!e&&n(t)}))})),cancel:function(){e=!0}}}function yl(t){var e,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(i=yl(t[e]))&&(n&&(n+=" "),n+=i)}else for(i in t)t[i]&&(n&&(n+=" "),n+=i);return n}const wl=function(){for(var t,e,i=0,n="",s=arguments.length;i<s;i++)(t=arguments[i])&&(e=yl(t))&&(n&&(n+=" "),n+=e);return n};var Al="Invariant failed";function El(t,e){if(!t)throw new Error(Al)}var xl=i(440),_l=Object.prototype.hasOwnProperty;function Sl(t,e,i){for(i of t.keys())if(Cl(i,e))return i}function Cl(t,e){var i,n,s;if(t===e)return!0;if(t&&e&&(i=t.constructor)===e.constructor){if(i===Date)return t.getTime()===e.getTime();if(i===RegExp)return t.toString()===e.toString();if(i===Array){if((n=t.length)===e.length)for(;n--&&Cl(t[n],e[n]););return-1===n}if(i===Set){if(t.size!==e.size)return!1;for(n of t){if((s=n)&&"object"===typeof s&&!(s=Sl(e,s)))return!1;if(!e.has(s))return!1}return!0}if(i===Map){if(t.size!==e.size)return!1;for(n of t){if((s=n[0])&&"object"===typeof s&&!(s=Sl(e,s)))return!1;if(!Cl(n[1],e.get(s)))return!1}return!0}if(i===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(i===DataView){if((n=t.byteLength)===e.byteLength)for(;n--&&t.getInt8(n)===e.getInt8(n););return-1===n}if(ArrayBuffer.isView(t)){if((n=t.byteLength)===e.byteLength)for(;n--&&t[n]===e[n];);return-1===n}if(!i||"object"===typeof t){for(i in n=0,t){if(_l.call(t,i)&&++n&&!_l.call(e,i))return!1;if(!(i in e)||!Cl(t[i],e[i]))return!1}return Object.keys(e).length===n}}return t!==t&&e!==e}const Tl=(0,s.createContext)(null);function kl(t){let{children:e,type:i}=t;return(0,fl.jsx)("div",{className:`react-pdf__message react-pdf__message--${i}`,children:e})}class Pl{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return El(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){El(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise((e=>{El(this.pdfDocument),El(t),"string"===typeof t?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)})).then((t=>{El(Array.isArray(t));const e=t[0];new Promise((t=>{El(this.pdfDocument),e instanceof Object?this.pdfDocument.getPageIndex(e).then((e=>{t(e)})).catch((()=>{El(!1)})):"number"===typeof e?t(e):El(!1)})).then((e=>{const i=e+1;El(this.pdfViewer),El(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:e,pageNumber:i})}))}))}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;El(this.pdfViewer),El(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,i){t.href=e,t.rel=this.externalLinkRel||"noopener noreferrer nofollow",t.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Rl={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Ml="undefined"!==typeof document,Il=Ml&&"file:"===window.location.protocol;function Ll(t){return function(t){return"undefined"!==typeof t}(t)&&null!==t}function Dl(t){return function(t){return"string"===typeof t}(t)&&/^data:/.test(t)}function Ol(t){El(Dl(t));const[e="",i=""]=t.split(",");return-1!==e.split(";").indexOf("base64")?atob(i):unescape(i)}function Fl(){return Ml&&window.devicePixelRatio||1}const Nl="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Bl(){xl(!Il,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Nl}`)}function jl(t){t&&t.cancel&&t.cancel()}function Ul(t,e){return Object.defineProperty(t,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.view[3]},configurable:!0}),t}function zl(t,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return t}}function Hl(){return(0,s.useReducer)(zl,{value:void 0,error:void 0})}var Gl=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function o(t){try{l(n.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,o)}l((n=n.apply(t,e||[])).next())}))},$l=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]])}return i};const{Tm:Vl}=n,Wl=(t,e)=>{switch(e){case Rl.NEED_PASSWORD:t(prompt("Enter the password to open this PDF file."));break;case Rl.INCORRECT_PASSWORD:t(prompt("Invalid password. Please try again."));break}};function ql(t){return"object"===typeof t&&null!==t&&("data"in t||"range"in t||"url"in t)}const Kl=(0,s.forwardRef)((function(t,e){var{children:i,className:n,error:r="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:h,imageResourcesPath:c,loading:d="Loading PDF\u2026",noData:u="No PDF file specified.",onItemClick:p,onLoadError:f,onLoadProgress:g,onLoadSuccess:m,onPassword:b=Wl,onSourceError:v,onSourceSuccess:y,options:w,renderMode:A,rotate:E}=t,x=$l(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[_,S]=Hl(),{value:C,error:T}=_,[k,P]=Hl(),{value:R,error:M}=k,I=(0,s.useRef)(new Pl),L=(0,s.useRef)([]),D=(0,s.useRef)(void 0),O=(0,s.useRef)(void 0);l&&l!==D.current&&ql(l)&&(xl(!Cl(l,D.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),D.current=l),w&&w!==O.current&&(xl(!Cl(w,O.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),O.current=w);const F=(0,s.useRef)({scrollPageIntoView:t=>{const{dest:e,pageNumber:i,pageIndex:n=i-1}=t;if(p)return void p({dest:e,pageIndex:n,pageNumber:i});const s=L.current[n];s?s.scrollIntoView():xl(!1,`An internal link leading to page ${i} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});(0,s.useImperativeHandle)(e,(()=>({linkService:I,pages:L,viewer:F})),[]),(0,s.useEffect)((function(){S({type:"RESET"})}),[l,S]);const N=(0,s.useCallback)((()=>Gl(this,void 0,void 0,(function*(){if(!l)return null;if("string"===typeof l){if(Dl(l)){return{data:Ol(l)}}return Bl(),{url:l}}if(l instanceof Vl)return{range:l};if(l instanceof ArrayBuffer)return{data:l};if(Ml&&function(t){return El(Ml),t instanceof Blob}(l)){const t=yield function(t){return new Promise(((e,i)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return i(new Error("Error while reading a file."));e(n.result)},n.onerror=t=>{if(!t.target)return i(new Error("Error while reading a file."));const{error:e}=t.target;if(!e)return i(new Error("Error while reading a file."));switch(e.code){case e.NOT_FOUND_ERR:return i(new Error("Error while reading a file: File not found."));case e.SECURITY_ERR:return i(new Error("Error while reading a file: Security error."));case e.ABORT_ERR:return i(new Error("Error while reading a file: Aborted."));default:return i(new Error("Error while reading a file."))}},n.readAsArrayBuffer(t)}))}(l);return{data:t}}if(El("object"===typeof l),El(ql(l)),"url"in l&&"string"===typeof l.url){if(Dl(l.url)){const{url:t}=l,e=$l(l,["url"]),i=Ol(t);return Object.assign({data:i},e)}Bl()}return l}))),[l]);function B(t,e){L.current[t]=e}function j(t){delete L.current[t]}(0,s.useEffect)((()=>{const t=vl(N());return t.promise.then((t=>{S({type:"RESOLVE",value:t})})).catch((t=>{S({type:"REJECT",error:t})})),()=>{jl(t)}}),[N,S]),(0,s.useEffect)((()=>{"undefined"!==typeof C&&(!1!==C?y&&y():T&&(xl(!1,T.toString()),v&&v(T)))}),[C]),(0,s.useEffect)((function(){P({type:"RESET"})}),[P,C]),(0,s.useEffect)((function(){if(!C)return;const t=Object.assign(Object.assign({},C),w),e=Co(t);g&&(e.onProgress=g),b&&(e.onPassword=b);const i=e;return i.promise.then((t=>{P({type:"RESOLVE",value:t})})).catch((t=>{i.destroyed||P({type:"REJECT",error:t})})),()=>{i.destroy()}}),[w,P,C]),(0,s.useEffect)((()=>{"undefined"!==typeof R&&(!1!==R?R&&(m&&m(R),L.current=new Array(R.numPages),I.current.setDocument(R)):M&&(xl(!1,M.toString()),f&&f(M)))}),[R]),(0,s.useEffect)((function(){I.current.setViewer(F.current),I.current.setExternalLinkRel(a),I.current.setExternalLinkTarget(o)}),[a,o]);const U=(0,s.useMemo)((()=>({imageResourcesPath:c,linkService:I.current,onItemClick:p,pdf:R,registerPage:B,renderMode:A,rotate:E,unregisterPage:j})),[c,p,R,A,E]),z=(0,s.useMemo)((()=>bl(x,(()=>R))),[x,R]);return(0,fl.jsx)("div",Object.assign({className:wl("react-pdf__Document",n),ref:h,style:{"--scale-factor":"1"}},z,{children:l?void 0===R||null===R?(0,fl.jsx)(kl,{type:"loading",children:"function"===typeof d?d():d}):!1===R?(0,fl.jsx)(kl,{type:"error",children:"function"===typeof r?r():r}):(0,fl.jsx)(Tl.Provider,{value:U,children:i}):(0,fl.jsx)(kl,{type:"no-data",children:"function"===typeof u?u():u})}))})),Yl=Kl;function Xl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.filter(Boolean);return i.length<=1?i[0]||null:function(t){i.forEach((function(e){"function"===typeof e?e(t):e&&(e.current=t)}))}}const Jl=(0,s.createContext)(null),Zl={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Ql=/^H(\d+)$/;function th(t){return"children"in t}function eh(t){return!!th(t)&&(1===t.children.length&&0 in t.children&&"id"in t.children[0])}function ih(t){const e={};if(th(t)){const{role:i}=t,n=i.match(Ql);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(function(t){return t in Zl}(i)){const t=Zl[i];t&&(e.role=t)}}return e}function nh(t){const e={};if(th(t)){if(void 0!==t.alt&&(e["aria-label"]=t.alt),void 0!==t.lang&&(e.lang=t.lang),eh(t)){const[i]=t.children;if(i){const t=nh(i);return Object.assign(Object.assign({},e),t)}}}else"id"in t&&(e["aria-owns"]=t.id);return e}function sh(t){return t?Object.assign(Object.assign({},ih(t)),nh(t)):null}function rh(t){let{className:e,node:i}=t;const n=(0,s.useMemo)((()=>sh(i)),[i]),r=(0,s.useMemo)((()=>th(i)?eh(i)?null:i.children.map(((t,e)=>(0,fl.jsx)(rh,{node:t},e))):null),[i]);return(0,fl.jsx)("span",Object.assign({className:e},n,{children:r}))}function ah(){return(0,s.useContext)(Jl)}function oh(){const t=ah();El(t);const{onGetStructTreeError:e,onGetStructTreeSuccess:i}=t,[n,r]=Hl(),{value:a,error:o}=n,{customTextRenderer:l,page:h}=t;return(0,s.useEffect)((function(){r({type:"RESET"})}),[r,h]),(0,s.useEffect)((function(){if(l)return;if(!h)return;const t=vl(h.getStructTree()),e=t;return t.promise.then((t=>{r({type:"RESOLVE",value:t})})).catch((t=>{r({type:"REJECT",error:t})})),()=>jl(e)}),[l,h,r]),(0,s.useEffect)((()=>{void 0!==a&&(!1!==a?a&&i&&i(a):o&&(xl(!1,o.toString()),e&&e(o)))}),[a]),a?(0,fl.jsx)(rh,{className:"react-pdf__Page__structTree structTree",node:a}):null}const lh=Eo;function hh(t){const e=ah();El(e);const i=Object.assign(Object.assign({},e),t),{_className:n,canvasBackground:r,devicePixelRatio:a=Fl(),onRenderError:o,onRenderSuccess:l,page:h,renderForms:c,renderTextLayer:d,rotate:u,scale:p}=i,{canvasRef:f}=t;El(h);const g=(0,s.useRef)(null);function m(t){(function(t){return"RenderingCancelledException"===t.name})(t)||(xl(!1,t.toString()),o&&o(t))}const b=(0,s.useMemo)((()=>h.getViewport({scale:p*a,rotation:u})),[a,h,u,p]),v=(0,s.useMemo)((()=>h.getViewport({scale:p,rotation:u})),[h,u,p]);(0,s.useEffect)((function(){if(!h)return;h.cleanup();const{current:t}=g;if(!t)return;t.width=b.width,t.height=b.height,t.style.width=`${Math.floor(v.width)}px`,t.style.height=`${Math.floor(v.height)}px`,t.style.visibility="hidden";const e={annotationMode:c?lh.ENABLE_FORMS:lh.ENABLE,canvasContext:t.getContext("2d",{alpha:!1}),viewport:b};r&&(e.background=r);const i=h.render(e),n=i;return i.promise.then((()=>{t.style.visibility="",h&&l&&l(Ul(h,p))})).catch(m),()=>jl(n)}),[r,g,a,h,c,b,v]);const y=(0,s.useCallback)((()=>{const{current:t}=g;t&&(t.width=0,t.height=0)}),[g]);return(0,s.useEffect)((()=>y),[y]),(0,fl.jsx)("canvas",{className:`${n}__canvas`,dir:"ltr",ref:Xl(f,g),style:{display:"block",userSelect:"none"},children:d?(0,fl.jsx)(oh,{}):null})}function ch(){const t=ah();El(t);const{customTextRenderer:e,onGetTextError:i,onGetTextSuccess:n,onRenderTextLayerError:r,onRenderTextLayerSuccess:a,page:o,pageIndex:l,pageNumber:h,rotate:c,scale:d}=t;El(o);const[u,p]=Hl(),{value:f,error:g}=u,m=(0,s.useRef)(null),b=(0,s.useRef)(void 0);xl(1===parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,s.useEffect)((function(){p({type:"RESET"})}),[o,p]),(0,s.useEffect)((function(){if(!o)return;const t=vl(o.getTextContent()),e=t;return t.promise.then((t=>{p({type:"RESOLVE",value:t})})).catch((t=>{p({type:"REJECT",error:t})})),()=>jl(e)}),[o,p]),(0,s.useEffect)((()=>{void 0!==f&&(!1!==f?f&&n&&n(f):g&&(xl(!1,g.toString()),i&&i(g)))}),[f]);const v=(0,s.useCallback)((()=>{a&&a()}),[a]),y=(0,s.useCallback)((t=>{xl(!1,t.toString()),r&&r(t)}),[r]);const w=(0,s.useMemo)((()=>o.getViewport({scale:d,rotation:c})),[o,c,d]);return(0,s.useLayoutEffect)((function(){if(!o||!f)return;const{current:t}=m;if(!t)return;t.innerHTML="";const i=o.streamTextContent({includeMarkedContent:!0}),n=new So({container:t,textContentSource:i,viewport:w}),s=n;return n.render().then((()=>{const i=document.createElement("div");i.className="endOfContent",t.append(i),b.current=i;const n=t.querySelectorAll('[role="presentation"]');if(e){let t=0;f.items.forEach(((i,s)=>{if(!function(t){return"str"in t}(i))return;const r=n[t];if(!r)return;const a=e(Object.assign({pageIndex:l,pageNumber:h,itemIndex:s},i));r.innerHTML=a,t+=i.str&&i.hasEOL?2:1}))}v()})).catch(y),()=>jl(s)}),[e,y,v,o,l,h,f,w]),(0,fl.jsx)("div",{className:wl("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){const t=b.current;t&&t.classList.remove("active")},onMouseDown:function(){const t=b.current;t&&t.classList.add("active")},ref:m})}function dh(){return(0,s.useContext)(Tl)}function uh(){const t=dh(),e=ah();El(e);const i=Object.assign(Object.assign({},t),e),{imageResourcesPath:n,linkService:r,onGetAnnotationsError:a,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:h,page:c,pdf:d,renderForms:u,rotate:p,scale:f=1}=i;El(d),El(c),El(r);const[g,m]=Hl(),{value:b,error:v}=g,y=(0,s.useRef)(null);xl(1===parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,s.useEffect)((function(){m({type:"RESET"})}),[m,c]),(0,s.useEffect)((function(){if(!c)return;const t=vl(c.getAnnotations()),e=t;return t.promise.then((t=>{m({type:"RESOLVE",value:t})})).catch((t=>{m({type:"REJECT",error:t})})),()=>{jl(e)}}),[m,c,u]),(0,s.useEffect)((()=>{void 0!==b&&(!1!==b?b&&o&&o(b):v&&(xl(!1,v.toString()),a&&a(v)))}),[b]);const w=(0,s.useMemo)((()=>c.getViewport({scale:f,rotation:p})),[c,p,f]);return(0,s.useEffect)((function(){if(!d||!c||!r||!b)return;const{current:t}=y;if(!t)return;const e=w.clone({dontFlip:!0}),i={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:t,l10n:null,page:c,viewport:e},s={annotations:b,annotationStorage:d.annotationStorage,div:t,imageResourcesPath:n,linkService:r,page:c,renderForms:u,viewport:e};t.innerHTML="";try{new Ao(i).render(s),h&&h()}catch(a){!function(t){xl(!1,`${t}`),l&&l(t)}(a)}return()=>{}}),[b,n,r,c,u,w]),(0,fl.jsx)("div",{className:wl("react-pdf__Page__annotations","annotationLayer"),ref:y})}var ph=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]])}return i};const fh=1;function gh(t){const e=dh(),i=Object.assign(Object.assign({},e),t),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:a,canvasRef:o,children:l,className:h,customRenderer:c,customTextRenderer:d,devicePixelRatio:u,error:p="Failed to load the page.",height:f,inputRef:g,loading:m="Loading page\u2026",noData:b="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:y,onGetStructTreeError:w,onGetStructTreeSuccess:A,onGetTextError:E,onGetTextSuccess:x,onLoadError:_,onLoadSuccess:S,onRenderAnnotationLayerError:C,onRenderAnnotationLayerSuccess:T,onRenderError:k,onRenderSuccess:P,onRenderTextLayerError:R,onRenderTextLayerSuccess:M,pageIndex:I,pageNumber:L,pdf:D,registerPage:O,renderAnnotationLayer:F=!0,renderForms:N=!1,renderMode:B="canvas",renderTextLayer:j=!0,rotate:U,scale:z=fh,unregisterPage:H,width:G}=i,$=ph(i,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[V,W]=Hl(),{value:q,error:K}=V,Y=(0,s.useRef)(null);El(D);const X=Ll(L)?L-1:null!==I&&void 0!==I?I:null,J=null!==L&&void 0!==L?L:Ll(I)?I+1:null,Z=null!==U&&void 0!==U?U:q?q.rotate:null,Q=(0,s.useMemo)((()=>{if(!q)return null;let t=1;const e=null!==z&&void 0!==z?z:fh;if(G||f){const e=q.getViewport({scale:1,rotation:Z});G?t=G/e.width:f&&(t=f/e.height)}return e*t}),[f,q,Z,z,G]);(0,s.useEffect)((function(){return()=>{Ll(X)&&r&&H&&H(X)}}),[r,D,X,H]),(0,s.useEffect)((function(){W({type:"RESET"})}),[W,D,X]),(0,s.useEffect)((function(){if(!D||!J)return;const t=vl(D.getPage(J)),e=t;return t.promise.then((t=>{W({type:"RESOLVE",value:t})})).catch((t=>{W({type:"REJECT",error:t})})),()=>jl(e)}),[W,D,X,J,O]),(0,s.useEffect)((()=>{void 0!==q&&(!1!==q?function(){if(S){if(!q||!Q)return;S(Ul(q,Q))}if(r&&O){if(!Ll(X)||!Y.current)return;O(X,Y.current)}}():K&&(xl(!1,K.toString()),_&&_(K)))}),[q,Q]);const tt=(0,s.useMemo)((()=>q&&Ll(X)&&J&&Ll(Z)&&Ll(Q)?{_className:n,canvasBackground:a,customTextRenderer:d,devicePixelRatio:u,onGetAnnotationsError:v,onGetAnnotationsSuccess:y,onGetStructTreeError:w,onGetStructTreeSuccess:A,onGetTextError:E,onGetTextSuccess:x,onRenderAnnotationLayerError:C,onRenderAnnotationLayerSuccess:T,onRenderError:k,onRenderSuccess:P,onRenderTextLayerError:R,onRenderTextLayerSuccess:M,page:q,pageIndex:X,pageNumber:J,renderForms:N,renderTextLayer:j,rotate:Z,scale:Q}:null),[n,a,d,u,v,y,w,A,E,x,C,T,k,P,R,M,q,X,J,N,j,Z,Q]),et=(0,s.useMemo)((()=>bl($,(()=>q?Q?Ul(q,Q):void 0:q))),[$,q,Q]),it=`${X}@${Q}/${Z}`;function nt(){switch(B){case"custom":return El(c),(0,fl.jsx)(c,{},`${it}_custom`);case"none":return null;default:return(0,fl.jsx)(hh,{canvasRef:o},`${it}_canvas`)}}return(0,fl.jsx)("div",Object.assign({className:wl(n,h),"data-page-number":J,ref:Xl(g,Y),style:{"--scale-factor":`${Q}`,backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},et,{children:J?null===D||void 0===q||null===q?(0,fl.jsx)(kl,{type:"loading",children:"function"===typeof m?m():m}):!1===D||!1===q?(0,fl.jsx)(kl,{type:"error",children:"function"===typeof p?p():p}):(0,fl.jsxs)(Jl.Provider,{value:tt,children:[nt(),j?(0,fl.jsx)(ch,{},`${it}_text`):null,F?(0,fl.jsx)(uh,{},`${it}_annotations`):null,l]}):(0,fl.jsx)(kl,{type:"no-data",children:"function"===typeof b?b():b})}))}var mh=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};const bh=function(t){var e=t.pageNum,i=(0,s.useContext)(Bo).state,n=i.mainState,r=i.paginated,a=i.zoomLevel,o=i.numPages,l=i.currentPage,h=(null===n||void 0===n?void 0:n.rendererRect)||null,c=e||l;return s.createElement(wh,{id:"pdf-page-wrapper",last:c>=o},!r&&s.createElement(Ah,{id:"pdf-page-info"},"Page ",c,"/",o),s.createElement(gh,{pageNumber:c||l,scale:a,height:((null===h||void 0===h?void 0:h.height)||100)-100,width:((null===h||void 0===h?void 0:h.width)||100)-100}))};var vh,yh,wh=Dt.div(vh||(vh=mh(["\n  margin: 20px 0;\n"],["\n  margin: 20px 0;\n"]))),Ah=Dt.div(yh||(yh=mh(["\n  padding: 0 0 10px 10px;\n  color: ",";\n  font-size: 14px;\n  text-align: left;\n\n  @media (max-width: 768px) {\n    font-size: 10px;\n  }\n"],["\n  padding: 0 0 10px 10px;\n  color: ",";\n  font-size: 14px;\n  text-align: left;\n\n  @media (max-width: 768px) {\n    font-size: 10px;\n  }\n"])),(function(t){return t.theme.text_tertiary})),Eh=function(t){for(var e=(0,s.useContext)(Bo).state.numPages,i=[],n=0;n<e;n++)i.push(s.createElement(bh,{key:n+1,pageNum:n+1}));return s.createElement(s.Fragment,null,i)},xh=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},_h=Dt(Yl)(Ch||(Ch=xh(["\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n"],["\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n"])));const Sh=function(){var t=(0,s.useContext)(Bo),e=t.state,i=e.mainState,n=e.paginated,r=t.dispatch,a=(null===i||void 0===i?void 0:i.currentDocument)||null;return(0,s.useEffect)((function(){r(Mo(Oo.numPages))}),[a]),a&&void 0!==a.fileData?s.createElement(_h,{file:a.fileData,onLoadSuccess:function(t){var e=t.numPages;return r(Mo(e))},loading:s.createElement("span",null,"Loading...")},n?s.createElement(bh,null):s.createElement(Eh,null)):null};var Ch,Th=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};xo.workerSrc=new URL("pdfjs-dist/build/pdf.worker.min.mjs","file:///C:/Users/guill/OneDrive/Escritorio/FrontendPagina/node_modules/react-doc-viewer/build/utils/importMeta.js").toString();var kh=function(t){var e=t.mainState;return s.createElement(jo,{mainState:e},s.createElement(Rh,{id:"pdf-renderer","data-testid":"pdf-renderer"},s.createElement(ol,null),s.createElement(Sh,null)))};kh.fileTypes=["pdf","application/pdf"],kh.weight=0;var Ph,Rh=Dt.div(Ph||(Ph=Th(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow-y: auto;\n\n  /* width */\n  &::-webkit-scrollbar {\n    ",";\n  }\n  /* Track */\n  &::-webkit-scrollbar-track {\n    /* background: ","; */\n  }\n  /* Handle */\n  &::-webkit-scrollbar-thumb {\n    background: ",";\n  }\n  /* Handle on hover */\n  &::-webkit-scrollbar-thumb:hover {\n    background: ",";\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow-y: auto;\n\n  /* width */\n  &::-webkit-scrollbar {\n    ",";\n  }\n  /* Track */\n  &::-webkit-scrollbar-track {\n    /* background: ","; */\n  }\n  /* Handle */\n  &::-webkit-scrollbar-thumb {\n    background: ",";\n  }\n  /* Handle on hover */\n  &::-webkit-scrollbar-thumb:hover {\n    background: ",";\n  }\n"])),(function(t){return t.theme.disableThemeScrollbar?"":"width: 10px"}),(function(t){return t.theme.secondary}),(function(t){return t.theme.tertiary}),(function(t){return t.theme.primary})),Mh=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Ih=function(){return Ih=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Ih.apply(this,arguments)},Lh=Dt(ye)(Oh||(Oh=Mh(["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  background-color: white;\n  background-image: linear-gradient(45deg, #e0e0e0 25%, transparent 25%),\n    linear-gradient(-45deg, #e0e0e0 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #e0e0e0 75%),\n    linear-gradient(-45deg, transparent 75%, #e0e0e0 75%);\n  background-size: 20px 20px;\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n"],["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  background-color: white;\n  background-image: linear-gradient(45deg, #e0e0e0 25%, transparent 25%),\n    linear-gradient(-45deg, #e0e0e0 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #e0e0e0 75%),\n    linear-gradient(-45deg, transparent 75%, #e0e0e0 75%);\n  background-size: 20px 20px;\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n"]))),Dh=function(t){return s.createElement(Lh,Ih({},t))};Dh.fileTypes=["png","image/png"],Dh.weight=0;var Oh,Fh=void 0,Nh=void 0,Bh=[],jh=function(t){var e={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"};return t in e?e[t]:"Tag"+t},Uh=function(t){var e,i={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"};return t in i&&(e=i[t]),e},zh=function(t,e,i){i=i||0;var n=e+Math.floor(i/8),s=i+t,r=32-t;if(s<=0)throw RangeError("No bits requested");if(s<=8)var a=24+i,o=Fh.getUint8(n,Nh);else if(s<=16)a=16+i,o=Fh.getUint16(n,Nh);else{if(!(s<=32))throw RangeError("Too many bits requested");a=i,o=Fh.getUint32(n,Nh)}return{bits:o<<a>>>r,byteOffset:n+Math.floor(s/8),bitOffset:s%8}},Hh=function(t,e){if(t<=0)throw RangeError("No bytes requested");if(t<=1)return Fh.getUint8(e,Nh);if(t<=2)return Fh.getUint16(e,Nh);if(t<=3)return Fh.getUint32(e,Nh)>>>8;if(t<=4)return Fh.getUint32(e,Nh);throw RangeError("Too many bytes requested")},Gh=function(t,e,i,n){var s=[],r=function(t){var e;return-1!==["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(t)?e=1:-1!==["SHORT","SSHORT"].indexOf(t)?e=2:-1!==["LONG","SLONG","FLOAT"].indexOf(t)?e=4:-1!==["RATIONAL","SRATIONAL","DOUBLE"].indexOf(t)&&(e=8),e}(e);if(r*i<=4){if(!1===Nh)var a=n>>>8*(4-r);else a=n;s.push(a)}else for(var o=0;o<i;o++){var l=r*o;if(r>=8){if(-1===["RATIONAL","SRATIONAL"].indexOf(e))throw TypeError("Can't handle this field type or size");s.push(Hh(4,n+l)),s.push(Hh(4,n+l+4))}else s.push(Hh(r,n+l))}return"ASCII"===e&&s.forEach((function(t,e,i){i[e]=String.fromCharCode(t)})),s},$h=function(t,e){var i=Math.pow(2,8-e);return Math.floor(t*i+(i-1))},Vh=function(t,e,i,n){return"undefined"===typeof n&&(n=1),"rgba("+t+", "+e+", "+i+", "+n+")"},Wh=function(t){for(var e=Hh(2,t),i=[],n=t+2,s=0;s<e;n+=12,s++){var r=Hh(2,n),a=Hh(2,n+2),o=Hh(4,n+4),l=Hh(4,n+8),h=jh(r),c=Uh(a),d=Gh(0,c,o,l);i[h]={type:c,values:d}}Bh.push(i);var u=Hh(4,n);return 0===u?Bh:Wh(u)},qh=function(t,e){var i=e||document.createElement("canvas");if(t&&(Fh=new DataView(t),Nh=function(){var t=Hh(2,0);if(18761===t)Nh=!0;else{if(19789!==t)throw TypeError("Invalid byte order value.");Nh=!1}return Nh}(),function(){if(42!==Hh(2,2))throw RangeError("You forgot your towel!");return!0}())){var n=Hh(4,4),s=(Bh=Wh(n))[0],r=s.ImageWidth.values[0],a=s.ImageLength.values[0];i.width=r,i.height=a;var o=[],l=s.Compression?s.Compression.values[0]:1,h=s.SamplesPerPixel.values[0],c=[],d=0,u=!1;if(s.BitsPerSample.values.forEach((function(t,e,i){c[e]={bitsPerSample:t,hasBytesPerSample:!1,bytesPerSample:void 0},t%8===0&&(c[e].hasBytesPerSample=!0,c[e].bytesPerSample=t/8),d+=t}),undefined),d%8===0){u=!0;var p=d/8}var f=s.StripOffsets.values,g=f.length;if(s.StripByteCounts)var m=s.StripByteCounts.values;else{if(1!==g)throw Error("Cannot recover from missing StripByteCounts");m=[Math.ceil(r*a*d/8)]}for(var b=0;b<g;b++){var v=f[b];o[b]=[];for(var y=m[b],w=0,A=0,E=1,x=!0,_=[],S=0,C=0,T=0;w<y;w+=E)switch(l){case 1:var k=0;for(_=[];k<h;k++){if(!c[k].hasBytesPerSample){var P=zh(c[k].bitsPerSample,v+w,A);throw _.push(P.bits),w=P.byteOffset-v,A=P.bitOffset,RangeError("Cannot handle sub-byte bits per sample")}var R=c[k].bytesPerSample*k;_.push(Hh(c[k].bytesPerSample,v+w+R))}if(o[b].push(_),!u)throw E=0,RangeError("Cannot handle sub-byte bits per pixel");E=p;break;case 2:case 3:case 4:case 5:case 6:case 7:default:break;case 32773:if(x){x=!1;var M=1,I=1,L=Fh.getInt8(v+w,Nh);L>=0&&L<=127?M=L+1:L>=-127&&L<=-1?I=1-L:x=!0}else{var D=Hh(1,v+w);for(k=0;k<I;k++){if(!c[C].hasBytesPerSample)throw RangeError("Cannot handle sub-byte bits per sample");T=T<<8*S|D,++S===c[C].bytesPerSample&&(_.push(T),T=S=0,C++),C===h&&(o[b].push(_),_=[],C=0)}0===--M&&(x=!0)}E=1}}if(i.getContext){var O=i.getContext("2d");if(O.fillStyle=Vh(255,255,255,0),s.RowsPerStrip)var F=s.RowsPerStrip.values[0];else F=a;var N=o.length,B=a%F,j=0===B?F:B,U=F,z=0,H=s.PhotometricInterpretation.values[0],G=[],$=0;if(s.ExtraSamples&&($=(G=s.ExtraSamples.values).length),s.ColorMap)var V=s.ColorMap.values,W=Math.pow(2,c[0].bitsPerSample);for(b=0;b<N;b++){b+1===N&&(U=j);for(var q=o[b].length,K=z*b,Y=0,X=0;X<q;Y++)for(var J=0;J<r;J++,X++){var Z=o[b][X],Q=0,tt=0,et=0,it=1;if($>0)for(var nt=0;nt<$;nt++)if(1===G[nt]||2===G[nt]){it=Z[3+nt]/256;break}switch(H){case 0:if(c[0].hasBytesPerSample)var st=Math.pow(16,2*c[0].bytesPerSample);Z.forEach((function(t,e,i){i[e]=st-t}));case 1:Q=tt=et=$h(Z[0],c[0].bitsPerSample);break;case 2:Q=$h(Z[0],c[0].bitsPerSample),tt=$h(Z[1],c[1].bitsPerSample),et=$h(Z[2],c[2].bitsPerSample);break;case 3:if(void 0===V)throw Error("Palette image missing color map");var rt=Z[0];Q=$h(V[rt],16),tt=$h(V[W+rt],16),et=$h(V[2*W+rt],16);break;case 4:throw RangeError("Not Yet Implemented: Transparency mask");case 5:throw RangeError("Not Yet Implemented: CMYK");case 6:throw RangeError("Not Yet Implemented: YCbCr");case 8:throw RangeError("Not Yet Implemented: CIELab");default:throw RangeError("Unknown Photometric Interpretation:",H)}O.fillStyle=Vh(Q,tt,et,it),O.fillRect(J,K+Y,1,1)}z=U}}return i}},Kh=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Yh=function(){return Yh=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Yh.apply(this,arguments)},Xh=function(t){var e=t.mainState.currentDocument,i=(0,s.useState)(!1),n=i[0],r=i[1],a=(0,s.useState)(!1),o=a[0],l=a[1];return(0,s.useEffect)((function(){if(e&&!n){var t=document.getElementById("tiff-img");try{t&&qh(e.fileData,t),r(!0)}catch(i){l(!0)}}}),[]),o?s.createElement(ye,Yh({},t),s.createElement("div",null,"Your file is corrupted. Please check it on your machine.")):s.createElement(ye,Yh({},t),s.createElement(Zh,{id:"tiff-img"}))};Xh.fileTypes=["tif","tiff","image/tif","image/tiff"],Xh.weight=0,Xh.fileLoader=ue;var Jh,Zh=Dt.canvas(Jh||(Jh=Kh(["\n  max-width: 95%;\n  max-height: 95%;\n"],["\n  max-width: 95%;\n  max-height: 95%;\n"]))),Qh=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},tc=function(t){var e=t.mainState.currentDocument;return s.createElement(ic,{id:"txt-renderer"},null===e||void 0===e?void 0:e.fileData)};tc.fileTypes=["txt","text/plain"],tc.weight=0,tc.fileLoader=function(t){return de(le(le({},t),{readerTypeFunction:"text"}))};var ec,ic=Dt.div(ec||(ec=Qh(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 30px;\n"],["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 30px;\n"]))),nc=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};var sc;Dt.div(sc||(sc=nc(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  background: #eee;\n"],["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  background: #eee;\n"])))},82:(t,e)=>{"use strict";var i=60103,n=60106,s=60107,r=60108,a=60114,o=60109,l=60110,h=60112,c=60113,d=60120,u=60115,p=60116,f=60121,g=60122,m=60117,b=60129,v=60131;if("function"===typeof Symbol&&Symbol.for){var y=Symbol.for;i=y("react.element"),n=y("react.portal"),s=y("react.fragment"),r=y("react.strict_mode"),a=y("react.profiler"),o=y("react.provider"),l=y("react.context"),h=y("react.forward_ref"),c=y("react.suspense"),d=y("react.suspense_list"),u=y("react.memo"),p=y("react.lazy"),f=y("react.block"),g=y("react.server.block"),m=y("react.fundamental"),b=y("react.debug_trace_mode"),v=y("react.legacy_hidden")}function w(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case s:case a:case r:case c:case d:return t;default:switch(t=t&&t.$$typeof){case l:case h:case p:case u:case o:return t;default:return e}}case n:return e}}}e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===s||t===a||t===b||t===r||t===c||t===d||t===v||"object"===typeof t&&null!==t&&(t.$$typeof===p||t.$$typeof===u||t.$$typeof===o||t.$$typeof===l||t.$$typeof===h||t.$$typeof===m||t.$$typeof===f||t[0]===g)},e.typeOf=w},86:(t,e,i)=>{"use strict";t.exports=i(82)},324:t=>{t.exports=function(t,e,i,n){var s=i?i.call(n,t,e):void 0;if(void 0!==s)return!!s;if(t===e)return!0;if("object"!==typeof t||!t||"object"!==typeof e||!e)return!1;var r=Object.keys(t),a=Object.keys(e);if(r.length!==a.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(e),l=0;l<r.length;l++){var h=r[l];if(!o(h))return!1;var c=t[h],d=e[h];if(!1===(s=i?i.call(n,c,d,h):void 0)||void 0===s&&c!==d)return!1}return!0}},440:t=>{"use strict";var e=function(){};t.exports=e},545:(t,e,i)=>{"use strict";i(813),e.MSGReader=i(779)},813:function(t,e,i){var n,s;void 0===(s="function"===typeof(n=function(){var t=function(e,i,n){this._byteOffset=i||0,e instanceof ArrayBuffer?this.buffer=e:"object"==typeof e?(this.dataView=e,i&&(this._byteOffset+=i)):this.buffer=new ArrayBuffer(e||1),this.position=0,this.endianness=null==n?t.LITTLE_ENDIAN:n};return t.prototype={},void 0===Uint8Array.prototype.BYTES_PER_ELEMENT&&(Uint8Array.prototype.BYTES_PER_ELEMENT=Uint8Array.BYTES_PER_ELEMENT,Int8Array.prototype.BYTES_PER_ELEMENT=Int8Array.BYTES_PER_ELEMENT,Uint8ClampedArray.prototype.BYTES_PER_ELEMENT=Uint8ClampedArray.BYTES_PER_ELEMENT,Uint16Array.prototype.BYTES_PER_ELEMENT=Uint16Array.BYTES_PER_ELEMENT,Int16Array.prototype.BYTES_PER_ELEMENT=Int16Array.BYTES_PER_ELEMENT,Uint32Array.prototype.BYTES_PER_ELEMENT=Uint32Array.BYTES_PER_ELEMENT,Int32Array.prototype.BYTES_PER_ELEMENT=Int32Array.BYTES_PER_ELEMENT,Float64Array.prototype.BYTES_PER_ELEMENT=Float64Array.BYTES_PER_ELEMENT),t.prototype.save=function(t){var e=new Blob(this.buffer),i=window.webkitURL||window.URL;if(!i||!i.createObjectURL)throw"DataStream.save: Can't create object URL.";var n=i.createObjectURL(e),s=document.createElement("a");s.setAttribute("href",n),s.setAttribute("download",t),s.click(),i.revokeObjectURL(n)},t.BIG_ENDIAN=!1,t.LITTLE_ENDIAN=!0,t.prototype._dynamicSize=!0,Object.defineProperty(t.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(t){t||this._trimAlloc(),this._dynamicSize=t}}),t.prototype._byteLength=0,Object.defineProperty(t.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(t){this._buffer=t,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(t.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(t){this._byteOffset=t,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(t.prototype,"dataView",{get:function(){return this._dataView},set:function(t){this._byteOffset=t.byteOffset,this._buffer=t.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+t.byteLength}}),t.prototype._realloc=function(t){if(this._dynamicSize){var e=this._byteOffset+this.position+t,i=this._buffer.byteLength;if(e<=i)e>this._byteLength&&(this._byteLength=e);else{for(i<1&&(i=1);e>i;)i*=2;var n=new ArrayBuffer(i),s=new Uint8Array(this._buffer);new Uint8Array(n,0,s.length).set(s),this.buffer=n,this._byteLength=e}}},t.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var t=new ArrayBuffer(this._byteLength),e=new Uint8Array(t),i=new Uint8Array(this._buffer,0,e.length);e.set(i),this.buffer=t}},t.prototype.seek=function(t){var e=Math.max(0,Math.min(this.byteLength,t));this.position=isNaN(e)||!isFinite(e)?0:e},t.prototype.isEof=function(){return this.position>=this.byteLength},t.prototype.mapInt32Array=function(e,i){this._realloc(4*e);var n=new Int32Array(this._buffer,this.byteOffset+this.position,e);return t.arrayToNative(n,null==i?this.endianness:i),this.position+=4*e,n},t.prototype.mapInt16Array=function(e,i){this._realloc(2*e);var n=new Int16Array(this._buffer,this.byteOffset+this.position,e);return t.arrayToNative(n,null==i?this.endianness:i),this.position+=2*e,n},t.prototype.mapInt8Array=function(t){this._realloc(1*t);var e=new Int8Array(this._buffer,this.byteOffset+this.position,t);return this.position+=1*t,e},t.prototype.mapUint32Array=function(e,i){this._realloc(4*e);var n=new Uint32Array(this._buffer,this.byteOffset+this.position,e);return t.arrayToNative(n,null==i?this.endianness:i),this.position+=4*e,n},t.prototype.mapUint16Array=function(e,i){this._realloc(2*e);var n=new Uint16Array(this._buffer,this.byteOffset+this.position,e);return t.arrayToNative(n,null==i?this.endianness:i),this.position+=2*e,n},t.prototype.mapUint8Array=function(t){this._realloc(1*t);var e=new Uint8Array(this._buffer,this.byteOffset+this.position,t);return this.position+=1*t,e},t.prototype.mapFloat64Array=function(e,i){this._realloc(8*e);var n=new Float64Array(this._buffer,this.byteOffset+this.position,e);return t.arrayToNative(n,null==i?this.endianness:i),this.position+=8*e,n},t.prototype.mapFloat32Array=function(e,i){this._realloc(4*e);var n=new Float32Array(this._buffer,this.byteOffset+this.position,e);return t.arrayToNative(n,null==i?this.endianness:i),this.position+=4*e,n},t.prototype.readInt32Array=function(e,i){e=null==e?this.byteLength-this.position/4:e;var n=new Int32Array(e);return t.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),t.arrayToNative(n,null==i?this.endianness:i),this.position+=n.byteLength,n},t.prototype.readInt16Array=function(e,i){e=null==e?this.byteLength-this.position/2:e;var n=new Int16Array(e);return t.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),t.arrayToNative(n,null==i?this.endianness:i),this.position+=n.byteLength,n},t.prototype.readInt8Array=function(e){e=null==e?this.byteLength-this.position:e;var i=new Int8Array(e);return t.memcpy(i.buffer,0,this.buffer,this.byteOffset+this.position,e*i.BYTES_PER_ELEMENT),this.position+=i.byteLength,i},t.prototype.readUint32Array=function(e,i){e=null==e?this.byteLength-this.position/4:e;var n=new Uint32Array(e);return t.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),t.arrayToNative(n,null==i?this.endianness:i),this.position+=n.byteLength,n},t.prototype.readUint16Array=function(e,i){e=null==e?this.byteLength-this.position/2:e;var n=new Uint16Array(e);return t.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),t.arrayToNative(n,null==i?this.endianness:i),this.position+=n.byteLength,n},t.prototype.readUint8Array=function(e){e=null==e?this.byteLength-this.position:e;var i=new Uint8Array(e);return t.memcpy(i.buffer,0,this.buffer,this.byteOffset+this.position,e*i.BYTES_PER_ELEMENT),this.position+=i.byteLength,i},t.prototype.readFloat64Array=function(e,i){e=null==e?this.byteLength-this.position/8:e;var n=new Float64Array(e);return t.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),t.arrayToNative(n,null==i?this.endianness:i),this.position+=n.byteLength,n},t.prototype.readFloat32Array=function(e,i){e=null==e?this.byteLength-this.position/4:e;var n=new Float32Array(e);return t.memcpy(n.buffer,0,this.buffer,this.byteOffset+this.position,e*n.BYTES_PER_ELEMENT),t.arrayToNative(n,null==i?this.endianness:i),this.position+=n.byteLength,n},t.prototype.writeInt32Array=function(e,i){if(this._realloc(4*e.length),e instanceof Int32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT==0)t.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt32Array(e.length,i);else for(var n=0;n<e.length;n++)this.writeInt32(e[n],i)},t.prototype.writeInt16Array=function(e,i){if(this._realloc(2*e.length),e instanceof Int16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT==0)t.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt16Array(e.length,i);else for(var n=0;n<e.length;n++)this.writeInt16(e[n],i)},t.prototype.writeInt8Array=function(e){if(this._realloc(1*e.length),e instanceof Int8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT==0)t.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapInt8Array(e.length);else for(var i=0;i<e.length;i++)this.writeInt8(e[i])},t.prototype.writeUint32Array=function(e,i){if(this._realloc(4*e.length),e instanceof Uint32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT==0)t.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint32Array(e.length,i);else for(var n=0;n<e.length;n++)this.writeUint32(e[n],i)},t.prototype.writeUint16Array=function(e,i){if(this._realloc(2*e.length),e instanceof Uint16Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT==0)t.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint16Array(e.length,i);else for(var n=0;n<e.length;n++)this.writeUint16(e[n],i)},t.prototype.writeUint8Array=function(e){if(this._realloc(1*e.length),e instanceof Uint8Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT==0)t.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapUint8Array(e.length);else for(var i=0;i<e.length;i++)this.writeUint8(e[i])},t.prototype.writeFloat64Array=function(e,i){if(this._realloc(8*e.length),e instanceof Float64Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT==0)t.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat64Array(e.length,i);else for(var n=0;n<e.length;n++)this.writeFloat64(e[n],i)},t.prototype.writeFloat32Array=function(e,i){if(this._realloc(4*e.length),e instanceof Float32Array&&this.byteOffset+this.position%e.BYTES_PER_ELEMENT==0)t.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,0,e.byteLength),this.mapFloat32Array(e.length,i);else for(var n=0;n<e.length;n++)this.writeFloat32(e[n],i)},t.prototype.readInt32=function(t){var e=this._dataView.getInt32(this.position,null==t?this.endianness:t);return this.position+=4,e},t.prototype.readInt=function(t){return this.seek(t),this.readInt32()},t.prototype.readInt16=function(t){var e=this._dataView.getInt16(this.position,null==t?this.endianness:t);return this.position+=2,e},t.prototype.readShort=function(t){return this.seek(t),this.readInt16()},t.prototype.readInt8=function(){var t=this._dataView.getInt8(this.position);return this.position+=1,t},t.prototype.readByte=function(t){return this.seek(t),this.readInt8()},t.prototype.readUint32=function(t){var e=this._dataView.getUint32(this.position,null==t?this.endianness:t);return this.position+=4,e},t.prototype.readUint16=function(t){var e=this._dataView.getUint16(this.position,null==t?this.endianness:t);return this.position+=2,e},t.prototype.readUint8=function(){var t=this._dataView.getUint8(this.position);return this.position+=1,t},t.prototype.readFloat32=function(t){var e=this._dataView.getFloat32(this.position,null==t?this.endianness:t);return this.position+=4,e},t.prototype.readFloat64=function(t){var e=this._dataView.getFloat64(this.position,null==t?this.endianness:t);return this.position+=8,e},t.prototype.writeInt32=function(t,e){this._realloc(4),this._dataView.setInt32(this.position,t,null==e?this.endianness:e),this.position+=4},t.prototype.writeInt16=function(t,e){this._realloc(2),this._dataView.setInt16(this.position,t,null==e?this.endianness:e),this.position+=2},t.prototype.writeInt8=function(t){this._realloc(1),this._dataView.setInt8(this.position,t),this.position+=1},t.prototype.writeUint32=function(t,e){this._realloc(4),this._dataView.setUint32(this.position,t,null==e?this.endianness:e),this.position+=4},t.prototype.writeUint16=function(t,e){this._realloc(2),this._dataView.setUint16(this.position,t,null==e?this.endianness:e),this.position+=2},t.prototype.writeUint8=function(t){this._realloc(1),this._dataView.setUint8(this.position,t),this.position+=1},t.prototype.writeFloat32=function(t,e){this._realloc(4),this._dataView.setFloat32(this.position,t,null==e?this.endianness:e),this.position+=4},t.prototype.writeFloat64=function(t,e){this._realloc(8),this._dataView.setFloat64(this.position,t,null==e?this.endianness:e),this.position+=8},t.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,t.memcpy=function(t,e,i,n,s){var r=new Uint8Array(t,e,s),a=new Uint8Array(i,n,s);r.set(a)},t.arrayToNative=function(t,e){return e==this.endianness?t:this.flipArrayEndianness(t)},t.nativeToEndian=function(t,e){return this.endianness==e?t:this.flipArrayEndianness(t)},t.flipArrayEndianness=function(t){for(var e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i=0;i<t.byteLength;i+=t.BYTES_PER_ELEMENT)for(var n=i+t.BYTES_PER_ELEMENT-1,s=i;n>s;n--,s++){var r=e[s];e[s]=e[n],e[n]=r}return t},t.createStringFromArray=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},t.prototype.failurePosition=0,t.prototype.readStruct=function(t){for(var e,i,n={},s=this.position,r=0;r<t.length;r+=2){if(e=t[r+1],null==(i=this.readType(e,n)))return 0==this.failurePosition&&(this.failurePosition=this.position),this.position=s,null;n[t[r]]=i}return n},t.prototype.readUCS2String=function(e,i){return t.createStringFromArray(this.readUint16Array(e,i))},t.prototype.readStringAt=function(t,e){return this.seek(t),this.readUCS2String(e)},t.prototype.writeUCS2String=function(t,e,i){null==i&&(i=t.length);for(var n=0;n<t.length&&n<i;n++)this.writeUint16(t.charCodeAt(n),e);for(;n<i;n++)this.writeUint16(0)},t.prototype.readString=function(e,i){return null==i||"ASCII"==i?t.createStringFromArray(this.mapUint8Array(null==e?this.byteLength-this.position:e)):new TextDecoder(i).decode(this.mapUint8Array(e))},t.prototype.writeString=function(t,e,i){if(null==e||"ASCII"==e)if(null!=i){var n=0,s=Math.min(t.length,i);for(n=0;n<s;n++)this.writeUint8(t.charCodeAt(n));for(;n<i;n++)this.writeUint8(0)}else for(n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));else this.writeUint8Array(new TextEncoder(e).encode(t.substring(0,i)))},t.prototype.readCString=function(e){var i=this.byteLength-this.position,n=new Uint8Array(this._buffer,this._byteOffset+this.position),s=i;null!=e&&(s=Math.min(e,i));for(var r=0;r<s&&0!=n[r];r++);var a=t.createStringFromArray(this.mapUint8Array(r));return null!=e?this.position+=s-r:r!=i&&(this.position+=1),a},t.prototype.writeCString=function(t,e){if(null!=e){var i=0,n=Math.min(t.length,e);for(i=0;i<n;i++)this.writeUint8(t.charCodeAt(i));for(;i<e;i++)this.writeUint8(0)}else{for(i=0;i<t.length;i++)this.writeUint8(t.charCodeAt(i));this.writeUint8(0)}},t.prototype.readType=function(e,i){if("function"==typeof e)return e(this,i);if(!("object"!=typeof e||e instanceof Array))return e.get(this,i);if(e instanceof Array&&3!=e.length)return this.readStruct(e,i);var n=null,s=null,r="ASCII",a=this.position;if("string"==typeof e&&/:/.test(e)){var o=e.split(":");e=o[0],s=null!=i[l=o[1]]?parseInt(i[l]):parseInt(o[1])}switch("string"==typeof e&&/,/.test(e)&&(o=e.split(","),e=o[0],r=parseInt(o[1])),e){case"uint8":n=this.readUint8();break;case"int8":n=this.readInt8();break;case"uint16":n=this.readUint16(this.endianness);break;case"int16":n=this.readInt16(this.endianness);break;case"uint32":n=this.readUint32(this.endianness);break;case"int32":n=this.readInt32(this.endianness);break;case"float32":n=this.readFloat32(this.endianness);break;case"float64":n=this.readFloat64(this.endianness);break;case"uint16be":n=this.readUint16(t.BIG_ENDIAN);break;case"int16be":n=this.readInt16(t.BIG_ENDIAN);break;case"uint32be":n=this.readUint32(t.BIG_ENDIAN);break;case"int32be":n=this.readInt32(t.BIG_ENDIAN);break;case"float32be":n=this.readFloat32(t.BIG_ENDIAN);break;case"float64be":n=this.readFloat64(t.BIG_ENDIAN);break;case"uint16le":n=this.readUint16(t.LITTLE_ENDIAN);break;case"int16le":n=this.readInt16(t.LITTLE_ENDIAN);break;case"uint32le":n=this.readUint32(t.LITTLE_ENDIAN);break;case"int32le":n=this.readInt32(t.LITTLE_ENDIAN);break;case"float32le":n=this.readFloat32(t.LITTLE_ENDIAN);break;case"float64le":n=this.readFloat64(t.LITTLE_ENDIAN);break;case"cstring":n=this.readCString(s);break;case"string":n=this.readString(s,r);break;case"u16string":n=this.readUCS2String(s,this.endianness);break;case"u16stringle":n=this.readUCS2String(s,t.LITTLE_ENDIAN);break;case"u16stringbe":n=this.readUCS2String(s,t.BIG_ENDIAN);break;default:if(3==e.length){var l,h=e[1],c=0;if(c="function"==typeof(l=e[2])?l(i,this,e):"string"==typeof l&&null!=i[l]?parseInt(i[l]):parseInt(l),"string"==typeof h){var d=h.replace(/(le|be)$/,""),u=null;switch(/le$/.test(h)?u=t.LITTLE_ENDIAN:/be$/.test(h)&&(u=t.BIG_ENDIAN),"*"==l&&(c=null),d){case"uint8":n=this.readUint8Array(c);break;case"uint16":n=this.readUint16Array(c,u);break;case"uint32":n=this.readUint32Array(c,u);break;case"int8":n=this.readInt8Array(c);break;case"int16":n=this.readInt16Array(c,u);break;case"int32":n=this.readInt32Array(c,u);break;case"float32":n=this.readFloat32Array(c,u);break;case"float64":n=this.readFloat64Array(c,u);break;case"cstring":case"utf16string":case"string":if(null==c)for(n=[];!this.isEof()&&null!=(m=this.readType(h,i));)n.push(m);else{n=new Array(c);for(var p=0;p<c;p++)n[p]=this.readType(h,i)}}}else if("*"==l)for(n=[],this.buffer;;){var f=this.position;try{var g=this.readType(h,i);if(null==g){this.position=f;break}n.push(g)}catch(b){this.position=f;break}}else for(n=new Array(c),p=0;p<c;p++){var m;if(null==(m=this.readType(h,i)))return null;n[p]=m}break}}return null!=s&&(this.position=a+s),n},t.prototype.writeStruct=function(t,e){for(var i=0;i<t.length;i+=2){var n=t[i+1];this.writeType(n,e[t[i]],e)}},t.prototype.writeType=function(e,i,n){if("function"==typeof e)return e(this,i);if("object"==typeof e&&!(e instanceof Array))return e.set(this,i,n);var s=null,r="ASCII",a=this.position;if("string"==typeof e&&/:/.test(e)){var o=e.split(":");e=o[0],s=parseInt(o[1])}switch("string"==typeof e&&/,/.test(e)&&(o=e.split(","),e=o[0],r=parseInt(o[1])),e){case"uint8":this.writeUint8(i);break;case"int8":this.writeInt8(i);break;case"uint16":this.writeUint16(i,this.endianness);break;case"int16":this.writeInt16(i,this.endianness);break;case"uint32":this.writeUint32(i,this.endianness);break;case"int32":this.writeInt32(i,this.endianness);break;case"float32":this.writeFloat32(i,this.endianness);break;case"float64":this.writeFloat64(i,this.endianness);break;case"uint16be":this.writeUint16(i,t.BIG_ENDIAN);break;case"int16be":this.writeInt16(i,t.BIG_ENDIAN);break;case"uint32be":this.writeUint32(i,t.BIG_ENDIAN);break;case"int32be":this.writeInt32(i,t.BIG_ENDIAN);break;case"float32be":this.writeFloat32(i,t.BIG_ENDIAN);break;case"float64be":this.writeFloat64(i,t.BIG_ENDIAN);break;case"uint16le":this.writeUint16(i,t.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(i,t.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(i,t.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(i,t.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(i,t.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(i,t.LITTLE_ENDIAN);break;case"cstring":this.writeCString(i,s);break;case"string":this.writeString(i,r,s);break;case"u16string":this.writeUCS2String(i,this.endianness,s);break;case"u16stringle":this.writeUCS2String(i,t.LITTLE_ENDIAN,s);break;case"u16stringbe":this.writeUCS2String(i,t.BIG_ENDIAN,s);break;default:if(3==e.length){for(var l=e[1],h=0;h<i.length;h++)this.writeType(l,i[h]);break}this.writeStruct(e,i)}null!=s&&(this.position=a,this._realloc(s),this.position=a+s)},t})?n.call(e,i,e,t):n)||(t.exports=s)},779:function(t,e,i){var n,s,r;s=[i(813)],void 0===(r="function"===typeof(n=function(t){var e={FILE_HEADER:n([208,207,17,224,161,177,26,225]),MSG:{UNUSED_BLOCK:-1,END_OF_CHAIN:-2,S_BIG_BLOCK_SIZE:512,S_BIG_BLOCK_MARK:9,L_BIG_BLOCK_SIZE:4096,L_BIG_BLOCK_MARK:12,SMALL_BLOCK_SIZE:64,BIG_BLOCK_MIN_DOC_SIZE:4096,HEADER:{PROPERTY_START_OFFSET:48,BAT_START_OFFSET:76,BAT_COUNT_OFFSET:44,SBAT_START_OFFSET:60,SBAT_COUNT_OFFSET:64,XBAT_START_OFFSET:68,XBAT_COUNT_OFFSET:72},PROP:{NO_INDEX:-1,PROPERTY_SIZE:128,NAME_SIZE_OFFSET:64,MAX_NAME_LENGTH:31,TYPE_OFFSET:66,PREVIOUS_PROPERTY_OFFSET:68,NEXT_PROPERTY_OFFSET:72,CHILD_PROPERTY_OFFSET:76,START_BLOCK_OFFSET:116,SIZE_OFFSET:120,TYPE_ENUM:{DIRECTORY:1,DOCUMENT:2,ROOT:5}},FIELD:{PREFIX:{ATTACHMENT:"__attach_version1.0",RECIPIENT:"__recip_version1.0",DOCUMENT:"__substg1."},NAME_MAPPING:{"0037":"subject","0c1a":"senderName","5d02":"senderEmail",1e3:"body","007d":"headers",3703:"extension",3704:"fileNameShort",3707:"fileName",3712:"pidContentId",3001:"name","39fe":"email"},CLASS_MAPPING:{ATTACHMENT_DATA:"3701"},TYPE_MAPPING:{"001e":"string","001f":"unicode","0102":"binary"},DIR_TYPE:{INNER_MSG:"000d"}}}};function i(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function n(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[i]=t[i]<<24>>24;return e}function s(t){return t.seek(0),i(e.FILE_HEADER,t.readInt8Array(e.FILE_HEADER.length))}function r(t,e){return(e+1)*t.bigBlockSize}function a(t,e,i){var n=r(e,i);return t.seek(n),t.readInt32Array(e.bigBlockLength)}function o(t,e,i,n){var s=Math.floor(i/e.bigBlockLength),r=i%e.bigBlockLength;return a(t,e,n[s])[r]}function l(t,e,i){return o(t,e,i,e.batData)}function h(t,e,i){return o(t,e,i,e.sbatData)}function c(t){var e=d(t);return e.batData=p(t,e),e.sbatData=f(t,e),e.xbatCount>0&&g(t,e),e.propertyData=m(t,e),e.fieldsData=A(t,e),e}function d(t){var i={};return i.bigBlockSize=t.readByte(30)==e.MSG.L_BIG_BLOCK_MARK?e.MSG.L_BIG_BLOCK_SIZE:e.MSG.S_BIG_BLOCK_SIZE,i.bigBlockLength=i.bigBlockSize/4,i.xBlockLength=i.bigBlockLength-1,i.batCount=t.readInt(e.MSG.HEADER.BAT_COUNT_OFFSET),i.propertyStart=t.readInt(e.MSG.HEADER.PROPERTY_START_OFFSET),i.sbatStart=t.readInt(e.MSG.HEADER.SBAT_START_OFFSET),i.sbatCount=t.readInt(e.MSG.HEADER.SBAT_COUNT_OFFSET),i.xbatStart=t.readInt(e.MSG.HEADER.XBAT_START_OFFSET),i.xbatCount=t.readInt(e.MSG.HEADER.XBAT_COUNT_OFFSET),i}function u(t){var i=(e.MSG.S_BIG_BLOCK_SIZE-e.MSG.HEADER.BAT_START_OFFSET)/4;return Math.min(t.batCount,i)}function p(t,i){var n=new Array(u(i));t.seek(e.MSG.HEADER.BAT_START_OFFSET);for(var s=0;s<n.length;s++)n[s]=t.readInt32();return n}function f(t,i){for(var n=[],s=i.sbatStart,r=0;r<i.sbatCount&&s!=e.MSG.END_OF_CHAIN;r++)n.push(s),s=l(t,i,s);return n}function g(t,i){for(var n=u(i),s=i.batCount-n,r=i.xbatStart,o=0;o<i.xbatCount;o++){var l=a(t,i,r);r=l[i.xBlockLength];for(var h=Math.min(s,i.xBlockLength),c=0;c<h;c++){var d=l[c];if(d==e.MSG.UNUSED_BLOCK||d==e.MSG.END_OF_CHAIN)break;i.batData.push(d)}s-=h}}function m(t,i){for(var n=[],s=i.propertyStart;s!=e.MSG.END_OF_CHAIN;)y(t,i,s,n),s=l(t,i,s);return w(n,n[0]),n}function b(t,i){var n=t.readShort(i+e.MSG.PROP.NAME_SIZE_OFFSET);return n<1?"":t.readStringAt(i,n/2)}function v(t,i,n){return{index:i,type:t.readByte(n+e.MSG.PROP.TYPE_OFFSET),name:b(t,n),previousProperty:t.readInt(n+e.MSG.PROP.PREVIOUS_PROPERTY_OFFSET),nextProperty:t.readInt(n+e.MSG.PROP.NEXT_PROPERTY_OFFSET),childProperty:t.readInt(n+e.MSG.PROP.CHILD_PROPERTY_OFFSET),startBlock:t.readInt(n+e.MSG.PROP.START_BLOCK_OFFSET),sizeBlock:t.readInt(n+e.MSG.PROP.SIZE_OFFSET)}}function y(t,i,n,s){for(var a=i.bigBlockSize/e.MSG.PROP.PROPERTY_SIZE,o=r(i,n),l=0;l<a;l++){switch(t.readByte(o+e.MSG.PROP.TYPE_OFFSET)){case e.MSG.PROP.TYPE_ENUM.ROOT:case e.MSG.PROP.TYPE_ENUM.DIRECTORY:case e.MSG.PROP.TYPE_ENUM.DOCUMENT:s.push(v(t,s.length,o));break;default:s.push(null)}o+=e.MSG.PROP.PROPERTY_SIZE}}function w(t,i){if(i.childProperty!=e.MSG.PROP.NO_INDEX){i.children=[];for(var n=[i.childProperty];0!=n.length;){var s=n.shift(),r=t[s];null!=r&&(i.children.push(s),r.type==e.MSG.PROP.TYPE_ENUM.DIRECTORY&&w(t,r),r.previousProperty!=e.MSG.PROP.NO_INDEX&&n.push(r.previousProperty),r.nextProperty!=e.MSG.PROP.NO_INDEX&&n.push(r.nextProperty))}}}function A(t,e){var i={attachments:[],recipients:[]};return E(t,e,e.propertyData[0],i),i}function E(t,i,n,s){if(n.children&&n.children.length>0)for(var r=0;r<n.children.length;r++){var a=i.propertyData[n.children[r]];a.type==e.MSG.PROP.TYPE_ENUM.DIRECTORY?x(t,i,a,s):a.type==e.MSG.PROP.TYPE_ENUM.DOCUMENT&&0==a.name.indexOf(e.MSG.FIELD.PREFIX.DOCUMENT)&&_(t,i,a,s)}}function x(t,i,n,s){if(0==n.name.indexOf(e.MSG.FIELD.PREFIX.ATTACHMENT)){var r={};s.attachments.push(r),E(t,i,n,r)}else if(0==n.name.indexOf(e.MSG.FIELD.PREFIX.RECIPIENT)){var a={};s.recipients.push(a),E(t,i,n,a)}else S(n)!=e.MSG.FIELD.DIR_TYPE.INNER_MSG?E(t,i,n,s):s.innerMsgContent=!0}function _(t,i,n,s){var r=n.name.substring(12).toLowerCase(),a=r.substring(0,4),o=r.substring(4,8),l=e.MSG.FIELD.NAME_MAPPING[a];l&&(s[l]=R(t,i,n,o)),a==e.MSG.FIELD.CLASS_MAPPING.ATTACHMENT_DATA&&(s.dataId=n.index,s.contentLength=n.sizeBlock)}function S(t){return t.name.substring(12).toLowerCase().substring(4,8)}var C={sbat:{extractor:function(t,e,i,n){var s=P(t,e,i);return 1==s.length?T(t,e,i.startBlock,i.sizeBlock,n):s.length>1?k(t,e,i,s,n):null},dataType:{string:function(t,e,i,n,s){return t.seek(i+n),t.readString(s)},unicode:function(t,e,i,n,s){return t.seek(i+n),t.readUCS2String(s/2)},binary:function(t,i,n,s,r){t.seek(n+s);var a=Math.min(Math.min(i.bigBlockSize-s,r),e.MSG.SMALL_BLOCK_SIZE);return t.readUint8Array(a)}}},bat:{extractor:function(t,e,i,n){var s=r(e,i.startBlock);return t.seek(s),n(t,i)},dataType:{string:function(t,e){return t.readString(e.sizeBlock)},unicode:function(t,e){return t.readUCS2String(e.sizeBlock/2)},binary:function(t,e){return t.readUint8Array(e.sizeBlock)}}}};function T(t,i,n,s,a){for(var o=n*e.MSG.SMALL_BLOCK_SIZE,h=Math.floor(o/i.bigBlockSize),c=o%i.bigBlockSize,d=i.propertyData[0].startBlock,u=0;u<h;u++)d=l(t,i,d);return a(t,i,r(i,d),c,s)}function k(i,n,s,r,a){for(var o=new Int8Array(s.sizeBlock),l=0,h=0;l<r.length;l++)for(var c=T(i,n,r[l],e.MSG.SMALL_BLOCK_SIZE,C.sbat.dataType.binary),d=0;d<c.length;d++)o[h++]=c[d];return a(new t(o,0,t.LITTLE_ENDIAN),n,0,0,s.sizeBlock)}function P(t,i,n){for(var s=[],r=n.startBlock;r!=e.MSG.END_OF_CHAIN;)s.push(r),r=h(t,i,r);return s}function R(t,i,n,s){var r=null,a=n.sizeBlock<e.MSG.BIG_BLOCK_MIN_DOC_SIZE?C.sbat:C.bat,o=a.dataType[e.MSG.FIELD.TYPE_MAPPING[s]];return o&&(r=a.extractor(t,i,n,o)),r}var M=function(e){this.ds=new t(e,0,t.LITTLE_ENDIAN)};return M.prototype={getFileData:function(){return s(this.ds)?(null==this.fileData&&(this.fileData=c(this.ds)),this.fileData.fieldsData):{error:"Unsupported file type!"}},getAttachment:function(t){var e="number"===typeof t?this.fileData.fieldsData.attachments[t]:t,i=this.fileData.propertyData[e.dataId],n=R(this.ds,this.fileData,i,S(i));return{fileName:e.fileName,content:n}}},M})?n.apply(e,s):n)||(t.exports=r)},213:(t,e,i)=>{"use strict";i.d(e,{A:()=>we});var n={};function s(t,e){return function(){return t.apply(e,arguments)}}i.r(n),i.d(n,{hasBrowserEnv:()=>ht,hasStandardBrowserEnv:()=>dt,hasStandardBrowserWebWorkerEnv:()=>ut,navigator:()=>ct,origin:()=>pt});const{toString:r}=Object.prototype,{getPrototypeOf:a}=Object,o=(l=Object.create(null),t=>{const e=r.call(t);return l[e]||(l[e]=e.slice(8,-1).toLowerCase())});var l;const h=t=>(t=t.toLowerCase(),e=>o(e)===t),c=t=>e=>typeof e===t,{isArray:d}=Array,u=c("undefined");const p=h("ArrayBuffer");const f=c("string"),g=c("function"),m=c("number"),b=t=>null!==t&&"object"===typeof t,v=t=>{if("object"!==o(t))return!1;const e=a(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},y=h("Date"),w=h("File"),A=h("Blob"),E=h("FileList"),x=h("URLSearchParams"),[_,S,C,T]=["ReadableStream","Request","Response","Headers"].map(h);function k(t,e){let i,n,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),d(t))for(i=0,n=t.length;i<n;i++)e.call(null,t[i],i,t);else{const n=s?Object.getOwnPropertyNames(t):Object.keys(t),r=n.length;let a;for(i=0;i<r;i++)a=n[i],e.call(null,t[a],a,t)}}function P(t,e){e=e.toLowerCase();const i=Object.keys(t);let n,s=i.length;for(;s-- >0;)if(n=i[s],e===n.toLowerCase())return n;return null}const R="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,M=t=>!u(t)&&t!==R;const I=(L="undefined"!==typeof Uint8Array&&a(Uint8Array),t=>L&&t instanceof L);var L;const D=h("HTMLFormElement"),O=(t=>{let{hasOwnProperty:e}=t;return(t,i)=>e.call(t,i)})(Object.prototype),F=h("RegExp"),N=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t),n={};k(i,((i,s)=>{let r;!1!==(r=e(i,s,t))&&(n[s]=r||i)})),Object.defineProperties(t,n)},B="abcdefghijklmnopqrstuvwxyz",j="0123456789",U={DIGIT:j,ALPHA:B,ALPHA_DIGIT:B+B.toUpperCase()+j};const z=h("AsyncFunction"),H=((t,e)=>{return t?setImmediate:e?(i=`axios@${Math.random()}`,n=[],R.addEventListener("message",(t=>{let{source:e,data:s}=t;e===R&&s===i&&n.length&&n.shift()()}),!1),t=>{n.push(t),R.postMessage(i,"*")}):t=>setTimeout(t);var i,n})("function"===typeof setImmediate,g(R.postMessage)),G="undefined"!==typeof queueMicrotask?queueMicrotask.bind(R):"undefined"!==typeof process&&process.nextTick||H,$={isArray:d,isArrayBuffer:p,isBuffer:function(t){return null!==t&&!u(t)&&null!==t.constructor&&!u(t.constructor)&&g(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"===typeof FormData&&t instanceof FormData||g(t.append)&&("formdata"===(e=o(t))||"object"===e&&g(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&p(t.buffer),e},isString:f,isNumber:m,isBoolean:t=>!0===t||!1===t,isObject:b,isPlainObject:v,isReadableStream:_,isRequest:S,isResponse:C,isHeaders:T,isUndefined:u,isDate:y,isFile:w,isBlob:A,isRegExp:F,isFunction:g,isStream:t=>b(t)&&g(t.pipe),isURLSearchParams:x,isTypedArray:I,isFileList:E,forEach:k,merge:function t(){const{caseless:e}=M(this)&&this||{},i={},n=(n,s)=>{const r=e&&P(i,s)||s;v(i[r])&&v(n)?i[r]=t(i[r],n):v(n)?i[r]=t({},n):d(n)?i[r]=n.slice():i[r]=n};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&k(arguments[s],n);return i},extend:function(t,e,i){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return k(e,((e,n)=>{i&&g(e)?t[n]=s(e,i):t[n]=e}),{allOwnKeys:n}),t},trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,i,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),i&&Object.assign(t.prototype,i)},toFlatObject:(t,e,i,n)=>{let s,r,o;const l={};if(e=e||{},null==t)return e;do{for(s=Object.getOwnPropertyNames(t),r=s.length;r-- >0;)o=s[r],n&&!n(o,t,e)||l[o]||(e[o]=t[o],l[o]=!0);t=!1!==i&&a(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e},kindOf:o,kindOfTest:h,endsWith:(t,e,i)=>{t=String(t),(void 0===i||i>t.length)&&(i=t.length),i-=e.length;const n=t.indexOf(e,i);return-1!==n&&n===i},toArray:t=>{if(!t)return null;if(d(t))return t;let e=t.length;if(!m(e))return null;const i=new Array(e);for(;e-- >0;)i[e]=t[e];return i},forEachEntry:(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=i.next())&&!n.done;){const i=n.value;e.call(t,i[0],i[1])}},matchAll:(t,e)=>{let i;const n=[];for(;null!==(i=t.exec(e));)n.push(i);return n},isHTMLForm:D,hasOwnProperty:O,hasOwnProp:O,reduceDescriptors:N,freezeMethods:t=>{N(t,((e,i)=>{if(g(t)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;const n=t[i];g(n)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))}))},toObjectSet:(t,e)=>{const i={},n=t=>{t.forEach((t=>{i[t]=!0}))};return d(t)?n(t):n(String(t).split(e)),i},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,i){return e.toUpperCase()+i})),noop:()=>{},toFiniteNumber:(t,e)=>null!=t&&Number.isFinite(t=+t)?t:e,findKey:P,global:R,isContextDefined:M,ALPHABET:U,generateString:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.ALPHA_DIGIT,i="";const{length:n}=e;for(;t--;)i+=e[Math.random()*n|0];return i},isSpecCompliantForm:function(t){return!!(t&&g(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),i=(t,n)=>{if(b(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[n]=t;const s=d(t)?[]:{};return k(t,((t,e)=>{const r=i(t,n+1);!u(r)&&(s[e]=r)})),e[n]=void 0,s}}return t};return i(t,0)},isAsyncFn:z,isThenable:t=>t&&(b(t)||g(t))&&g(t.then)&&g(t.catch),setImmediate:H,asap:G};function V(t,e,i,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}$.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const W=V.prototype,q={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{q[t]={value:t}})),Object.defineProperties(V,q),Object.defineProperty(W,"isAxiosError",{value:!0}),V.from=(t,e,i,n,s,r)=>{const a=Object.create(W);return $.toFlatObject(t,a,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),V.call(a,t.message,e,i,n,s),a.cause=t,a.name=t.name,r&&Object.assign(a,r),a};const K=V;function Y(t){return $.isPlainObject(t)||$.isArray(t)}function X(t){return $.endsWith(t,"[]")?t.slice(0,-2):t}function J(t,e,i){return t?t.concat(e).map((function(t,e){return t=X(t),!i&&e?"["+t+"]":t})).join(i?".":""):e}const Z=$.toFlatObject($,{},null,(function(t){return/^is[A-Z]/.test(t)}));const Q=function(t,e,i){if(!$.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const n=(i=$.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!$.isUndefined(e[t])}))).metaTokens,s=i.visitor||h,r=i.dots,a=i.indexes,o=(i.Blob||"undefined"!==typeof Blob&&Blob)&&$.isSpecCompliantForm(e);if(!$.isFunction(s))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if($.isDate(t))return t.toISOString();if(!o&&$.isBlob(t))throw new K("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(t)||$.isTypedArray(t)?o&&"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}function h(t,i,s){let o=t;if(t&&!s&&"object"===typeof t)if($.endsWith(i,"{}"))i=n?i:i.slice(0,-2),t=JSON.stringify(t);else if($.isArray(t)&&function(t){return $.isArray(t)&&!t.some(Y)}(t)||($.isFileList(t)||$.endsWith(i,"[]"))&&(o=$.toArray(t)))return i=X(i),o.forEach((function(t,n){!$.isUndefined(t)&&null!==t&&e.append(!0===a?J([i],n,r):null===a?i:i+"[]",l(t))})),!1;return!!Y(t)||(e.append(J(s,i,r),l(t)),!1)}const c=[],d=Object.assign(Z,{defaultVisitor:h,convertValue:l,isVisitable:Y});if(!$.isObject(t))throw new TypeError("data must be an object");return function t(i,n){if(!$.isUndefined(i)){if(-1!==c.indexOf(i))throw Error("Circular reference detected in "+n.join("."));c.push(i),$.forEach(i,(function(i,r){!0===(!($.isUndefined(i)||null===i)&&s.call(e,i,$.isString(r)?r.trim():r,n,d))&&t(i,n?n.concat(r):[r])})),c.pop()}}(t),e};function tt(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function et(t,e){this._pairs=[],t&&Q(t,this,e)}const it=et.prototype;it.append=function(t,e){this._pairs.push([t,e])},it.toString=function(t){const e=t?function(e){return t.call(this,e,tt)}:tt;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const nt=et;function st(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function rt(t,e,i){if(!e)return t;const n=i&&i.encode||st,s=i&&i.serialize;let r;if(r=s?s(e,i):$.isURLSearchParams(e)?e.toString():new nt(e,i).toString(n),r){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}const at=class{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},ot={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lt={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:nt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ht="undefined"!==typeof window&&"undefined"!==typeof document,ct="object"===typeof navigator&&navigator||void 0,dt=ht&&(!ct||["ReactNative","NativeScript","NS"].indexOf(ct.product)<0),ut="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,pt=ht&&window.location.href||"http://localhost",ft={...n,...lt};const gt=function(t){function e(t,i,n,s){let r=t[s++];if("__proto__"===r)return!0;const a=Number.isFinite(+r),o=s>=t.length;if(r=!r&&$.isArray(n)?n.length:r,o)return $.hasOwnProp(n,r)?n[r]=[n[r],i]:n[r]=i,!a;n[r]&&$.isObject(n[r])||(n[r]=[]);return e(t,i,n[r],s)&&$.isArray(n[r])&&(n[r]=function(t){const e={},i=Object.keys(t);let n;const s=i.length;let r;for(n=0;n<s;n++)r=i[n],e[r]=t[r];return e}(n[r])),!a}if($.isFormData(t)&&$.isFunction(t.entries)){const i={};return $.forEachEntry(t,((t,n)=>{e(function(t){return $.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),n,i,0)})),i}return null};const mt={transitional:ot,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const i=e.getContentType()||"",n=i.indexOf("application/json")>-1,s=$.isObject(t);s&&$.isHTMLForm(t)&&(t=new FormData(t));if($.isFormData(t))return n?JSON.stringify(gt(t)):t;if($.isArrayBuffer(t)||$.isBuffer(t)||$.isStream(t)||$.isFile(t)||$.isBlob(t)||$.isReadableStream(t))return t;if($.isArrayBufferView(t))return t.buffer;if($.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let r;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Q(t,new ft.classes.URLSearchParams,Object.assign({visitor:function(t,e,i,n){return ft.isNode&&$.isBuffer(t)?(this.append(e,t.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((r=$.isFileList(t))||i.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Q(r?{"files[]":t}:t,e&&new e,this.formSerializer)}}return s||n?(e.setContentType("application/json",!1),function(t,e,i){if($.isString(t))try{return(e||JSON.parse)(t),$.trim(t)}catch(n){if("SyntaxError"!==n.name)throw n}return(i||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||mt.transitional,i=e&&e.forcedJSONParsing,n="json"===this.responseType;if($.isResponse(t)||$.isReadableStream(t))return t;if(t&&$.isString(t)&&(i&&!this.responseType||n)){const i=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(s){if(i){if("SyntaxError"===s.name)throw K.from(s,K.ERR_BAD_RESPONSE,this,null,this.response);throw s}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ft.classes.FormData,Blob:ft.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],(t=>{mt.headers[t]={}}));const bt=mt,vt=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yt=Symbol("internals");function wt(t){return t&&String(t).trim().toLowerCase()}function At(t){return!1===t||null==t?t:$.isArray(t)?t.map(At):String(t)}function Et(t,e,i,n,s){return $.isFunction(n)?n.call(this,e,i):(s&&(e=i),$.isString(e)?$.isString(n)?-1!==e.indexOf(n):$.isRegExp(n)?n.test(e):void 0:void 0)}class xt{constructor(t){t&&this.set(t)}set(t,e,i){const n=this;function s(t,e,i){const s=wt(e);if(!s)throw new Error("header name must be a non-empty string");const r=$.findKey(n,s);(!r||void 0===n[r]||!0===i||void 0===i&&!1!==n[r])&&(n[r||e]=At(t))}const r=(t,e)=>$.forEach(t,((t,i)=>s(t,i,e)));if($.isPlainObject(t)||t instanceof this.constructor)r(t,e);else if($.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))r((t=>{const e={};let i,n,s;return t&&t.split("\n").forEach((function(t){s=t.indexOf(":"),i=t.substring(0,s).trim().toLowerCase(),n=t.substring(s+1).trim(),!i||e[i]&&vt[i]||("set-cookie"===i?e[i]?e[i].push(n):e[i]=[n]:e[i]=e[i]?e[i]+", "+n:n)})),e})(t),e);else if($.isHeaders(t))for(const[a,o]of t.entries())s(o,a,i);else null!=t&&s(e,t,i);return this}get(t,e){if(t=wt(t)){const i=$.findKey(this,t);if(i){const t=this[i];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(t);)e[n[1]]=n[2];return e}(t);if($.isFunction(e))return e.call(this,t,i);if($.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=wt(t)){const i=$.findKey(this,t);return!(!i||void 0===this[i]||e&&!Et(0,this[i],i,e))}return!1}delete(t,e){const i=this;let n=!1;function s(t){if(t=wt(t)){const s=$.findKey(i,t);!s||e&&!Et(0,i[s],s,e)||(delete i[s],n=!0)}}return $.isArray(t)?t.forEach(s):s(t),n}clear(t){const e=Object.keys(this);let i=e.length,n=!1;for(;i--;){const s=e[i];t&&!Et(0,this[s],s,t,!0)||(delete this[s],n=!0)}return n}normalize(t){const e=this,i={};return $.forEach(this,((n,s)=>{const r=$.findKey(i,s);if(r)return e[r]=At(n),void delete e[s];const a=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,i)=>e.toUpperCase()+i))}(s):String(s).trim();a!==s&&delete e[s],e[a]=At(n),i[a]=!0})),this}concat(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.constructor.concat(this,...e)}toJSON(t){const e=Object.create(null);return $.forEach(this,((i,n)=>{null!=i&&!1!==i&&(e[n]=t&&$.isArray(i)?i.join(", "):i)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((t=>{let[e,i]=t;return e+": "+i})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t){const e=new this(t);for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return n.forEach((t=>e.set(t))),e}static accessor(t){const e=(this[yt]=this[yt]={accessors:{}}).accessors,i=this.prototype;function n(t){const n=wt(t);e[n]||(!function(t,e){const i=$.toCamelCase(" "+e);["get","set","has"].forEach((n=>{Object.defineProperty(t,n+i,{value:function(t,i,s){return this[n].call(this,e,t,i,s)},configurable:!0})}))}(i,t),e[n]=!0)}return $.isArray(t)?t.forEach(n):n(t),this}}xt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),$.reduceDescriptors(xt.prototype,((t,e)=>{let{value:i}=t,n=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(t){this[n]=t}}})),$.freezeMethods(xt);const _t=xt;function St(t,e){const i=this||bt,n=e||i,s=_t.from(n.headers);let r=n.data;return $.forEach(t,(function(t){r=t.call(i,r,s.normalize(),e?e.status:void 0)})),s.normalize(),r}function Ct(t){return!(!t||!t.__CANCEL__)}function Tt(t,e,i){K.call(this,null==t?"canceled":t,K.ERR_CANCELED,e,i),this.name="CanceledError"}$.inherits(Tt,K,{__CANCEL__:!0});const kt=Tt;function Pt(t,e,i){const n=i.config.validateStatus;i.status&&n&&!n(i.status)?e(new K("Request failed with status code "+i.status,[K.ERR_BAD_REQUEST,K.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):t(i)}const Rt=function(t,e){t=t||10;const i=new Array(t),n=new Array(t);let s,r=0,a=0;return e=void 0!==e?e:1e3,function(o){const l=Date.now(),h=n[a];s||(s=l),i[r]=o,n[r]=l;let c=a,d=0;for(;c!==r;)d+=i[c++],c%=t;if(r=(r+1)%t,r===a&&(a=(a+1)%t),l-s<e)return;const u=h&&l-h;return u?Math.round(1e3*d/u):void 0}};const Mt=function(t,e){let i,n,s=0,r=1e3/e;const a=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=r,i=null,n&&(clearTimeout(n),n=null),t.apply(null,e)};return[function(){const t=Date.now(),e=t-s;for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];e>=r?a(l,t):(i=l,n||(n=setTimeout((()=>{n=null,a(i)}),r-e)))},()=>i&&a(i)]},It=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const s=Rt(50,250);return Mt((i=>{const r=i.loaded,a=i.lengthComputable?i.total:void 0,o=r-n,l=s(o);n=r;t({loaded:r,total:a,progress:a?r/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&r<=a?(a-r)/l:void 0,event:i,lengthComputable:null!=a,[e?"download":"upload"]:!0})}),i)},Lt=(t,e)=>{const i=null!=t;return[n=>e[0]({lengthComputable:i,total:t,loaded:n}),e[1]]},Dt=t=>function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return $.asap((()=>t(...i)))},Ot=ft.hasStandardBrowserEnv?function(){const t=ft.navigator&&/(msie|trident)/i.test(ft.navigator.userAgent),e=document.createElement("a");let i;function n(i){let n=i;return t&&(e.setAttribute("href",n),n=e.href),e.setAttribute("href",n),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return i=n(window.location.href),function(t){const e=$.isString(t)?n(t):t;return e.protocol===i.protocol&&e.host===i.host}}():function(){return!0},Ft=ft.hasStandardBrowserEnv?{write(t,e,i,n,s,r){const a=[t+"="+encodeURIComponent(e)];$.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),$.isString(n)&&a.push("path="+n),$.isString(s)&&a.push("domain="+s),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Nt(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const Bt=t=>t instanceof _t?{...t}:t;function jt(t,e){e=e||{};const i={};function n(t,e,i){return $.isPlainObject(t)&&$.isPlainObject(e)?$.merge.call({caseless:i},t,e):$.isPlainObject(e)?$.merge({},e):$.isArray(e)?e.slice():e}function s(t,e,i){return $.isUndefined(e)?$.isUndefined(t)?void 0:n(void 0,t,i):n(t,e,i)}function r(t,e){if(!$.isUndefined(e))return n(void 0,e)}function a(t,e){return $.isUndefined(e)?$.isUndefined(t)?void 0:n(void 0,t):n(void 0,e)}function o(i,s,r){return r in e?n(i,s):r in t?n(void 0,i):void 0}const l={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(t,e)=>s(Bt(t),Bt(e),!0)};return $.forEach(Object.keys(Object.assign({},t,e)),(function(n){const r=l[n]||s,a=r(t[n],e[n],n);$.isUndefined(a)&&r!==o||(i[n]=a)})),i}const Ut=t=>{const e=jt({},t);let i,{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:a,headers:o,auth:l}=e;if(e.headers=o=_t.from(o),e.url=rt(Nt(e.baseURL,e.url),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),$.isFormData(n))if(ft.hasStandardBrowserEnv||ft.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(i=o.getContentType())){const[t,...e]=i?i.split(";").map((t=>t.trim())).filter(Boolean):[];o.setContentType([t||"multipart/form-data",...e].join("; "))}if(ft.hasStandardBrowserEnv&&(s&&$.isFunction(s)&&(s=s(e)),s||!1!==s&&Ot(e.url))){const t=r&&a&&Ft.read(a);t&&o.set(r,t)}return e},zt="undefined"!==typeof XMLHttpRequest&&function(t){return new Promise((function(e,i){const n=Ut(t);let s=n.data;const r=_t.from(n.headers).normalize();let a,o,l,h,c,{responseType:d,onUploadProgress:u,onDownloadProgress:p}=n;function f(){h&&h(),c&&c(),n.cancelToken&&n.cancelToken.unsubscribe(a),n.signal&&n.signal.removeEventListener("abort",a)}let g=new XMLHttpRequest;function m(){if(!g)return;const n=_t.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());Pt((function(t){e(t),f()}),(function(t){i(t),f()}),{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:n,config:t,request:g}),g=null}g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(i(new K("Request aborted",K.ECONNABORTED,t,g)),g=null)},g.onerror=function(){i(new K("Network Error",K.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let e=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const s=n.transitional||ot;n.timeoutErrorMessage&&(e=n.timeoutErrorMessage),i(new K(e,s.clarifyTimeoutError?K.ETIMEDOUT:K.ECONNABORTED,t,g)),g=null},void 0===s&&r.setContentType(null),"setRequestHeader"in g&&$.forEach(r.toJSON(),(function(t,e){g.setRequestHeader(e,t)})),$.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),d&&"json"!==d&&(g.responseType=n.responseType),p&&([l,c]=It(p,!0),g.addEventListener("progress",l)),u&&g.upload&&([o,h]=It(u),g.upload.addEventListener("progress",o),g.upload.addEventListener("loadend",h)),(n.cancelToken||n.signal)&&(a=e=>{g&&(i(!e||e.type?new kt(null,t,g):e),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(a),n.signal&&(n.signal.aborted?a():n.signal.addEventListener("abort",a)));const b=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(n.url);b&&-1===ft.protocols.indexOf(b)?i(new K("Unsupported protocol "+b+":",K.ERR_BAD_REQUEST,t)):g.send(s||null)}))},Ht=(t,e)=>{const{length:i}=t=t?t.filter(Boolean):[];if(e||i){let i,n=new AbortController;const s=function(t){if(!i){i=!0,a();const e=t instanceof Error?t:this.reason;n.abort(e instanceof K?e:new kt(e instanceof Error?e.message:e))}};let r=e&&setTimeout((()=>{r=null,s(new K(`timeout ${e} of ms exceeded`,K.ETIMEDOUT))}),e);const a=()=>{t&&(r&&clearTimeout(r),r=null,t.forEach((t=>{t.unsubscribe?t.unsubscribe(s):t.removeEventListener("abort",s)})),t=null)};t.forEach((t=>t.addEventListener("abort",s)));const{signal:o}=n;return o.unsubscribe=()=>$.asap(a),o}},Gt=function*(t,e){let i=t.byteLength;if(!e||i<e)return void(yield t);let n,s=0;for(;s<i;)n=s+e,yield t.slice(s,n),s=n},$t=async function*(t){if(t[Symbol.asyncIterator])return void(yield*t);const e=t.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},Vt=(t,e,i,n)=>{const s=async function*(t,e){for await(const i of $t(t))yield*Gt(i,e)}(t,e);let r,a=0,o=t=>{r||(r=!0,n&&n(t))};return new ReadableStream({async pull(t){try{const{done:e,value:n}=await s.next();if(e)return o(),void t.close();let r=n.byteLength;if(i){let t=a+=r;i(t)}t.enqueue(new Uint8Array(n))}catch(e){throw o(e),e}},cancel:t=>(o(t),s.return())},{highWaterMark:2})},Wt="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,qt=Wt&&"function"===typeof ReadableStream,Kt=Wt&&("function"===typeof TextEncoder?(Yt=new TextEncoder,t=>Yt.encode(t)):async t=>new Uint8Array(await new Response(t).arrayBuffer()));var Yt;const Xt=function(t){try{for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return!!t(...i)}catch(s){return!1}},Jt=qt&&Xt((()=>{let t=!1;const e=new Request(ft.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})),Zt=qt&&Xt((()=>$.isReadableStream(new Response("").body))),Qt={stream:Zt&&(t=>t.body)};var te;Wt&&(te=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((t=>{!Qt[t]&&(Qt[t]=$.isFunction(te[t])?e=>e[t]():(e,i)=>{throw new K(`Response type '${t}' is not supported`,K.ERR_NOT_SUPPORT,i)})})));const ee=async(t,e)=>{const i=$.toFiniteNumber(t.getContentLength());return null==i?(async t=>{if(null==t)return 0;if($.isBlob(t))return t.size;if($.isSpecCompliantForm(t)){const e=new Request(ft.origin,{method:"POST",body:t});return(await e.arrayBuffer()).byteLength}return $.isArrayBufferView(t)||$.isArrayBuffer(t)?t.byteLength:($.isURLSearchParams(t)&&(t+=""),$.isString(t)?(await Kt(t)).byteLength:void 0)})(e):i},ie={http:null,xhr:zt,fetch:Wt&&(async t=>{let{url:e,method:i,data:n,signal:s,cancelToken:r,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:h,headers:c,withCredentials:d="same-origin",fetchOptions:u}=Ut(t);h=h?(h+"").toLowerCase():"text";let p,f=Ht([s,r&&r.toAbortSignal()],a);const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let m;try{if(l&&Jt&&"get"!==i&&"head"!==i&&0!==(m=await ee(c,n))){let t,i=new Request(e,{method:"POST",body:n,duplex:"half"});if($.isFormData(n)&&(t=i.headers.get("content-type"))&&c.setContentType(t),i.body){const[t,e]=Lt(m,It(Dt(l)));n=Vt(i.body,65536,t,e)}}$.isString(d)||(d=d?"include":"omit");const s="credentials"in Request.prototype;p=new Request(e,{...u,signal:f,method:i.toUpperCase(),headers:c.normalize().toJSON(),body:n,duplex:"half",credentials:s?d:void 0});let r=await fetch(p);const a=Zt&&("stream"===h||"response"===h);if(Zt&&(o||a&&g)){const t={};["status","statusText","headers"].forEach((e=>{t[e]=r[e]}));const e=$.toFiniteNumber(r.headers.get("content-length")),[i,n]=o&&Lt(e,It(Dt(o),!0))||[];r=new Response(Vt(r.body,65536,i,(()=>{n&&n(),g&&g()})),t)}h=h||"text";let b=await Qt[$.findKey(Qt,h)||"text"](r,t);return!a&&g&&g(),await new Promise(((e,i)=>{Pt(e,i,{data:b,headers:_t.from(r.headers),status:r.status,statusText:r.statusText,config:t,request:p})}))}catch(b){if(g&&g(),b&&"TypeError"===b.name&&/fetch/i.test(b.message))throw Object.assign(new K("Network Error",K.ERR_NETWORK,t,p),{cause:b.cause||b});throw K.from(b,b&&b.code,t,p)}})};$.forEach(ie,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(i){}Object.defineProperty(t,"adapterName",{value:e})}}));const ne=t=>`- ${t}`,se=t=>$.isFunction(t)||null===t||!1===t,re=t=>{t=$.isArray(t)?t:[t];const{length:e}=t;let i,n;const s={};for(let r=0;r<e;r++){let e;if(i=t[r],n=i,!se(i)&&(n=ie[(e=String(i)).toLowerCase()],void 0===n))throw new K(`Unknown adapter '${e}'`);if(n)break;s[e||"#"+r]=n}if(!n){const t=Object.entries(s).map((t=>{let[e,i]=t;return`adapter ${e} `+(!1===i?"is not supported by the environment":"is not available in the build")}));let i=e?t.length>1?"since :\n"+t.map(ne).join("\n"):" "+ne(t[0]):"as no adapter specified";throw new K("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n};function ae(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new kt(null,t)}function oe(t){ae(t),t.headers=_t.from(t.headers),t.data=St.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return re(t.adapter||bt.adapter)(t).then((function(e){return ae(t),e.data=St.call(t,t.transformResponse,e),e.headers=_t.from(e.headers),e}),(function(e){return Ct(e)||(ae(t),e&&e.response&&(e.response.data=St.call(t,t.transformResponse,e.response),e.response.headers=_t.from(e.response.headers))),Promise.reject(e)}))}const le="1.7.7",he={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{he[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}}));const ce={};he.transitional=function(t,e,i){function n(t,e){return"[Axios v1.7.7] Transitional option '"+t+"'"+e+(i?". "+i:"")}return(i,s,r)=>{if(!1===t)throw new K(n(s," has been removed"+(e?" in "+e:"")),K.ERR_DEPRECATED);return e&&!ce[s]&&(ce[s]=!0,console.warn(n(s," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(i,s,r)}};const de={assertOptions:function(t,e,i){if("object"!==typeof t)throw new K("options must be an object",K.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const r=n[s],a=e[r];if(a){const e=t[r],i=void 0===e||a(e,r,t);if(!0!==i)throw new K("option "+r+" must be "+i,K.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new K("Unknown option "+r,K.ERR_BAD_OPTION)}},validators:he},ue=de.validators;class pe{constructor(t){this.defaults=t,this.interceptors={request:new at,response:new at}}async request(t,e){try{return await this._request(t,e)}catch(i){if(i instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const e=t.stack?t.stack.replace(/^.+\n/,""):"";try{i.stack?e&&!String(i.stack).endsWith(e.replace(/^.+\n.+\n/,""))&&(i.stack+="\n"+e):i.stack=e}catch(n){}}throw i}}_request(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{},e=jt(this.defaults,e);const{transitional:i,paramsSerializer:n,headers:s}=e;void 0!==i&&de.assertOptions(i,{silentJSONParsing:ue.transitional(ue.boolean),forcedJSONParsing:ue.transitional(ue.boolean),clarifyTimeoutError:ue.transitional(ue.boolean)},!1),null!=n&&($.isFunction(n)?e.paramsSerializer={serialize:n}:de.assertOptions(n,{encode:ue.function,serialize:ue.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let r=s&&$.merge(s.common,s[e.method]);s&&$.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete s[t]})),e.headers=_t.concat(r,s);const a=[];let o=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(o=o&&t.synchronous,a.unshift(t.fulfilled,t.rejected))}));const l=[];let h;this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)}));let c,d=0;if(!o){const t=[oe.bind(this),void 0];for(t.unshift.apply(t,a),t.push.apply(t,l),c=t.length,h=Promise.resolve(e);d<c;)h=h.then(t[d++],t[d++]);return h}c=a.length;let u=e;for(d=0;d<c;){const t=a[d++],e=a[d++];try{u=t(u)}catch(p){e.call(this,p);break}}try{h=oe.call(this,u)}catch(p){return Promise.reject(p)}for(d=0,c=l.length;d<c;)h=h.then(l[d++],l[d++]);return h}getUri(t){return rt(Nt((t=jt(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}$.forEach(["delete","get","head","options"],(function(t){pe.prototype[t]=function(e,i){return this.request(jt(i||{},{method:t,url:e,data:(i||{}).data}))}})),$.forEach(["post","put","patch"],(function(t){function e(e){return function(i,n,s){return this.request(jt(s||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:i,data:n}))}}pe.prototype[t]=e(),pe.prototype[t+"Form"]=e(!0)}));const fe=pe;class ge{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const i=this;this.promise.then((t=>{if(!i._listeners)return;let e=i._listeners.length;for(;e-- >0;)i._listeners[e](t);i._listeners=null})),this.promise.then=t=>{let e;const n=new Promise((t=>{i.subscribe(t),e=t})).then(t);return n.cancel=function(){i.unsubscribe(e)},n},t((function(t,n,s){i.reason||(i.reason=new kt(t,n,s),e(i.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=e=>{t.abort(e)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new ge((function(e){t=e})),cancel:t}}}const me=ge;const be={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(be).forEach((t=>{let[e,i]=t;be[i]=e}));const ve=be;const ye=function t(e){const i=new fe(e),n=s(fe.prototype.request,i);return $.extend(n,fe.prototype,i,{allOwnKeys:!0}),$.extend(n,i,null,{allOwnKeys:!0}),n.create=function(i){return t(jt(e,i))},n}(bt);ye.Axios=fe,ye.CanceledError=kt,ye.CancelToken=me,ye.isCancel=Ct,ye.VERSION=le,ye.toFormData=Q,ye.AxiosError=K,ye.Cancel=ye.CanceledError,ye.all=function(t){return Promise.all(t)},ye.spread=function(t){return function(e){return t.apply(null,e)}},ye.isAxiosError=function(t){return $.isObject(t)&&!0===t.isAxiosError},ye.mergeConfig=jt,ye.AxiosHeaders=_t,ye.formToJSON=t=>gt($.isHTMLForm(t)?new FormData(t):t),ye.getAdapter=re,ye.HttpStatusCode=ve,ye.default=ye;const we=ye}}]);
//# sourceMappingURL=788.a222c594.chunk.js.map